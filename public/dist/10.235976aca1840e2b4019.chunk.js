webpackJsonp([10],{1736:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(898),i=r(239);t.default={data:function(){var e=this,t=this;return{query:{startTime:"",endTime:"",estimatedDate:"",openTicketName:"",operateAccount:"",receiptOrderNo:"",receiptBillNo:"",receiptType:"",receiptStatus:"",page:1,row:10},moreThanStartDate:{disabledDate:function(e){return e&&e.valueOf()<t.query.startTime}},loading:!0,tableColumns:[{title:"序号",key:"xuhao",align:"center",width:62,render:function(e,t){return"小计"==t.row.xuhao||"总计"==t.row.xuhao?e("div",t.row.xuhao):e("div",t.index+1)}},{title:"开票名称",align:"center",key:"openTicketName",width:100},{title:"类型",key:"receiptType",align:"center",width:100,render:function(e,t){return e("div",1==t.row.receiptType?"现金单":0==t.row.receiptType?"非现金单":"")}},{title:"对账单号",key:"receiptBillNo",align:"center",width:200},{title:"创建时间",key:"createTime",align:"center",width:120,render:function(e,t){var r="",i=t.row.createTime;return i&&null!==i&&(r=(0,a.formatDate)(new Date(parseInt(i)),"yyyy-MM-DD")),e("span",r)}},{title:"预计收款日期",align:"center",key:"estimatedDate",width:120,render:function(e,t){var r="",i=t.row.estimatedDate;return i&&null!==i&&(r=(0,a.formatDate)(new Date(parseInt(i)),"yyyy-MM-DD")),e("span",r)}},{title:"应收金额",align:"center",key:"receivable",width:120,render:function(e,t){return e("div",t.row.receivable?Number(t.row.receivable).toFixed(2):"0.00")}},{title:"预收核销",align:"center",key:"advanceFee",width:120,render:function(e,t){return e("div",t.row.advanceFee?Number(t.row.advanceFee).toFixed(2):"0.00")}},{title:"尾差核销",align:"center",key:"diff",width:120,render:function(e,t){return e("div",t.row.diff?Number(t.row.diff).toFixed(2):"0.00")}},{title:"费用抵减",align:"center",key:"fee",width:120,render:function(e,t){return e("div",t.row.fee?Number(t.row.fee).toFixed(2):"0.00")}},{title:"退货抵减",align:"center",key:"refund",width:120,render:function(e,t){return e("div",t.row.refund?Number(t.row.refund).toFixed(2):"0.00")}},{title:"实收金额",align:"center",key:"netReceipts",width:120,render:function(e,t){return e("div",t.row.netReceipts?Number(t.row.netReceipts).toFixed(2):"0.00")}},{title:"核销金额",align:"center",key:"verification",width:120,render:function(e,t){return e("div",t.row.verification?Number(t.row.verification).toFixed(2):"0.00")}},{title:"剩余核销金额",align:"center",key:"restVerification",width:120,render:function(e,t){return e("div",t.row.receivable-t.row.verification?(t.row.receivable-t.row.verification).toFixed(2):"0.00")}},{title:"状态",align:"center",key:"receiptStatus",width:120,render:function(e,t){var r="",a=t.row.receiptStatus;switch(parseInt(a)){case 0:r="未核销";break;case 1:r="部分已核销";break;case 2:r="全部已核销"}return e("span",r)}},{title:"收款人",key:"receiptUser",width:120},{title:"操作",fixed:"right",width:130,align:"center",render:function(t,r){var a="";return"小计"==r.row.xuhao||"总计"==r.row.xuhao?t("div",""):(a=2==r.row.receiptStatus?[t("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$router.push({name:"receipt-detail",query:{id:r.row.receiptBillNo}})}}},"查看")]:[t("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){e.$router.push({name:"should-receipt-print",query:{id:r.row.receiptBillNo,name:"receivable"}})}}},"打印"),t("Button",{props:{size:"small"},on:{click:function(){if(1==r.row.receiptType){var t=e.$router.resolve({name:"case-edit",query:{id:r.row.receiptBillNo,receiptType:r.row.receiptType}}),a=t.href;window.open(a,"_blank")}else{var i=e.$router.resolve({name:"receipt-edit",query:{id:r.row.receiptBillNo}}),n=i.href;window.open(n,"_blank")}}}},"收款")],t("div",a))}}],tableData:[],totalCount:0,currentTotalCount:1,data:[],backoutModal2Visible:!1,exportLimit:!1,exportLimitText:"",exportLimitTimer:null}},mounted:function(){this.queryData()},computed:{},methods:{queryData:function(e){var t=this;t.query.page=e,t.currentTotalCount=e,t.loading=!0,this.$util.ajax({method:"post",url:t.$util.apiConfig.traderManage.flowManage.queryReceiptBill.queryList,data:i.stringify(t.query)}).then(function(e){if(t.loading=!1,200==e.data.code){if(t.data=[],t.totalCount=0,""==e.data.result.pager.records)return;t.data=e.data.result.rbLists,t.totalCount=e.data.result.pager.totalCount;for(var r in t.data)t.data[r].restAmount=Number(t.data[r].receiptPrice)-Number(t.data[r].chargeOffAmount);var a=0,i=0,n=0,o=0,l=0,u=0,c=0;for(var s in t.data)a+=t.data[s].receivable?Number(Number(t.data[s].receivable).toFixed(2)):0,i+=t.data[s].advanceFee?Number(Number(t.data[s].advanceFee).toFixed(2)):0,n+=t.data[s].diff?Number(Number(t.data[s].diff).toFixed(2)):0,o+=t.data[s].fee?Number(Number(t.data[s].fee).toFixed(2)):0,l+=t.data[s].refund?Number(Number(t.data[s].refund).toFixed(2)):0,u+=t.data[s].netReceipts?Number(Number(t.data[s].netReceipts).toFixed(2)):0,c+=t.data[s].verification?Number(Number(t.data[s].verification).toFixed(2)):0;t.data.push({xuhao:"小计",receivable:a,advanceFee:i,diff:n,fee:o,refund:l,netReceipts:u,verification:c}),t.data.push({xuhao:"总计",receivable:e.data.result.dto.receivable,advanceFee:e.data.result.dto.advanceFee,diff:e.data.result.dto.diff,fee:e.data.result.dto.fee,refund:e.data.result.dto.refund,netReceipts:e.data.result.dto.netReceipts,verification:e.data.result.dto.verification})}else t.$Modal.error({title:"提示",content:e.data.message})}).catch(function(e){console.log("失败信息：",e)})},clearQuery:function(){this.query={startTime:"",endTime:"",estimatedDate:"",openTicketName:"",operateAccount:"",receiptOrderNo:"",receiptBillNo:"",receiptType:"",receiptStatus:"",page:1,row:10}},getEndTime:function(e){this.query.endTime=e},getStartTime:function(e){this.query.startTime=e}}}},2518:function(e,t,r){var a=r(2519);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(43)("7b2700fe",a,!1,{})},2519:function(e,t,r){t=e.exports=r(42)(!1),t.push([e.i,"\n.flr[data-v-6b953659] {\n  float: right;\n}\n.custom-btn[data-v-6b953659] {\n  width: 120px;\n}\n.mt20[data-v-6b953659] {\n  margin-top: 20px;\n}\n",""])},2520:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",[r("Form",{attrs:{"label-width":80,id:"form-export"}},[r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text",name:"page"},domProps:{value:e.query.page}}),e._v(" "),r("Row",[r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"开始时间"}},[r("DatePicker",{attrs:{type:"date",name:"startTime",placeholder:"开始时间",value:e.query.startTime},on:{"on-change":e.getStartTime}})],1)],1),e._v(" "),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"截止时间"}},[r("DatePicker",{attrs:{type:"date",placeholder:"截止时间",options:e.moreThanStartDate,value:e.query.endTime},on:{"on-change":e.getEndTime}})],1)],1),e._v(" "),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"预收款日期"}},[r("DatePicker",{attrs:{type:"date",placeholder:"预收款日期",name:"startTime"},model:{value:e.query.estimatedDate,callback:function(t){e.$set(e.query,"estimatedDate",t)},expression:"query.estimatedDate"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"6"}},[r("Button",{staticClass:"flr custom-btn",attrs:{type:"primary"},on:{click:function(t){e.clearQuery()}}},[r("span",[e._v("重  置")])])],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"开票名称"}},[r("Input",{attrs:{placeholder:"开票名称",name:"openTicketName",clearable:""},model:{value:e.query.openTicketName,callback:function(t){e.$set(e.query,"openTicketName",t)},expression:"query.openTicketName"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"下单账号"}},[r("Input",{attrs:{placeholder:"下单账号",clearable:"",name:"operateAccount"},model:{value:e.query.operateAccount,callback:function(t){e.$set(e.query,"operateAccount",t)},expression:"query.operateAccount"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"收货单号"}},[r("Input",{attrs:{placeholder:"收货单号",clearable:"",name:"receiptOrderNo"},model:{value:e.query.receiptOrderNo,callback:function(t){e.$set(e.query,"receiptOrderNo",t)},expression:"query.receiptOrderNo"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"6"}},[r("Button",{staticClass:"flr custom-btn",attrs:{type:"primary"},on:{click:function(t){e.queryData(1)}}},[e._v("查  询")])],1)],1),e._v(" "),r("Row",[r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"对账单号"}},[r("Input",{attrs:{placeholder:"对账单号",clearable:"",name:"receiptBillNo"},model:{value:e.query.receiptBillNo,callback:function(t){e.$set(e.query,"receiptBillNo",t)},expression:"query.receiptBillNo"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"类型"}},[r("Select",{attrs:{name:"chargeOffStatus",placement:"top"},model:{value:e.query.receiptType,callback:function(t){e.$set(e.query,"receiptType",t)},expression:"query.receiptType"}},[r("Option",{attrs:{value:2}},[e._v("全部")]),e._v(" "),r("Option",{attrs:{value:1}},[e._v("现金单")]),e._v(" "),r("Option",{attrs:{value:0}},[e._v("非现金单")])],1)],1)],1),e._v(" "),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"状态"}},[r("Select",{attrs:{name:"receiptStatus",placement:"top"},model:{value:e.query.receiptStatus,callback:function(t){e.$set(e.query,"receiptStatus",t)},expression:"query.receiptStatus"}},[r("Option",{attrs:{value:3}},[e._v("全部")]),e._v(" "),r("Option",{attrs:{value:0}},[e._v("未核销")]),e._v(" "),r("Option",{attrs:{value:1}},[e._v("部分已核销")]),e._v(" "),r("Option",{attrs:{value:2}},[e._v("全部已核销")])],1)],1)],1)],1),e._v(" "),r("Row",[r("Table",{attrs:{columns:e.tableColumns,data:e.data,loading:e.loading}})],1),e._v(" "),r("Row",{staticClass:"mt20"},[r("Page",{staticStyle:{float:"right"},attrs:{total:e.totalCount,current:e.currentTotalCount,"page-size":10,"show-total":"","show-elevator":""},on:{"on-change":e.queryData}})],1)],1)],1)},i=[];a._withStripped=!0;var n={render:a,staticRenderFns:i};t.default=n},262:function(e,t,r){"use strict";function a(e){c||r(2518)}Object.defineProperty(t,"__esModule",{value:!0});var i=r(1736),n=r.n(i);for(var o in i)"default"!==o&&function(e){r.d(t,e,function(){return i[e]})}(o);var l=r(2520),u=r.n(l),c=!1,s=r(13),d=a,p=s(n.a,u.a,!1,d,"data-v-6b953659",null);p.options.__file="src/views/trader-manage/flow-manage/receipt-manage/showing-receivable.vue",t.default=p.exports},898:function(e,t,r){"use strict";function a(e,t){if(!t)var t="yyyy-MM-DD hh:mm:ss";var r={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in r)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return t}function i(e,t){if(!t)var t="yyyy-MM-dd";(e=Number(e))<1e10&&(e*=1e3);var r=new Date(e),a={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in a)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[i]:("00"+a[i]).substr((""+a[i]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=a,t.timestampToDay=i}});