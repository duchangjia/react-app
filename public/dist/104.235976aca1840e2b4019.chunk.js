webpackJsonp([104,211],{1011:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"tableGlobal",props:{columnsList:Array,tableData:Array,loading:{type:Boolean,default:!0},tableMode:{type:Boolean,default:!1}},data:function(){return{}},methods:{selectRow:function(e){this.$emit("checkRow",e)}}}},1107:function(e,t,n){var a=n(1108);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(43)("a4c25a38",a,!1,{})},1108:function(e,t,n){t=e.exports=n(42)(!1),t.push([e.i,"\n.show-edit-btn {\n  display: none;\n  margin-left: -10px;\n}\n.ivu-table-cell:hover .show-edit-btn {\n  display: inline-block;\n}\n.global-table .ivu-table-row-highlight td {\n  background: #bfd4e3!important;\n}\n.global-table .ivu-table-row-hover td {\n  background: #bfd4e3!important;\n}\n",""])},1109:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.tableMode?"global-table":""},[e.tableMode?e._e():n("Table",{attrs:{columns:e.columnsList,data:e.tableData,width:"100%",stripe:"",border:"",loading:e.loading},on:{"on-selection-change":e.selectRow}}),e._v(" "),e.tableMode?n("Table",{attrs:{columns:e.columnsList,"highlight-row":e.tableMode,data:e.tableData,width:"100%",stripe:"",border:"",loading:e.loading},on:{"on-row-click":e.selectRow}}):e._e()],1)},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};t.default=i},1669:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(38),i=(a(o),n(239)),r=a(i),l=n(607),s=a(l);t.default={data:function(){var e=this;return{loading:!1,modal1:!1,columns:[{title:"业务员",align:"center",key:"saleman"},{title:"工号",align:"center",key:"jobNumber"},{title:"门店数量",align:"center",key:"storeCount"},{title:"预打造目标",align:"center",key:"presetGoals",render:function(t,n){return t("Input",{props:{type:"text",value:n.row.presetGoals},on:{"on-blur":function(t){e.data[n.index].presetGoals=t.target.value}}})}},{title:"精耕打造目标",align:"center",key:"ploughingGoals",render:function(t,n){return t("Input",{props:{type:"text",value:n.row.ploughingGoals},on:{"on-blur":function(t){e.data[n.index].ploughingGoals=t.target.value}}})}},{title:"开始时间",align:"center",key:"startDate",width:140,render:function(t,n){return t("DatePicker",{props:{value:n.row.startDate,type:"date",placeholder:"选择日期",style:"width: 200px",editable:!1},on:{"on-change":function(t){e.data[n.index].startDate=t,console.log(t)}}})}},{title:"结束时间",align:"center",key:"endDate",width:140,render:function(t,n){return t("DatePicker",{props:{value:n.row.endDate,format:"yyyy-MM-dd",type:"date",placeholder:"选择日期",style:"width: 200px",editable:!1},on:{"on-change":function(t){e.data[n.index].endDate=t}}})}},{title:"操作",align:"center",key:"handle",width:125,render:function(t,n){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){return""==n.row.presetGoals?(e.$Modal.confirm({title:"提示",content:"<p>请设置预打造目标！</p>"}),!1):""==n.row.ploughingGoals?(e.$Modal.confirm({title:"提示",content:"<p>请设置精耕打造目标！</p>"}),!1):n.row.startDate.replace("-","").replace("-","")<e.value.creationTime.replace("-","").replace("-","")?(e.$Modal.confirm({title:"提示",content:"<p>开始时间不能小于创建时间！</p>"}),!1):void e.$Message.info("保存成功！")}}},"保存"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.remove(n.index)}}},"删除")])}}],val:"",data:[{saleman:"李白",jobNumber:"3453465",storeCount:"5",presetGoals:"4",ploughingGoals:"4",startDate:"2018.4.6",endDate:"2018.5.6"},{saleman:"张飞",jobNumber:"3453465",storeCount:"5",presetGoals:"4",ploughingGoals:"4",startDate:"2018.4.6",endDate:"2018.5.6"}],columnsListEmployeeModal:[{type:"selection",width:60,align:"center"},{title:"工号",key:"employeeId",align:"center"},{title:"姓名",key:"employeeName",align:"center"},{title:"门店数量",key:"shopAmount"}],thisTableDataEmployeeModal:[],saveData:[],value:{saleman:"",creater:"liby0068",creationTime:"2018.8.10"},t_value:"",employeeQuery:{currentPage:1,empName:"",storeCode:""},rowCheckEmployee:!0,tableRefModal:"tableRefModal",employeeTotalCount:1}},mounted:function(){},methods:{init:function(){var e=this,t=document.cookie;t&&(t=t.split("; "),t.map(function(t){var n=t.split("=");"user"==n[0]&&(e.value.creater=n[1])}));var n=new Date;this.value.creationTime=this.formatDate(n,"yyyy-MM-DD")},getData:function(){var e=this;this.data=[];var t={};this.loading=!0,this.$ajax({method:"post",url:this.$util.apiConfig.promotionManage.warProgramme.terminalManagement.newlist,data:t}).then(function(t){e.loading=!1}).catch(function(e){console.log("失败信息：",e)})},ok:function(){var e=this;if(0==this.saveData.length)return this.$Modal.warning({content:"未选择业务员"});this.saveData.map(function(t){var n={empCode:t.empCode,saleman:t.employeeName,jobNumber:t.employeeId,storeCount:t.shopAmount,presetGoals:"",ploughingGoals:"",startDate:"",endDate:""};e.data.push(n)})},formatDate:function(e,t){if(""===e)return"";var n=new Date;if(n.setTime(e),!t)var t="yyyy-MM-DD hh:mm:ss";var a={"M+":n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,"D+":n.getDate()<10?"0"+n.getDate():n.getDate(),"h+":n.getHours()<10?"0"+n.getHours():n.getHours(),"m+":n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),"s+":n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in a)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[o]:("00"+a[o]).substr((""+a[o]).length)));return t},selections:function(e){this.saveData=e},Confirm:function(){var e=this;if(console.log(0==this.data.length),0==this.data.length)return this.$Modal.confirm({title:"提示",content:"<p>请选择业务员！</p>"}),!1;var t=0;return this.data.map(function(n){if(""==n.startDate||""==n.endDate)return t=1,!1;var a=n.startDate.replace("-","").replace("-",""),o=n.endDate.replace("-","").replace("-","");a<e.value.creationTime.replace("-","").replace("-","")&&(t=2),a>o&&(t=3),""==n.presetGoals&&(t=4),""==n.ploughingGoals&&(t=5)}),4==t?(this.$Modal.confirm({title:"提示",content:"<p>请设置预打造目标或保存数据！</p>"}),!1):5==t?(this.$Modal.confirm({title:"提示",content:"<p>请设置精耕打造目标或保存数据！</p>"}),!1):1==t?(this.$Modal.confirm({title:"提示",content:"<p>请设置开始时间和结束时间!</p>"}),!1):2==t?(this.$Modal.confirm({title:"提示",content:"<p>开始时间不能小于创建时间！</p>"}),!1):3==t?(this.$Modal.confirm({title:"提示",content:"<p>开始时间不能大于结束时间！</p>"}),!1):void(0==t&&this.$Modal.confirm({title:"提示",content:"<p>确定保存数据了吗？</p>",onOk:function(){var t=[];e.data.map(function(n){var a={empId:n.jobNumber,empName:n.saleman,empCode:n.empCode,storeCount:n.storeCount,geoponicsCount:n.ploughingGoals,prebuildCount:n.presetGoals,beginTime:n.startDate,endTime:n.endDate,createTime:e.value.creationTime,createEmp:e.value.creater};t.push(a)}),e.$util.ajax({method:"post",url:e.$util.apiConfig.promotionManage.warProgramme.terminalManagement.storeStandardTarget,data:t}).then(function(t){1==t.data.success?e.$Message.info("保存成功！"):e.$Message.info("保存失败！")}).catch(function(e){console.log("失败信息：",e)})}}))},cancel:function(){this.$router.push({name:"standardization-task"})},remove:function(e){var t=this;this.$Modal.confirm({title:"提示",content:"<p>确定删除吗？</p>",onOk:function(){t.data.splice(e,1),t.$Message.info("删除成功！")}})},loadEmployeeList:function(e){var t=this,n="number"==typeof e?e:1;t.employeeQuery.currentPage=n;var a={currentPage:n,empName:t.employeeQuery.empName,storeCode:t.employeeQuery.storeCode};t.loading=!0,this.$util.ajax({method:"post",url:t.$util.apiConfig.traderManage.orderManage.queryEmpUrl,data:r.default.stringify(a)}).then(function(e){if(200===e.status){var n=e.data.dto;e.data.page.records.forEach(function(e,t){e.storeCount=n[t].storeCount}),t.renderEmployeeTable(e.data.page)}else console.log("失败状态码：",e.status)}).catch(function(e){console.log("失败信息：",e)})},renderEmployeeTable:function(e){var t=this;t.employeeTotalCount=e.totalCount,t.thisTableDataEmployeeModal=[],e.records.forEach(function(e){var n={sortIndex:e.id,orderIndex:e.id,checkMark:!1,employeeId:e.empId,employeeName:e.empName,empCode:e.empCode,shopAmount:e.storeCount};t.thisTableDataEmployeeModal.push(n)}),t.loading=!1},employeeModalShow:function(){this.modal1=!0,this.loadEmployeeList()}},components:{tableGlobal:s.default},created:function(){this.init(),this.getData()}}},2272:function(e,t,n){var a=n(2273);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(43)("37b3fd9d",a,!1,{})},2273:function(e,t,n){t=e.exports=n(42)(!1),t.push([e.i,"\n.width-100 {\n  width: 100%;\n}\n.lb-left {\n  float: left;\n}\n.lb-right {\n  float: right;\n}\n.lb-center {\n  text-align: center;\n}\n.lb-promotion-main {\n  height: auto;\n  background-color: #fff;\n}\n.lb-promotion-main .lb-promotion-search {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row {\n  margin-bottom: 14px;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row .ListName {\n  text-align: right;\n  line-height: 32px;\n  color: #747474;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.promotion-page {\n  margin: 1rem 0 0 0;\n}\n.container {\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  padding: 1% 1% 3%;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-12 {\n  margin-bottom: 12px;\n}\n.margin-bottom-14 {\n  margin-bottom: 14px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.mb--12 {\n  margin-bottom: 12px;\n}\n.mb--14 {\n  margin-bottom: 14px;\n}\n.border-b--dashed {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.pd--20 {\n  padding: 20px;\n}\n.ml--50 {\n  margin-left: 50px;\n}\n.fr {\n  float: right;\n}\n.fl {\n  float: left;\n}\n.bg--white {\n  background: #fff;\n}\n.clearfix:after {\n  content: '';\n  display: block;\n  height: 0;\n  clear: both;\n}\n.text-center {\n  text-align: center;\n}\n.white {\n  background-color: white;\n}\n.select_box {\n  padding: 20px;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.ling_height {\n  padding-top: 15px;\n}\n.text_align_right {\n  text-align: right;\n}\n.text_align_center {\n  text-align: center;\n}\n.operation_box {\n  padding: 10px 20px;\n  text-align: right;\n}\n.page_right {\n  text-align: right;\n  padding: 10px 20px;\n}\n.input_width {\n  width: 120px;\n}\n.search_btn {\n  width: 100px;\n}\n.margin_bottom_0 {\n  margin-bottom: 0;\n}\n.ivu-breadcrumb a {\n  color: #999;\n}\n.ivu-breadcrumb {\n  font-size: 12px;\n}\n.ivu-breadcrumb > span:last-child {\n  color: #426196;\n}\n.box_shadow {\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-color: #eee;\n}\n.border_bottom_dashed {\n  border-bottom: 1px dashed #E8E8E8;\n}\n.problem_table .ivu-checkbox-wrapper {\n  margin-right: 0px;\n}\n.standardization-task-new {\n  width: 100%;\n  height: 100%;\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  text-align: center;\n  padding: 10px 0;\n}\n.standardization-task-new .head {\n  padding-top: 20px;\n}\n.standardization-task-new .head .head_left {\n  padding: 10px 0;\n}\n.standardization-task-new .head .head_left #jobNumber {\n  width: 50%;\n}\n.standardization-task-new .head .head_left #saleman {\n  width: 50%;\n}\n.standardization-task-new .head .head_left .date {\n  width: 50%;\n}\n.standardization-task-new .table {\n  margin: 1%;\n}\n.standardization-task-new .page {\n  text-align: right;\n  margin-right: 1%;\n}\n.ivu-modal-header {\n  background: #05a1e9;\n  border-radius: 5px;\n}\n.ivu-modal-header-inner {\n  color: #fff;\n}\n.ivu-modal-close .ivu-icon-ios-close-empty {\n  color: #fff;\n}\n.modal-popup {\n  height: 400px;\n  overflow: auto;\n}\n.modal-popup .text-center {\n  text-align: center;\n}\n.modal-popup .button-search {\n  margin-top: 20px;\n  margin-bottom: 20px;\n  text-align: right;\n  padding-right: 10px;\n}\n.modal-popup .page-bar {\n  padding: 10px 0;\n  overflow: hidden;\n}\n.modal-popup .fr {\n  float: right;\n}\n.modal-popup .ivu-table-row-highlight td {\n  background: #bfd4e3!important;\n}\n.modal-popup .ivu-table-row-hover td {\n  background: #bfd4e3!important;\n}\n",""])},2274:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"standardization-task-new"},[n("Row",{staticClass:"head"},[n("Row",{staticClass:"task"},[n("Col",{staticStyle:{"font-weight":"600"},attrs:{span:"2"}},[e._v("指定执行人")])],1),e._v(" "),n("Col",{staticClass:"head_left",attrs:{span:"21"}},[n("Row",[n("Col",{attrs:{span:"6"}},[n("label",{attrs:{for:"saleman"}},[e._v("业务员 :  ")]),n("Input",{attrs:{id:"saleman"},model:{value:e.value.saleman,callback:function(t){e.$set(e.value,"saleman",t)},expression:"value.saleman"}}),e._v(" "),n("Button",{on:{click:e.employeeModalShow}},[e._v("选择")]),e._v(" "),n("Modal",{attrs:{title:"选择业务员",okText:"确定",cancelText:"取消",width:"800","mask-closable":!1,styles:{top:"20px"}},on:{"on-ok":e.ok},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[n("div",{staticClass:"modal-popup"},[n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"3"}},[n("div",{staticClass:"text-center"},[e._v("\n                                        业务员名称：\n                                    ")])]),e._v(" "),n("Col",{attrs:{span:"6"}},[n("div",{staticClass:"input-text"},[n("Input",{model:{value:e.employeeQuery.empName,callback:function(t){e.$set(e.employeeQuery,"empName",t)},expression:"employeeQuery.empName"}})],1)]),e._v(" "),n("Col",{attrs:{span:"3"}}),e._v(" "),n("Col",{attrs:{span:"6"}}),e._v(" "),n("Col",{attrs:{span:"6"}},[n("div",{staticClass:"button-search"},[n("Button",{on:{click:e.loadEmployeeList}},[e._v("查询")])],1)])],1),e._v(" "),n("Row",[n("Col",{attrs:{span:"24"}},[n("table-global",{attrs:{columnsList:e.columnsListEmployeeModal,tableData:e.thisTableDataEmployeeModal,loading:e.loading},on:{checkRow:e.selections}})],1)],1),e._v(" "),n("div",{staticClass:"page-bar"},[n("Page",{staticClass:"fr",attrs:{total:e.employeeTotalCount,current:e.employeeQuery.currentPage,"show-total":"","show-elevator":""},on:{"on-change":e.loadEmployeeList}})],1)],1)])],1),e._v(" "),n("Col",{attrs:{span:"6"}},[e._v("\n                    创建人 ： "+e._s(e.value.creater)+"\n                ")]),e._v(" "),n("Col",{attrs:{span:"6"}},[e._v("\n                    创建时间 ： "+e._s(e.value.creationTime)+"\n                ")])],1)],1)],1),e._v(" "),n("Row"),e._v(" "),n("Table",{staticClass:"table",attrs:{columns:e.columns,data:e.data}}),e._v(" "),n("Button",{staticStyle:{"margin-right":"30px"},on:{click:e.cancel}},[e._v("取消")]),n("Button",{on:{click:e.Confirm}},[e._v("确定")])],1)},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};t.default=i},607:function(e,t,n){"use strict";function a(e){d||n(1107)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1011),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var l=n(1109),s=n.n(l),d=!1,p=n(13),c=a,u=p(i.a,s.a,!1,c,null,null);u.options.__file="src/views/tables/components/tableGlobal.vue",t.default=u.exports},786:function(e,t,n){"use strict";function a(e){d||n(2272)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1669),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var l=n(2274),s=n.n(l),d=!1,p=n(13),c=a,u=p(i.a,s.a,!1,c,null,null);u.options.__file="src/views/promotion-manage/war-programme/terminal-management/configuration-task/standardization-task/standardization-task-new/standardization-task-new.vue",t.default=u.exports}});