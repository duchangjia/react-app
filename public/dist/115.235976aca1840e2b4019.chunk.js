webpackJsonp([115,213],{1642:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(101),i=r(n),o=a(239),s=r(o),l=a(601),u=r(l);e.default={name:"groupBuy-list",components:{orderTable:u.default},data:function(){var t=this;return{brandName:"",cname:"",queryArray:{beginDate:"",brandId:"",brandName:"",cid:"",classfiy:"",cname:"",endDate:"",status:"",title:"",type:""},itemCategoryArray:[],itemCategory21Array:[],categoryArray:[],statusList:[{label:"全部",value:""},{label:"已发布",value:"1"},{label:"已下架",value:"2"},{label:"已失效",value:"3"}],classfiyList:[{value:"",label:"全部"},{value:"1",label:"一帮卖"},{value:"2",label:"二帮卖"},{value:"3",label:"三帮卖"}],typeList:[{value:"",label:"全部"},{value:"1",label:"买赠"},{value:"2",label:"返利"},{value:"3",label:"特价"},{value:"4",label:"纯费用"},{value:"5",label:"秒杀"},{value:"6",label:"众筹"},{value:"7",label:"其他促销"},{value:"10",label:"组合"}],tableRef:"",loading:!1,columnsList:[{title:"序号",type:"index",align:"center"},{title:"政策编号",key:"code",width:125,align:"center"},{title:"指定品牌",key:"brandName",align:"center",render:function(t,e){var a=e.row.brandName;if(a){var r=a.split(",");return r.length>2?t("div",{},r[0]+","+r[1]+"..."):t("div",{},r.join(","))}return t("div",{},a)}},{title:"指定品类",key:"cname",align:"center",render:function(t,e){var a=e.row.cname;if(a){var r=a.split(",");return r.length>2?t("div",{},r[0]+","+r[1]+"..."):t("div",{},r.join(","))}return t("div",{},a)}},{title:"分类",key:"classfiy",align:"center",render:function(e,a){if(a.row.classfiy)return e("div",t.classfiyList[a.row.classfiy].label)}},{title:"类型",key:"type",align:"center",render:function(e,a){if(a.row.type<=10&&a.row.type){var r=10==a.row.type?8:a.row.type;return e("div",t.typeList[r].label)}}},{title:"政策名称",key:"title",align:"center"},{title:"开始时间",key:"beginDate",width:110,align:"center",render:function(e,a){return e("div",{},t.timestampToTime(a.row.beginDate))}},{title:"结束时间",key:"endDate",width:110,align:"center",render:function(e,a){return e("div",{},t.timestampToTime(a.row.endDate))}},{title:"状态",key:"status",align:"center",width:110,render:function(t,e){var a="已发布",r=e.row.status;return 2==r&&(a="已下架"),3==r&&(a="已失效"),t("span",{},a)}},{title:"操作",key:"handel",width:180,align:"center",render:function(e,a){var r="",n=a.row.promotionCode;1==a.row.status?r="下架":2==a.row.status&&(r="发布");var i=[],o=e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({path:"otherPromotion-add",query:{id:a.row.id,editPage:t.queryArray.page}})}}},"编辑"),s=e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handelStatus(a.row.id,a.row.status)}}},r),l=e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({path:"otherPromotion-detail",query:{id:a.row.id,editPage:t.queryArray.page}})}}},"查看");return 3==a.row.status?i.push(l):n?i.push(l):i.push(o,s,l),e("div",i)}}],thisTableData:[],totalCount:0,current:1,createDateOptions:{disabledDate:function(e){return e&&e.valueOf()+864e5-1<new Date(t.queryArray.beginDate)}}}},methods:{getOption:function(t){if(console.log(t),t){this.queryArray.brandId=t.value,this.brandName=t.label,this.queryArray.cid="",this.categoryArray=[];for(var e in this.itemCategory21Array)t.value==this.itemCategory21Array[e].parentCid&&this.categoryArray.push(this.itemCategory21Array[e]);this.queryArray.cname=""}else this.queryArray.brandId="",this.brandName="",this.queryArray.cid="",this.queryArray.itemCategory11Id="",this.queryArray.itemCategory21Id="",this.queryArray.cname="",this.categoryArray=[]},getOption1:function(t){t?(this.queryArray.cid=t.value,this.cname=t.label):(this.queryArray.cid="",this.cname="")},itemCategoryList:function(){var t=this;this.$util.ajax({method:"post",url:t.$util.apiConfig.promotionManage.warProgramme.category,data:""}).then(function(e){t.itemCategoryArray=e.data.itemCategory11List,t.itemCategory21Array=e.data.itemCategory21List}).catch(function(t){console.log("失败信息：",t)})},query:function(t){var e=this;e.loading=!0,this.current=t,this.queryArray.page=t;var a=(0,i.default)({},this.queryArray);a.brandName=this.brandName,a.cname=this.cname,console.log(this.queryArray),this.$util.ajax({method:"post",url:e.$util.apiConfig.promotionManage.warProgramme.otherPromotion.listUrl,data:s.default.stringify(a)}).then(function(t){if(e.loading=!1,"200"==t.data.code){e.thisTableData=[],""==t.data.result.pager.records&&(t.data.result.pager.records=[]);var a=t.data.result.pager.records;e.thisTableData=a,e.totalCount=t.data.result.pager.totalCount}else e.$Modal.error({title:"提示",content:t.data.message})}).catch(function(t){e.loading=!1,console.log(t)})},startTime:function(t){new Date(t);this.queryArray.beginDate=t},endTime:function(t){new Date(t);this.queryArray.endDate=t},newPage:function(){this.$router.push({path:"otherPromotion-add",query:{isFromCreate:"1"}})},timestampToTime:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},handelStatus:function(t,e){var a=this,r="";2==e?r=a.$util.apiConfig.promotionManage.warProgramme.otherPromotion.changeStatus:1==e&&(r=a.$util.apiConfig.promotionManage.warProgramme.otherPromotion.changeStatus1),this.$util.ajax({method:"post",url:r,data:s.default.stringify({id:t,status:e})}).then(function(t){a.query(a.current),a.$Modal.success({title:"提示",content:"修改成功"})}).catch(function(t){console.log("失败信息：",t)})},createSTimeChangeHandle:function(t){this.queryArray.beginDate=t,this.queryArray.beginDate>this.queryArray.endDate&&(this.queryArray.endDate="")},createETimeChangeHandle:function(t){this.queryArray.endDate=t},reset:function(){this.queryArray=(0,i.default)(this.queryArray,{beginDate:"",brandId:"",brandName:"",cid:"",classfiy:"",cname:"",endDate:"",status:"",title:"",type:""}),this.query(1)}},mounted:function(){var t=this.$route.query.editPage;t?this.query(t):this.query(1),this.itemCategoryList()},beforeRouteEnter:function(t,e,a){a(function(t){"otherPromotion-add"==e.name&&t.$route.query.isFromCreate&&t.reset()})},beforeRouteLeave:function(t,e,a){(this.$util.cache.fromArr.includes(t.name)&&this.$util.cache.fromArr.includes(e.name)||!this.$util.cache.toArr.includes(t.name)&&this.$util.cache.fromArr.includes(e.name))&&(this.queryArray=(0,i.default)(this.queryArray,{beginDate:"",brandId:"",brandName:"",cid:"",classfiy:"",cname:"",endDate:"",status:"",title:"",type:""}),this.query(1)),a()}}},2191:function(t,e,a){var r=a(2192);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(43)("25b0c4d7",r,!1,{})},2192:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\n.ListName[data-v-47ac4991]{\n    text-align: right;\n    line-height: 32px;\n    color: #747474;\n    font-size: 12px;\n    margin-right:8px;\n}\n",""])},2193:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"auto",background:"#fff"}},[a("div",{staticStyle:{padding:"20px 20px 0","border-bottom":"1px dashed #e5e5e5"}},[a("row",{staticStyle:{"margin-bottom":"14px"}},[a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("指定品牌 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("Select",{staticStyle:{width:"100%"},attrs:{clearable:"","label-in-value":!0},on:{"on-change":t.getOption,"on-clear":t.getOption},model:{value:t.queryArray.brandName,callback:function(e){t.$set(t.queryArray,"brandName",e)},expression:"queryArray.brandName"}},t._l(t.itemCategoryArray,function(e){return a("Option",{key:e.cid,attrs:{value:e.cid}},[t._v(t._s(e.cName))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("指定品类 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("Select",{staticStyle:{width:"100%"},attrs:{clearable:"","label-in-value":!0},on:{"on-change":t.getOption1},model:{value:t.queryArray.cname,callback:function(e){t.$set(t.queryArray,"cname",e)},expression:"queryArray.cname"}},t._l(t.categoryArray,function(e){return a("Option",{key:e.cid,attrs:{value:e.cid}},[t._v(t._s(e.cName))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("政策名称 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("Input",{attrs:{clearable:""},model:{value:t.queryArray.title,callback:function(e){t.$set(t.queryArray,"title",e)},expression:"queryArray.title"}})],1)],1)],1),t._v(" "),a("row",{staticStyle:{"margin-bottom":"14px"}},[a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("分类 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.queryArray.classfiy,callback:function(e){t.$set(t.queryArray,"classfiy",e)},expression:"queryArray.classfiy"}},t._l(t.classfiyList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("类型 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("Select",{attrs:{clearable:"",placeholder:"全部"},model:{value:t.queryArray.type,callback:function(e){t.$set(t.queryArray,"type",e)},expression:"queryArray.type"}},t._l(t.typeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("状态 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("Select",{attrs:{placeholder:"全部",clearable:""},model:{value:t.queryArray.status,callback:function(e){t.$set(t.queryArray,"status",e)},expression:"queryArray.status"}},t._l(t.statusList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)],1),t._v(" "),a("row",{staticStyle:{"margin-bottom":"14px"}},[a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("开始时间 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("DatePicker",{attrs:{type:"date",value:t.queryArray.beginDate,placeholder:"请选择时间"},on:{"on-change":t.createSTimeChangeHandle}})],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("结束时间 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("DatePicker",{attrs:{type:"date",value:t.queryArray.endDate,options:t.createDateOptions,placeholder:"请选择时间"},on:{"on-change":t.createETimeChangeHandle}})],1)],1)],1),t._v(" "),a("row",{staticStyle:{"margin-bottom":"12px"}},[a("Col",{attrs:{span:"24"}},[a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.query(1)}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("row",{staticStyle:{padding:"20px"}},[a("row",{staticStyle:{"margin-bottom":"12px"}},[a("Col",{attrs:{span:"24"}},[a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.newPage}},[t._v("新建")])],1)],1),t._v(" "),a("order-table",{attrs:{refs:t.tableRef,columnsList:t.columnsList,thisTableData:t.thisTableData,loading:t.loading}})],1),t._v(" "),a("div",{staticStyle:{padding:"20px",overflow:"hidden"}},[a("Page",{staticStyle:{float:"right"},attrs:{total:t.totalCount,"page-size":10,current:t.current,"show-total":"","show-elevator":""},on:{"on-change":t.query}})],1)],1)},n=[];r._withStripped=!0;var i={render:r,staticRenderFns:n};e.default=i},601:function(t,e,a){"use strict";function r(t){u||a(900)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(891),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);var s=a(902),l=a.n(s),u=!1,c=a(13),d=r,y=c(i.a,l.a,!1,d,null,null);y.options.__file="src/views/tables/components/orderTable.vue",e.default=y.exports},759:function(t,e,a){"use strict";function r(t){u||a(2191)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1642),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);var s=a(2193),l=a.n(s),u=!1,c=a(13),d=r,y=c(i.a,l.a,!1,d,"data-v-47ac4991",null);y.options.__file="src/views/promotion-manage/war-programme/other-promotion/otherPromotion-list.vue",e.default=y.exports},891:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"orderTable",props:{columnsList:Array,thisTableData:Array,getHeight:Number,loading:{type:Boolean,default:!0}},data:function(){return{}},created:function(){this.init()},methods:{init:function(){var t=this;this.columnsList.forEach(function(e){"address1"==e.key&&(e.render=function(e,a){return e("Row",{props:{type:"flex",align:"middle",justify:"center"}},[e("Col",{props:{span:"22"}},a.row.name),e("Col",{props:{span:"2"}},[e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.$emit("showLayer","true")}}})])])})})},a:function(t){this.$emit("listenCheckbox",t)}},watch:{}}},900:function(t,e,a){var r=a(901);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a(43)("296919d0",r,!1,{})},901:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\n.show-edit-btn {\n  display: none;\n  margin-left: -10px;\n}\n.ivu-table-cell:hover .show-edit-btn {\n  display: inline-block;\n}\n",""])},902:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Table",{attrs:{height:t.getHeight,columns:t.columnsList,data:t.thisTableData,stripe:"",border:"",loading:t.loading},on:{"on-selection-change":t.a}})],1)},n=[];r._withStripped=!0;var i={render:r,staticRenderFns:n};e.default=i}});