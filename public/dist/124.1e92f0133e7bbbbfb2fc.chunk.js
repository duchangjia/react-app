webpackJsonp([124,213],{1609:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(239),i=n(o),r=a(601),s=n(r);e.default={name:"groupBuy-list",components:{orderTable:s.default},data:function(){var t=this;return{beginDate:"",endDate:"",promotionCode:"",status:"",title:"",cur_page:1,cityList:[{value:"",label:"请选择"},{value:"0",label:"未执行"},{value:"1",label:"未生效"},{value:"2",label:"生效中"},{value:"3",label:"已失效"},{value:"4",label:"已下架"},{value:"8",label:"已关闭"}],loading:!1,tableRef:"",columnsList:[{title:"序号",type:"index",width:62,align:"center"},{title:"促销编码",key:"promotionCode",align:"center"},{title:"促销名称",key:"title",align:"center"},{title:"促销类型",key:"type",align:"center",render:function(t,e){return t("div",{},"返利")}},{title:"开始时间",key:"beginDate",align:"center",width:155,render:function(e,a){return e("div",{},t.timestampToTime(a.row.beginDate))}},{title:"结束时间",key:"endDate",width:155,align:"center",render:function(e,a){return e("div",{},t.timestampToTime(a.row.endDate))}},{title:"促销状态",key:"status",align:"center",render:function(t,e){var a="";return 0==e.row.status?a="未执行":1==e.row.status?a="未生效":2==e.row.status?a="生效中":3==e.row.status?a="已失效":4==e.row.status?a="已下架":7==e.row.status?a="已下架":8==e.row.status&&(a="已关闭"),t("div",a)}},{title:"操作",key:"handel",width:180,align:"center",render:function(e,a){var n=[e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({path:"groupRebate-detail",query:{id:a.row.id}})}}},"查看")],o="";return 4==a.row.status?o="上架":2==a.row.status&&(o="下架"),4!=a.row.status&&2!=a.row.status||n.unshift(e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){2==a.row.status?t.changeType="下架":4==a.row.status&&(t.changeType="上架"),t.currentId=a.row.id,t.getStatus=a.row.status,t.MoadlShow(a.row.status)}}},o)),0!=a.row.status&&1!=a.row.status||(console.log("1"),n.unshift(e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){sessionStorage.removeItem("params"),t.$router.push({path:"groupRebate-edit",query:{id:a.row.id,editPage:t.cur_page}})}}},"编辑"))),e("div",n)}}],thisTableData:[],totalCount:0,current:1,changeModal:!1,changeType:"",currentId:"",getStatus:""}},methods:{query:function(t){var e=this;e.loading=!0,e.cur_page=t;var a={page:t,beginDate:this.beginDate,endDate:this.endDate,promotionCode:this.promotionCode,status:this.status,title:this.title};this.$util.ajax({method:"post",url:e.$util.apiConfig.promotionManage.warDeploy.groupRebate.listUrl,data:i.default.stringify(a)}).then(function(t){if(e.loading=!1,""!=t.data.result){var a=t.data.result.pager.records;e.thisTableData=[],e.thisTableData=a,e.totalCount=t.data.result.pager.totalCount}}).catch(function(t){e.loading=!1,console.log(t)})},startTime:function(t){this.beginDate=t},endTime:function(t){this.endDate=t},newPage:function(){this.$router.push({path:"rebatePromotion-edit"})},MoadlShow:function(t){if(4==t)return void this.checkId();this.changeModal=!0},checkId:function(){var t=this;this.$util.ajax({method:"post",url:t.$util.apiConfig.promotionManage.warProgramme.checkGoodsList,data:{promotionInfoDTO:{id:t.currentId}}}).then(function(e){200==e.data.code?t.changeModal=!0:t.$Modal.error({title:"提示",content:e.data.message})}).catch(function(t){console.log("失败信息：",t)})},handelStatus:function(t,e){var a=this,n="";4==a.getStatus&&(n=2),2==a.getStatus&&(n=4),this.$util.ajax({method:"post",url:a.$util.apiConfig.promotionManage.warProgramme.updatePromotionStatus,data:i.default.stringify({id:a.currentId,status:n})}).then(function(t){200==t.data.code?(a.query(a.current),a.$Modal.success({title:"提示",content:"修改成功"})):a.$Modal.error({title:"提示",content:""|t.data.message})}).catch(function(t){console.log("失败信息：",t)})},timestampToTime:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}},mounted:function(){this.query(1)},beforeRouteEnter:function(t,e,a){a(function(t){if("groupRebate-detail"==e.name){var a=t.$route.query.editPage?t.$route.query.editPage:1;t.query(a)}})},beforeRouteLeave:function(t,e,a){(this.$util.cache.fromArr.includes(t.name)&&this.$util.cache.fromArr.includes(e.name)||!this.$util.cache.toArr.includes(t.name)&&this.$util.cache.fromArr.includes(e.name))&&(this.current=1,this.beginDate="",this.endDate="",this.promotionCode="",this.status="",this.title="",this.$refs.groupRebatePager.currentPage=1,this.query(1)),a()}}},2084:function(t,e,a){var n=a(2085);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(43)("570e31cb",n,!1,{})},2085:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\n.ListName[data-v-955a634c]{\n    text-align: right;\n    line-height: 32px;\n    color: #747474;\n    font-size: 12px;\n    margin-right:8px;\n}\n",""])},2086:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"auto",background:"#fff"}},[a("Row",{staticStyle:{padding:"20px","border-bottom":"1px dashed #e5e5e5"}},[a("row",{staticStyle:{"margin-bottom":"14px"}},[a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("促销编码 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("Input",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.promotionCode,callback:function(e){t.promotionCode=e},expression:"promotionCode"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("促销名称 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("Input",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("促销状态 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("Select",{staticStyle:{width:"100%"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.cityList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)],1),t._v(" "),a("row",{staticStyle:{"margin-bottom":"14px"}},[a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("开始时间 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",clearable:""},on:{"on-change":t.startTime}})],1)],1),t._v(" "),a("Col",{attrs:{span:"7"}},[a("Col",{staticClass:"ListName",attrs:{span:"8"}},[t._v("结束时间 :")]),t._v(" "),a("Col",{attrs:{span:"15"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss",clearable:""},on:{"on-change":t.endTime}})],1)],1)],1),t._v(" "),a("row",{staticStyle:{"margin-bottom":"12px"}},[a("Col",{attrs:{span:"24"}},[a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.query(1)}}},[t._v("查询")])],1)],1)],1),t._v(" "),a("row",{staticStyle:{padding:"20px"}},[a("order-table",{attrs:{refs:t.tableRef,columnsList:t.columnsList,thisTableData:t.thisTableData,loading:t.loading}})],1),t._v(" "),a("div",{staticStyle:{padding:"20px",overflow:"hidden"}},[a("Page",{ref:"groupRebatePager",staticStyle:{float:"right"},attrs:{total:t.totalCount,current:t.current,"page-size":10,"show-total":"","show-elevator":""},on:{"on-change":t.query}})],1),t._v(" "),a("Modal",{attrs:{title:"提示"},on:{"on-ok":t.handelStatus},model:{value:t.changeModal,callback:function(e){t.changeModal=e},expression:"changeModal"}},[a("p",[t._v("您确定要"+t._s(t.changeType)+"吗？")])])],1)},o=[];n._withStripped=!0;var i={render:n,staticRenderFns:o};e.default=i},601:function(t,e,a){"use strict";function n(t){u||a(900)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(891),i=a.n(o);for(var r in o)"default"!==r&&function(t){a.d(e,t,function(){return o[t]})}(r);var s=a(902),l=a.n(s),u=!1,c=a(13),d=n,p=c(i.a,l.a,!1,d,null,null);p.options.__file="src/views/tables/components/orderTable.vue",e.default=p.exports},727:function(t,e,a){"use strict";function n(t){u||a(2084)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(1609),i=a.n(o);for(var r in o)"default"!==r&&function(t){a.d(e,t,function(){return o[t]})}(r);var s=a(2086),l=a.n(s),u=!1,c=a(13),d=n,p=c(i.a,l.a,!1,d,"data-v-955a634c",null);p.options.__file="src/views/promotion-manage/war-deploy/group-rebate/groupRebate-list.vue",e.default=p.exports},891:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"orderTable",props:{columnsList:Array,thisTableData:Array,getHeight:Number,loading:{type:Boolean,default:!0}},data:function(){return{}},created:function(){this.init()},methods:{init:function(){var t=this;this.columnsList.forEach(function(e){"address1"==e.key&&(e.render=function(e,a){return e("Row",{props:{type:"flex",align:"middle",justify:"center"}},[e("Col",{props:{span:"22"}},a.row.name),e("Col",{props:{span:"2"}},[e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.$emit("showLayer","true")}}})])])})})},a:function(t){this.$emit("listenCheckbox",t)}},watch:{}}},900:function(t,e,a){var n=a(901);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(43)("296919d0",n,!1,{})},901:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\n.show-edit-btn {\n  display: none;\n  margin-left: -10px;\n}\n.ivu-table-cell:hover .show-edit-btn {\n  display: inline-block;\n}\n",""])},902:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Table",{attrs:{height:t.getHeight,columns:t.columnsList,data:t.thisTableData,stripe:"",border:"",loading:t.loading},on:{"on-selection-change":t.a}})],1)},o=[];n._withStripped=!0;var i={render:n,staticRenderFns:o};e.default=i}});