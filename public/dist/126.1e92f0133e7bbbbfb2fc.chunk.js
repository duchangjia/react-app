webpackJsonp([126,213],{1605:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(65),r=n(i),o=a(239),s=n(o),l=a(601),u=n(l);e.default={name:"pureExpenses-list",components:{orderTable:u.default},data:function(){var t=this;return{queryArray:{beginDate:"",endDate:"",code:"",title:"",status:"",page:this.current,rows:"10"},tableRef:"",loading:!1,columnsList:[{title:"序号",type:"index",width:62,align:"center"},{title:"活动编号",key:"code",align:"center"},{title:"活动名称",key:"title",align:"center"},{title:"开始时间",key:"beginDate",width:155,align:"center",render:function(e,a){return e("div",{},t.timestampToTime(a.row.beginDate))}},{title:"结束时间",key:"endDate",width:155,align:"center",render:function(e,a){return e("div",{},t.timestampToTime(a.row.endDate))}},{title:"促销状态",key:"status",align:"center",render:function(e,a){var n=!1;for(var i in t.cityList)if(t.cityList[i].value==a.row.status)return n=!0,e("div",t.cityList[i].label);if(!n)return e("div","错误状态")}},{title:"创建人",key:"createUser",align:"center"},{title:"活动详情",key:"description",align:"center"},{title:"操作",key:"handel",width:180,align:"center",render:function(e,a){var n=[e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({path:"groupExpenses-detail",query:{id:a.row.id}})}}},"查看")],i="";return 1==a.row.status?(i="下架",n.unshift(e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handelStatus(a.row.id,1)}}},i))):7!=a.row.status&&8!=a.row.status&&6!=a.row.scopeType&&(i="上架",n.unshift(e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.handelStatus(a.row.id,2)}}},i))),2!=a.row.status&&6!=a.row.status||7==a.row.status&&8==a.row.status||n.unshift(e("Button",{props:{size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({path:"groupExpenses-edit",query:{id:a.row.id}})}}},"修改")),e("div",n)}}],thisTableData:[],cityList:[{label:"未生效",value:"0"},{label:"生效中",value:"1"},{label:"已下架",value:"2"},{label:"eoc已发布未生效",value:"5"},{label:"eoc已上架",value:"6"},{label:"eoc已下架",value:"7"},{label:"已关闭",value:"8"}],totalCount:0}},methods:{query:function(t){var e=this;this.current=t,this.queryArray.page=t,this.$util.ajax({method:"post",url:e.$util.apiConfig.promotionManage.warDeploy.groupExpenses.listUrl+"?"+s.default.stringify(this.queryArray),data:""}).then(function(t){console.log((0,r.default)(t)),e.thisTableData=[];var a=t.data.result.pager.records;if(""!=t.data.result.pager.records){for(var n in a)e.thisTableData.push(a[n].costPromotionInfoDTO);e.totalCount=t.data.result.pager.totalCount}}).catch(function(t){console.log(t)})},startTime:function(t){new Date(t);this.queryArray.beginDate=""!=t?t+" 00:00:00":""},endTime:function(t){new Date(t);this.queryArray.endDate=""!=t?t+" 00:00:00":""},timestampToTime:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},handelStatus:function(t,e){var a=this,n="";2==e?n=a.$util.apiConfig.promotionManage.warDeploy.groupExpenses.putup:1==e&&(n=a.$util.apiConfig.promotionManage.warDeploy.groupExpenses.putdown),this.$util.ajax({method:"get",url:n+"?id="+t,data:""}).then(function(t){200==t.data.code?(a.query(1),a.$Modal.success({title:"提示",content:"修改成功"})):a.$Modal.error({title:"提示",content:t.data.message})}).catch(function(t){console.log("失败信息：",t)})}},mounted:function(){this.query(1)}}},2072:function(t,e,a){var n=a(2073);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(43)("3873b663",n,!1,{})},2073:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\n.ListName[data-v-15368cac]{\n    text-align: right;\n    line-height: 32px;\n    color: #747474;\n    font-size: 12px;\n}\n",""])},2074:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"auto",background:"#fff"}},[a("Row",{staticStyle:{padding:"30px 15px 15px","border-bottom":"1px dashed #e5e5e5"}},[a("Col",{attrs:{span:"5"}},[a("Col",{staticClass:"ListName",attrs:{span:"8",pull:"1"}},[t._v("活动编码:")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{clearable:""},model:{value:t.queryArray.code,callback:function(e){t.$set(t.queryArray,"code",e)},expression:"queryArray.code"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("Col",{staticClass:"ListName",attrs:{span:"8",pull:"1"}},[t._v("活动名称:")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("Input",{attrs:{clearable:""},model:{value:t.queryArray.title,callback:function(e){t.$set(t.queryArray,"title",e)},expression:"queryArray.title"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("Col",{staticClass:"ListName",attrs:{span:"8",pull:"1"}},[t._v("开始时间:")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("DatePicker",{attrs:{type:"date"},on:{"on-change":t.startTime}})],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("Col",{staticClass:"ListName",attrs:{span:"8",pull:"1"}},[t._v("结束时间:")]),t._v(" "),a("Col",{attrs:{span:"16"}},[a("DatePicker",{attrs:{type:"date"},on:{"on-change":t.endTime}})],1)],1),t._v(" "),a("Col",{staticStyle:{"padding-right":"20"},attrs:{span:"4"}},[a("Button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:function(e){t.query(1)}}},[t._v("查询")])],1)],1),t._v(" "),a("row",{staticStyle:{padding:"20px"}},[a("p",{staticClass:"ivu-card-head",staticStyle:{color:"#747474","font-weight":"bold"}},[t._v("订单详情")]),t._v(" "),a("order-table",{attrs:{refs:t.tableRef,columnsList:t.columnsList,thisTableData:t.thisTableData,loading:t.loading}})],1),t._v(" "),a("div",{staticStyle:{padding:"10px 0",overflow:"hidden"}},[a("Page",{staticStyle:{float:"right"},attrs:{total:t.totalCount,"page-size":10,"show-total":"","show-elevator":""},on:{"on-change":t.query}})],1)],1)},i=[];n._withStripped=!0;var r={render:n,staticRenderFns:i};e.default=r},601:function(t,e,a){"use strict";function n(t){u||a(900)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(891),r=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);var s=a(902),l=a.n(s),u=!1,c=a(13),d=n,p=c(r.a,l.a,!1,d,null,null);p.options.__file="src/views/tables/components/orderTable.vue",e.default=p.exports},723:function(t,e,a){"use strict";function n(t){u||a(2072)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(1605),r=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);var s=a(2074),l=a.n(s),u=!1,c=a(13),d=n,p=c(r.a,l.a,!1,d,"data-v-15368cac",null);p.options.__file="src/views/promotion-manage/war-deploy/group-expenses/groupExpenses-list.vue",e.default=p.exports},891:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"orderTable",props:{columnsList:Array,thisTableData:Array,getHeight:Number,loading:{type:Boolean,default:!0}},data:function(){return{}},created:function(){this.init()},methods:{init:function(){var t=this;this.columnsList.forEach(function(e){"address1"==e.key&&(e.render=function(e,a){return e("Row",{props:{type:"flex",align:"middle",justify:"center"}},[e("Col",{props:{span:"22"}},a.row.name),e("Col",{props:{span:"2"}},[e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.$emit("showLayer","true")}}})])])})})},a:function(t){this.$emit("listenCheckbox",t)}},watch:{}}},900:function(t,e,a){var n=a(901);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(43)("296919d0",n,!1,{})},901:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\n.show-edit-btn {\n  display: none;\n  margin-left: -10px;\n}\n.ivu-table-cell:hover .show-edit-btn {\n  display: inline-block;\n}\n",""])},902:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Table",{attrs:{height:t.getHeight,columns:t.columnsList,data:t.thisTableData,stripe:"",border:"",loading:t.loading},on:{"on-selection-change":t.a}})],1)},i=[];n._withStripped=!0;var r={render:n,staticRenderFns:i};e.default=r}});