webpackJsonp([136,259],{1009:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"BreadCrumb",props:{Breadcrumb:{type:Object}},data:function(){return{list:[]}},mounted:function(){},filters:{statePague:function(e,t){return e===t?"进行中":e<t?"待开始":"已完成"}},methods:{generType:function(e){var t=this;this.list=[],"0"===e?this.$nextTick(function(){t.list=["新建代金券","使用规则"]}):"1"===e?this.$nextTick(function(){t.list=["新建代金券","定向规划","发放规则","发放细则","使用规则"]}):this.$nextTick(function(){t.list=["新建代金券","定向规划","使用规则"]})}}}},1101:function(e,t,o){var n=o(1102);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(43)("492815ce",n,!1,{})},1102:function(e,t,o){t=e.exports=o(42)(!1),t.push([e.i,"\n.demo-breadcrumb-separator {\n  color: #ff5500;\n  padding: 0 5px;\n}\n",""])},1103:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"white select_box"},[o("Steps",{attrs:{current:e.Breadcrumb.current}},e._l(e.list,function(t,n){return o("Step",{key:t,attrs:{title:e._f("statePague")(e.Breadcrumb.current,n),content:t}})}))],1)},i=[];n._withStripped=!0;var a={render:n,staticRenderFns:i};t.default=a},1568:function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=o(65),a=n(i),r=o(605),s=n(r);t.default={name:"o2oReportCouponRegulations",data:function(){return{Breadcrumb:{current:3},formValidate:{number:"",DenominationVal:"",DenominationProportion:"",Denomination:"",DenominationArray:[{code:"1",text:"固定金额"},{code:"2",text:"订单金额比例"}]},ruleValidate:{number:[{required:!0,pattern:/^([1-9][0-9]*){1,3}$/,message:"不能为空并且为正整数",trigger:"blur"}],DenominationVal:[{required:!0,pattern:/^(([1-9]\d{0,3})|0)(\.\d{0,2})?$/,message:"面额不能为空且为数字正数",trigger:"blur"}],DenominationProportion:[{required:!0,pattern:/^\d\.([1-9]{1,2}|[0-9][1-9])$|^[1-9]\d{0,1}(\.\d{1,2}){0,1}$|^100(\.0{1,2}){0,1}$/,message:"百分比只能是小于等于100正数",trigger:"blur"}]}}},components:{BreadCrumb:s.default},mounted:function(){this.getModify()},methods:{goPrevPage:function(){this.$router.back(-1)},DenominationChange:function(){this.$refs.formValidate.fields.forEach(function(e){"DenominationVal"!==e.prop&&"DenominationProportion"!==e.prop||e.resetField()})},getModify:function(){var e=JSON.parse(window.localStorage.getItem("paramsCreateVoucher"));if(this.formValidate.Denomination="固定金额",!e)return this.$router.push({path:"o2o-report-coupon-create"}),!1;if(this.$refs.Breadcrumb.generType(e.generationType),this.$route.query.type&&e.voucherIssueDetailList.length<1){var t=JSON.parse(window.localStorage.getItem("voucherDetail"));return t.voucherIssueDetailList?this.differentStates(t):this.chooseRemove(),!1}this.chooseRemove(),this.differentStates(e)},chooseRemove:function(){this.formValidate.Denomination="1",this.formValidate.DenominationVal=null,this.formValidate.DenominationProportion=null,this.formValidate.number=null},differentStates:function(e){if(0===e.voucherIssueDetailList.length)return!1;this.formValidate.Denomination=e.voucherIssueDetailList[0].priceType.toString(),"1"===this.formValidate.Denomination?this.formValidate.DenominationVal=e.voucherIssueDetailList[0].voucherPrice:this.formValidate.DenominationProportion=100*e.voucherIssueDetailList[0].voucherPrice,this.formValidate.number=e.voucherIssueDetailList[0].issueNum},linkCreate:function(){var e=this;this.$refs.formValidate.validate(function(t){if(t){var o=JSON.parse(window.localStorage.getItem("paramsCreateVoucher"));if(o.voucherIssueDetailList=[{priceType:e.formValidate.Denomination,voucherPrice:"1"===e.formValidate.Denomination?e.formValidate.DenominationVal:.01*e.formValidate.DenominationProportion,issueNum:e.formValidate.number}],o.voucherPrice="1"===e.formValidate.Denomination?e.formValidate.DenominationVal:null,window.localStorage.setItem("paramsCreateVoucher",(0,a.default)(o)),e.$route.query.type)return e.$router.push({path:"o2o-report-coupon-use-rule",query:{type:"Modify"}}),!1;e.$router.push({path:"o2o-report-coupon-use-rule"})}})}}}},1959:function(e,t,o){var n=o(1960);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);o(43)("ae51a796",n,!1,{})},1960:function(e,t,o){t=e.exports=o(42)(!1),t.push([e.i,"\n.add_btn[data-v-59389d1a]{\n  text-align: center;\n}\n",""])},1961:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("bread-crumb",{ref:"Breadcrumb",attrs:{Breadcrumb:e.Breadcrumb}}),e._v(" "),o("Card",{staticClass:"white create_active margin-top-8",attrs:{bordered:!1}},[o("p",{attrs:{slot:"title"},slot:"title"},[e._v("发放细则")]),e._v(" "),o("div",[o("Form",{ref:"formValidate",attrs:{action:"",model:e.formValidate,rules:e.ruleValidate,"label-position":"right","label-width":90}},[o("div",{staticClass:"select_box"},[o("Row",{staticClass:"head"},[o("Col",{attrs:{span:"24"}},[o("Row",{attrs:{gutter:16}},[o("Col",{attrs:{span:"12"}},[o("FormItem",{attrs:{label:"代金券数量:",prop:"number"}},[o("Input",{model:{value:e.formValidate.number,callback:function(t){e.$set(e.formValidate,"number",t)},expression:"formValidate.number"}})],1)],1),e._v(" "),o("Col",{attrs:{span:"12"}},[o("Select",{staticClass:"input_width",on:{"on-change":e.DenominationChange},model:{value:e.formValidate.Denomination,callback:function(t){e.$set(e.formValidate,"Denomination",t)},expression:"formValidate.Denomination"}},e._l(e.formValidate.DenominationArray,function(t,n){return o("Option",{key:n,attrs:{value:t.code}},[e._v(e._s(t.text))])})),e._v(" "),"1"===e.formValidate.Denomination?o("FormItem",{staticClass:"margin_bottom_0",staticStyle:{display:"inline-block"},attrs:{label:"面值:",prop:"DenominationVal"}},[o("Input",{staticStyle:{width:"200px"},model:{value:e.formValidate.DenominationVal,callback:function(t){e.$set(e.formValidate,"DenominationVal",t)},expression:"formValidate.DenominationVal"}}),e._v("元\n                  ")],1):o("FormItem",{staticClass:"margin_bottom_0",staticStyle:{display:"inline-block"},attrs:{label:"面值比例:",prop:"DenominationProportion"}},[o("Input",{staticStyle:{width:"200px"},model:{value:e.formValidate.DenominationProportion,callback:function(t){e.$set(e.formValidate,"DenominationProportion",t)},expression:"formValidate.DenominationProportion"}}),e._v("%\n                  ")],1)],1)],1)],1)],1)],1),e._v(" "),o("div",{staticClass:"add_btn margin-top-10"},[o("Button",{on:{click:e.goPrevPage}},[e._v("返    回")]),e._v(" "),o("Button",{attrs:{type:"primary"},on:{click:e.linkCreate}},[e._v("下一步")])],1)])],1)])],1)},i=[];n._withStripped=!0;var a={render:n,staticRenderFns:i};t.default=a},605:function(e,t,o){"use strict";function n(e){u||o(1101)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(1009),a=o.n(i);for(var r in i)"default"!==r&&function(e){o.d(t,e,function(){return i[e]})}(r);var s=o(1103),l=o.n(s),u=!1,c=o(13),d=n,m=c(a.a,l.a,!1,d,null,null);m.options.__file="src/views/promotion-manage/o2oVoucher/components/Breadcrumb.vue",t.default=m.exports},686:function(e,t,o){"use strict";function n(e){u||o(1959)}Object.defineProperty(t,"__esModule",{value:!0});var i=o(1568),a=o.n(i);for(var r in i)"default"!==r&&function(e){o.d(t,e,function(){return i[e]})}(r);var s=o(1961),l=o.n(s),u=!1,c=o(13),d=n,m=c(a.a,l.a,!1,d,"data-v-59389d1a",null);m.options.__file="src/views/promotion-manage/o2oVoucher/o2oReportAdd/o2oReportCouponRegulations.vue",t.default=m.exports}});