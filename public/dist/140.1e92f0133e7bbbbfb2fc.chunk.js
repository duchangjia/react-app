webpackJsonp([140,274],{1705:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(241),i=a(n),o=r(146),l=a(o),s=r(242),u=a(s),c=r(603),d=a(c),m=r(239);t.default={components:{defaultHr:d.default},data:function(){var e=this;return{query:{currentPage:1,row:10,materialName79:"",materialCode79:"",materialCode69:""},tableColumn:[{title:"序号",align:"center",width:75,render:function(t,r){return t("span",(e.query.currentPage-1)*e.query.row+r.index+1)}},{title:"条形码",key:"materialCode69",align:"center"},{title:"商品名称",key:"materialName79",width:190,align:"center"},{title:"可用整件数",key:"validBoxNum",align:"center"},{title:"可用散个数",key:"validSingleNum",align:"center"},{title:"锁定整件数",key:"reservedBoxNum",align:"center",render:function(t,r){var a={};return 0===r.row.reservedBoxNum&&0===r.row.reservedSingleNum||(a={attrs:{title:"查看订单明细",style:"cursor:pointer;color:#0099ff;font-weight:bold;"},on:{click:function(t){return e.showOrderDetail(r.row)}}}),t("span",a,r.row.reservedBoxNum)}},{title:"锁定散个数",key:"reservedSingleNum",align:"center",render:function(t,r){var a={};return 0===r.row.reservedBoxNum&&0===r.row.reservedSingleNum||(a={attrs:{title:"查看订单明细",style:"cursor:pointer;color:#0099ff;font-weight:bold;"},on:{click:function(t){return e.showOrderDetail(r.row)}}}),t("span",a,r.row.reservedSingleNum)}},{title:"合计整件",key:"totalBoxNum",align:"center"},{title:"合计散个",key:"totalSingleNum",align:"center"},{title:"总计数量",key:"totalNum",align:"center",render:function(e,t){var r=0;return r=parseInt(t.row.validNum)+parseInt(t.row.reservedNum),e("span",r)}}],tableData:[],total:0,exportLimitText:0,exportLimit:!1,exportLimitTimer:null,orderDetailModalVisible:!1,orderDetailData:[],orderDetailDataColumns:[{type:"index",width:60,align:"center",title:"序号"},{title:"销售订单号",width:150,align:"center",key:"orderId"},{title:"订单来源",align:"center",render:function(e,t){var r="";if(0!=t.row.orderSource)switch(parseInt(t.row.tradeSource)){case 1:r="手工做单";break;case 2:r="SFA";break;case 3:r="O2O";break;case 4:r="车销订单";break;default:r="其他"}else switch(parseInt(t.row.orderType)){case 10:r="销售出库";break;case 20:r="补发出库";break;case 30:r="调拨出库";break;case 40:r="盘亏出库";break;default:r="其他"}return e("span",r)}},{title:"CAR数量",align:"center",key:"carNum"},{title:"EA数量",align:"center",key:"eaNum"},{title:"门店名称",align:"center",key:"storeName"}]}},mounted:function(){this.refreshExportLimit(),this.queryData()},beforeDestroy:function(){clearTimeout(this.exportLimitTimer)},methods:{handleQueryBtnClick:function(){this.query.currentPage=1,this.queryData()},refreshExportLimit:function(){var e=this;clearTimeout(this.exportLimitTimer);var t=localStorage["stock-manage-ckeck-query-list-export-timeset-limit"],r=(new Date).getTime();r<=t?(this.exportLimit=!0,this.exportLimitText=Math.ceil((parseInt(t,10)-r)/1e3),this.exportLimitTimer=setTimeout(function(t){return e.refreshExportLimit()},1e3)):this.exportLimit=!1},handleExportBtnClick:function(){var e=this;this.$Modal.confirm({title:"导出",content:"<p>是否确认导出？</p>",onOk:function(){var t=localStorage["stock-manage-ckeck-query-list-export-timeset-limit"];if(t&&(new Date).getTime()<=t)return void e.$Message.error("时间未解锁");localStorage["stock-manage-ckeck-query-list-export-timeset-limit"]=(new Date).getTime()+6e4,document.getElementById("form-export").method="post",document.getElementById("form-export").action=e.$util.baseUrl+"/omsCenter/logicStock/stockExport",document.getElementById("form-export").submit(),e.refreshExportLimit()}})},queryData:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,r,a,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,l.default)({},this.query),delete t.row,r=this,this.tableData=[],e.prev=4,e.next=7,this.$ajax({url:r.$util.apiConfig.stockManage.stockCheck.stockCheckQuery.list,method:"POST",data:m.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 7:a=e.sent,n=a.data,200==n.code?(n.result.resultList instanceof Array&&(this.tableData=n.result.resultList.concat()),console.log("-------"),console.log(this.tableData),n.result.pager.totalCount&&(this.total=n.result.pager.totalCount||0)):this.$Message.error(n.data.message),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),this.$Message.error(res.data.message);case 15:case"end":return e.stop()}},e,this,[[4,12]])}));return e}(),showOrderDetail:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(t){var r,a,n,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={dealerId:t.distributorCode,inventoryCode:t.warehouseCode,code79:t.sku},this.orderDetailData=[],a=this,e.prev=3,n=void 0,e.next=7,this.$ajax.post(a.$util.apiConfig.stockManage.stockCheck.stockCheckQuery.orderDetail,m.stringify(r));case 7:o=e.sent,n=o.data,console.log(n),n.success?(this.orderDetailModalVisible=!0,n.result instanceof Array&&(this.orderDetailData=n.result.map(function(e){var t=(0,l.default)({},e),r=e.num&&null!==e.num?e.num:0,a=e.transformRule&&null!==e.transformRule?e.transformRule:0,n=(parseInt(r/a),e.eaNum);return t.eaNum=n%t.packageNum,t.carNum=parseInt(n/t.packageNum),t}))):this.$Message.error(o.data.message),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),this.$Message.error("不满足查询条件");case 17:case"end":return e.stop()}},e,this,[[3,13]])}));return e}()}}},2397:function(e,t,r){var a=r(2398);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(43)("1cbc3818",a,!1,{})},2398:function(e,t,r){t=e.exports=r(42)(!1),t.push([e.i,"\n.mb-15[data-v-3715bc56] {\n  margin-bottom: 15px;\n}\n.view-pannel[data-v-3715bc56] {\n  overflow: hidden;\n}\n.custom-page[data-v-3715bc56] {\n  float: right;\n  margin-top: 15px;\n}\n",""])},2399:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",[r("Form",{staticClass:"query-pannel",attrs:{"label-width":100,id:"form-export"}},[r("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{type:"text",name:"currentPage"},domProps:{value:e.query.currentPage}}),e._v(" "),r("Row",[r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"商品名称"}},[r("Input",{attrs:{name:"materialName79",clearable:""},model:{value:e.query.materialName79,callback:function(t){e.$set(e.query,"materialName79",t)},expression:"query.materialName79"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"销售编码"}},[r("Input",{attrs:{name:"materialCode79",clearable:""},model:{value:e.query.materialCode79,callback:function(t){e.$set(e.query,"materialCode79",t)},expression:"query.materialCode79"}})],1)],1),e._v(" "),r("Col",{attrs:{span:"6"}},[r("FormItem",{attrs:{label:"条形码"}},[r("Input",{attrs:{name:"materialCode69",clearable:""},model:{value:e.query.materialCode69,callback:function(t){e.$set(e.query,"materialCode69",t)},expression:"query.materialCode69"}})],1)],1)],1),e._v(" "),r("Row",{staticClass:"mb-15"},[r("Col",[r("Button",{staticStyle:{"margin-left":"80px","margin-right":"20px"},attrs:{disabled:e.exportLimit,type:"primary"},on:{click:function(t){e.handleExportBtnClick()}}},[r("span",[e._v("导出")]),e._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:e.exportLimit,expression:"exportLimit"}]},[e._v("(禁用"+e._s(e.exportLimitText)+"秒)")])]),e._v(" "),r("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleQueryBtnClick()}}},[e._v("查询")])],1)],1)],1),e._v(" "),r("default-hr"),e._v(" "),r("div",{staticClass:"view-pannel"},[r("Table",{attrs:{data:e.tableData,columns:e.tableColumn}}),e._v(" "),r("Page",{staticClass:"custom-page",attrs:{current:e.query.currentPage,total:e.total,"show-elevator":"","show-total":""},on:{"update:current":function(t){e.$set(e.query,"currentPage",t)},"on-change":e.queryData}})],1),e._v(" "),r("Modal",{attrs:{title:"订单详情",width:"800"},model:{value:e.orderDetailModalVisible,callback:function(t){e.orderDetailModalVisible=t},expression:"orderDetailModalVisible"}},[r("div",[r("Table",{attrs:{data:e.orderDetailData,columns:e.orderDetailDataColumns}})],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:function(t){e.orderDetailModalVisible=!1}}},[e._v("关闭")])],1)])],1)},n=[];a._withStripped=!0;var i={render:a,staticRenderFns:n};t.default=i},603:function(e,t,r){"use strict";function a(e){u||r(964)}Object.defineProperty(t,"__esModule",{value:!0});var n=r(939),i=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,function(){return n[e]})}(o);var l=r(966),s=r.n(l),u=!1,c=r(13),d=a,m=c(i.a,s.a,!1,d,"data-v-eb39e066",null);m.options.__file="src/views/my-components/default-hr/default-hr.vue",t.default=m.exports},820:function(e,t,r){"use strict";function a(e){u||r(2397)}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1705),i=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,function(){return n[e]})}(o);var l=r(2399),s=r.n(l),u=!1,c=r(13),d=a,m=c(i.a,s.a,!1,d,"data-v-3715bc56",null);m.options.__file="src/views/stock-manage/stock-check/stock-check-query.vue",t.default=m.exports},939:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},964:function(e,t,r){var a=r(965);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(43)("63be8b28",a,!1,{})},965:function(e,t,r){t=e.exports=r(42)(!1),t.push([e.i,"\n.default-hr[data-v-eb39e066] {\n  width: 100%;\n  height: 1px;\n  border: none;\n  border-top: 1px dashed #aaa;\n  margin-bottom: 20px;\n}\n",""])},966:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement;return(e._self._c||t)("hr",{staticClass:"default-hr"})},n=[];a._withStripped=!0;var i={render:a,staticRenderFns:n};t.default=i}});