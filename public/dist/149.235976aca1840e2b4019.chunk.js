webpackJsonp([149,292],{1408:function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=(e(898),e(38)),i=(a(o),e(239));a(i);n.default={data:function(){return{modalHandel:this.modalShow,file:null,filePath:"",uploading:!1,modalLoading:!0}},props:{modalShow:{type:Boolean,default:!1},getType:{type:Number,default:0}},mounted:function(){},watch:{modalShow:function(t,n){t&&(this.modalHandel=!0)}},methods:{cancel:function(){this.$emit("update:modalShow",!1)},inputFileChange:function(t){this.file=t.target.files[0],this.filePath=t.target.value},selectFile:function(){this.$refs.inputFile.click()},batchUpload:function(){var t=this,n=this;if(""==this.filePath)return void this.$Modal.error({title:"上传文件为空",content:"请选择上传文件",onOk:function(t){setTimeout(function(){n.modalLoading=!1,n.$nextTick(function(){n.modalLoading=!0})},100)}});var e=new FormData;e.append("beginnInventoryFile",this.file),this.uploading=!0;var a="";2==this.getType?a=this.$util.apiConfig.promotionManage.warAdviser.targetConfig.batchUploadForMonth:1==this.getType&&(a=this.$util.apiConfig.promotionManage.warAdviser.targetConfig.batchUploadForYear),this.$ajax({method:"post",url:a,data:e}).then(function(e){if(t.uploading=!1,200==e.data.code)t.$emit("update:modalShow",!1),t.modalHandel=!1,t.$Modal.success({title:"文件上传成功",content:e.data.message,onOk:function(){t.$emit("getlist")}});else if(100==e.data.code){setTimeout(function(){n.modalLoading=!1,n.$nextTick(function(){n.modalLoading=!0})},100);var a="";for(var o in e.data.result)a+='<p style="color:red;margin-bottom:10px">'+e.data.result[o]+"<p>";t.$Modal.error({width:500,title:"文件上传失败",content:a+"<div>"+e.data.message+"</div>"})}else setTimeout(function(){n.modalLoading=!1,n.$nextTick(function(){n.modalLoading=!0})},100),t.$Modal.error({title:"文件上传失败",content:e.data.message})}).catch(function(e){setTimeout(function(){n.modalLoading=!1,n.$nextTick(function(){n.modalLoading=!0})},100),t.uploading=!1,t.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"}),console.log("失败信息：",e)})},downloadFile:function(){2==this.getType?window.location.href=this.$util.baseUrl+this.$util.apiConfig.promotionManage.warAdviser.targetConfig.downloadMonthUrl:1==this.getType&&(window.location.href=this.$util.baseUrl+this.$util.apiConfig.promotionManage.warAdviser.targetConfig.downloadYearUrl)}}}},1453:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("Modal",{attrs:{title:"上传导入","mask-closable":!1,loading:t.modalLoading},on:{"on-ok":function(n){t.batchUpload()},"on-cancel":function(n){t.cancel()}},model:{value:t.modalHandel,callback:function(n){t.modalHandel=n},expression:"modalHandel"}},[e("div",[e("p",{staticStyle:{color:"red","text-align":"center"}},[t._v("提示：请使用模板导入数据文件，仅支持.xlsx, .xlsm, .xltm, .xlsb, .xlam格式")]),t._v(" "),e("div",{staticStyle:{"padding-top":"20px"}},[e("input",{ref:"inputFile",staticStyle:{display:"none"},attrs:{name:"beginnInventoryFile",type:"file"},on:{change:t.inputFileChange}}),t._v(" "),e("i-button",{staticStyle:{width:"115px"},attrs:{loading:t.uploading,icon:"plus",type:"info"},on:{click:t.selectFile}},[t._v("选择上传文件")]),t._v(" "),""!=t.filePath?e("span",{staticStyle:{"margin-left":"30px"}},[t._v("上传文件路径："+t._s(t.filePath))]):t._e()],1),t._v(" "),e("div",{staticStyle:{"padding-top":"20px"}},[e("i-button",{staticStyle:{width:"115px"},attrs:{icon:"android-download",type:"success"},on:{click:t.downloadFile}},[t._v("下载"),e("span",{domProps:{innerHTML:t._s(2==t.getType?"月":"年")}}),t._v("度模版")])],1)])])],1)},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};n.default=i},1593:function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=(e(898),e(618)),i=a(o),r=e(38),l=(a(r),e(239)),s=a(l);n.default={data:function(){var t=this;return{totalCount:1,current:1,loading:!1,columns:[{title:"业务员编号",key:"salesmanId",align:"center"},{title:"业务员",align:"center",key:"salesmanName"},{title:"月度",align:"center",key:"yearMonth",width:90,render:function(t,n){return t("div",n.row.year+"-"+n.row.month)}},{title:"目标总销量",align:"center",key:"salesTarget"},{title:"操作",align:"center",key:"handle",render:function(n,e){return n("div",[n("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.$router.push({name:"month-target-new",query:{id:e.row.id,type:2}})}}},"详细"),n("Button",{props:{type:"primary",size:"small"},style:{margin:"0 5px"},on:{click:function(){t.$router.push({name:"month-target-new",query:{id:e.row.id,type:3}})}}},"编辑"),n("Button",{props:{type:"primary",size:"small"},style:{margin:"0 5px 0 0"},on:{click:function(){t.$router.push({name:"month-target-new",query:{id:e.row.id,type:4}})}}},"复制"),n("Button",{props:{type:"primary",size:"small"},style:{margin:"0 5px 0 0"},on:{click:function(){t.$router.push({name:"log-monthlist",query:{targetId:e.row.id,type:2}})}}},"日志"),n("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(e.index,e.row.id)}}},"删除")])}}],data:[],saveData:[],value:{seek:[],month:""},formItem:{salesman:[]},modalShow:!1}},components:{downloadCom:i.default},mounted:function(){},methods:{getData:function(t){var n=this;this.data=[];var e={};if(t){if(t.month){var a=new Date(t.month),o=a.getFullYear()+"",i=a.getMonth()+1+"";1==i.length&&(i="0"+i),e.year=o,e.month=i}e.salesmanList=t.seek}this.loading=!0,this.$ajax({method:"post",url:this.$util.apiConfig.promotionManage.warAdviser.targetConfig.queryMonth,data:s.default.stringify(e)}).then(function(t){n.loading=!1,n.totalCount=t.data.result.salesmanTargetInfoListM.length,t.data.result.salesmanTargetInfoListM.map(function(t,e){var a={id:t.id,userid:t.salesmanId,user:t.salesmanName,month:t.year+"-"+t.month,targetSales:t.salesTarget};e<10&&n.data.push(a),n.saveData.push(a)})}).catch(function(t){console.log("失败信息：",t)})},getFormItem:function(){var t=this;this.$ajax({method:"post",url:this.$util.apiConfig.promotionManage.warAdviser.targetConfig.querySalesman}).then(function(n){n.data.result.map(function(n){var e={userid:n.empId,username:n.empName};t.formItem.salesman.push(e)})}).catch(function(t){console.log("失败信息：",t)})},remove:function(t,n){var e=this,a="id="+n+"&_="+(new Date).getTime();this.$Modal.confirm({title:"提示",content:"<p>您确认要删除吗？</p>",onOk:function(){e.$ajax({method:"post",url:e.$util.apiConfig.promotionManage.warAdviser.targetConfig.gethDel+"?"+a,data:""}).then(function(n){!1===n.data.result&&e.$Message.error("删除失败！"),200==n.data.code&&(e.data.splice(t,1),e.$Message.success("删除成功！"),e.newGetList(1))}).catch(function(t){console.log("失败信息：",t)})}})},newTarget:function(){this.$router.push({name:"month-target-new",query:{type:1}})},newGetList:function(t){var n=this,e="";if(this.value.month){var a=new Date(this.value.month),o=a.getFullYear()+"",i=a.getMonth()+1+"";1==i.length&&(i="0"+i),e=e+"&year="+o+"&month="+i}this.value.seek.length>=1&&(e=e+"&salesmanList="+this.value.seek.join());var r="page.page="+t+"&page.rows=10&type=2&_="+(new Date).getTime()+e;this.loading=!0,this.$ajax({method:"get",url:this.$util.apiConfig.promotionManage.warAdviser.targetConfig.getList+"?"+r,data:r}).then(function(e){n.loading=!1,n.data=[],200==e.data.code&&(n.totalCount=e.data.result.total,n.data=e.data.result.rows),n.current=t}).catch(function(t){console.log("失败信息：",t)})},goLog:function(t){this.$router.push({name:"del-log-monthlist",query:{type:"2"}})}},created:function(){this.newGetList(1),this.getFormItem()}}},2036:function(t,n,e){var a=e(2037);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(43)("8151564a",a,!1,{})},2037:function(t,n,e){n=t.exports=e(42)(!1),n.push([t.i,"\n.width-100 {\n  width: 100%;\n}\n.lb-left {\n  float: left;\n}\n.lb-right {\n  float: right;\n}\n.lb-center {\n  text-align: center;\n}\n.lb-promotion-main {\n  height: auto;\n  background-color: #fff;\n}\n.lb-promotion-main .lb-promotion-search {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row {\n  margin-bottom: 14px;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row .ListName {\n  text-align: right;\n  line-height: 32px;\n  color: #747474;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.promotion-page {\n  margin: 1rem 0 0 0;\n}\n.container {\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  padding: 1% 1% 3%;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-12 {\n  margin-bottom: 12px;\n}\n.margin-bottom-14 {\n  margin-bottom: 14px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.mb--12 {\n  margin-bottom: 12px;\n}\n.mb--14 {\n  margin-bottom: 14px;\n}\n.border-b--dashed {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.pd--20 {\n  padding: 20px;\n}\n.ml--50 {\n  margin-left: 50px;\n}\n.fr {\n  float: right;\n}\n.fl {\n  float: left;\n}\n.bg--white {\n  background: #fff;\n}\n.clearfix:after {\n  content: '';\n  display: block;\n  height: 0;\n  clear: both;\n}\n.text-center {\n  text-align: center;\n}\n.white {\n  background-color: white;\n}\n.select_box {\n  padding: 20px;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.ling_height {\n  padding-top: 15px;\n}\n.text_align_right {\n  text-align: right;\n}\n.text_align_center {\n  text-align: center;\n}\n.operation_box {\n  padding: 10px 20px;\n  text-align: right;\n}\n.page_right {\n  text-align: right;\n  padding: 10px 20px;\n}\n.input_width {\n  width: 120px;\n}\n.search_btn {\n  width: 100px;\n}\n.margin_bottom_0 {\n  margin-bottom: 0;\n}\n.ivu-breadcrumb a {\n  color: #999;\n}\n.ivu-breadcrumb {\n  font-size: 12px;\n}\n.ivu-breadcrumb > span:last-child {\n  color: #426196;\n}\n.box_shadow {\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-color: #eee;\n}\n.border_bottom_dashed {\n  border-bottom: 1px dashed #E8E8E8;\n}\n.problem_table .ivu-checkbox-wrapper {\n  margin-right: 0px;\n}\n.annual-objectives {\n  width: 100%;\n  height: 100%;\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  text-align: center;\n}\n.annual-objectives .head1 {\n  padding: 10px 0;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.annual-objectives .head1 .xiala1 {\n  width: 66%;\n}\n.annual-objectives .head1 #yue {\n  width: 40%;\n  height: 34px;\n  border: 1px solid #E8E8E8;\n  border-radius: 5px;\n}\n.annual-objectives .newTarget {\n  padding: 10px 0;\n}\n.annual-objectives .tables {\n  margin: 0 1%;\n}\n.annual-objectives .page {\n  text-align: right;\n  margin-right: 1%;\n  margin-top: 10px;\n}\n",""])},2038:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"annual-objectives"},[e("div",{staticClass:"head1",staticStyle:{padding:"20px 0"}},[e("Row",[e("Col",{attrs:{span:"6"}},[t._v("\n                业务员：\n                "),e("Select",{staticClass:"xiala1",attrs:{filterable:"",multiple:"",placeholder:"请选择或搜索名字"},model:{value:t.value.seek,callback:function(n){t.$set(t.value,"seek",n)},expression:"value.seek"}},t._l(t.formItem.salesman,function(n){return e("Option",{key:n.userid,attrs:{value:n.userid}},[t._v(t._s(n.username))])}))],1),t._v(" "),e("Col",{attrs:{span:"6"}},[t._v("\n                月度：\n                "),e("DatePicker",{staticStyle:{width:"50%"},attrs:{type:"month"},model:{value:t.value.month,callback:function(n){t.$set(t.value,"month",n)},expression:"value.month"}})],1),t._v(" "),e("Col",{attrs:{span:"8",offset:"4"}},[e("Button",{on:{click:function(n){t.newGetList(1)}}},[t._v("查询")]),t._v(" "),e("Button",{staticStyle:{"margin-left":"20px"},on:{click:t.newTarget}},[t._v("新建目标")]),t._v(" "),e("Button",{staticStyle:{"margin-left":"20px"},on:{click:function(n){t.modalShow=!0}}},[t._v("批量导入")]),t._v(" "),e("Button",{staticStyle:{"margin-left":"20px"},on:{click:t.goLog}},[t._v("删除日志")])],1)],1)],1),t._v(" "),e("Row",{staticClass:"newTarget"}),t._v(" "),e("Table",{staticClass:"tables",attrs:{loading:t.loading,columns:t.columns,data:t.data}}),t._v(" "),e("Page",{attrs:{total:t.totalCount,"page-size":10,"show-total":"","show-elevator":"","class-name":"page",current:t.current},on:{"on-change":t.newGetList}}),t._v(" "),e("br"),t._v(" "),e("downloadCom",{attrs:{modalShow:t.modalShow,getType:2},on:{"update:modalShow":function(n){t.modalShow=n},getlist:function(n){t.newGetList(1)}}})],1)},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};n.default=i},618:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e(1408),o=e.n(a);for(var i in a)"default"!==i&&function(t){e.d(n,t,function(){return a[t]})}(i);var r=e(1453),l=e.n(r),s=e(13),d=s(o.a,l.a,!1,null,null,null);d.options.__file="src/views/promotion-manage/war-adviser/target-config/components/download.vue",n.default=d.exports},711:function(t,n,e){"use strict";function a(t){d||e(2036)}Object.defineProperty(n,"__esModule",{value:!0});var o=e(1593),i=e.n(o);for(var r in o)"default"!==r&&function(t){e.d(n,t,function(){return o[t]})}(r);var l=e(2038),s=e.n(l),d=!1,u=e(13),c=a,g=u(i.a,s.a,!1,c,null,null);g.options.__file="src/views/promotion-manage/war-adviser/target-config/month-target/month-target-list.vue",n.default=g.exports},898:function(t,n,e){"use strict";function a(t,n){if(!n)var n="yyyy-MM-DD hh:mm:ss";var e={"M+":t.getMonth()+1,"D+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return n}function o(t,n){if(!n)var n="yyyy-MM-dd";(t=Number(t))<1e10&&(t*=1e3);var e=new Date(t),a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in a)new RegExp("("+o+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?a[o]:("00"+a[o]).substr((""+a[o]).length)));return n}Object.defineProperty(n,"__esModule",{value:!0}),n.formatDate=a,n.timestampToDay=o}});