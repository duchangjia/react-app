webpackJsonp([157],{1683:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(898),r=i(239),n=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){var t=this;return{apiGroup:this.$util.apiConfig.purchaseDelivery.purchaseManage.purchaseOrderManage,query:{ncOrderCode:"",createStartTime:"",createEndTime:"",cargoReceiverName:"",stpName:"",status:""},columns1:[{title:"序号",type:"index",minWidth:60,fixed:"left"},{title:"立购台单号",key:"ncOrderCode",minWidth:110},{title:"立白单号",key:"sapOrderCode",minWidth:110},{title:"经销商编号",key:"stpCode",minWidth:120},{title:"经销商描述",key:"stpName",minWidth:150},{title:"送达方编号",key:"cargoReceiverCode",minWidth:120},{title:"送达方描述",key:"cargoReceiverName",minWidth:150},{title:"订单总重量",key:"totalWeight",minWidth:120},{title:"订单总体积",key:"totalVolume",minWidth:110},{title:"总价值",key:"totalPrice",minWidth:80},{title:"订单整件数",key:"countByCar",minWidth:110},{title:"订单散个数",key:"countByEa",minWidth:110},{title:"已发货整件数",key:"dispatchOrderCarNum",minWidth:110},{title:"已发货散个数",key:"dispatchOrderEaNum",minWidth:110},{title:"剩余待发整件数",key:"surplusDisOrderCarNum",minWidth:120},{title:"剩余待发散个数",key:"surplusDisOrderEaNum",minWidth:120},{title:"采购单下单时间",key:"createTime",minWidth:120},{title:"采购订单状态",key:"deliveryStatus",minWidth:120}],entity:[],columns2:[{title:"序号",type:"index",width:60},{title:"条形码",key:"materialCode69"},{title:"商品名称",key:"materialName79",width:180},{title:"订单整件数",key:"quantityByCar"},{title:"件单价",key:"carBasePrice"},{title:"订单散个数",key:"quantityByEa"},{title:"个单价",key:"eaBasePrice"},{title:"已入库整件数",key:"inboundCarNum",align:"center"},{title:"已入库散个数",key:"inboundEaNum",align:"center"}],dispatchOrderProductList:[],showOrderDetail:!1,detail_list:{},pager:{},loading:!1,dateOptions:{disabledDate:function(e){return e&&e.valueOf()<new Date(t.query.createStartTime)}},showTableColConfig:!1}},created:function(){console.log("purchase-send-list created"),this.loading=!0,this.jumpPageHandle(1)},methods:{closeOrderDetail:function(){this.showOrderDetail=!1},shipSTimeChangeHandle:function(t){this.query.createStartTime=t,this.query.createStartTime>this.query.createEndTime&&(this.query.createEndTime="")},shipETimeChangeHandle:function(t){this.query.createEndTime=t},openOrder:function(t){var e=this;console.log(t),this.loading=!0,this.$util.ajax.post(this.apiGroup.getDetailUrl,n.default.stringify({code:t.ncOrderCode})).then(function(t){if(e.loading=!1,console.log("采购订单详情请求返回数据：",t),200==t.status){e.showOrderDetail=!0,e.dispatchOrderProductList=t.data;for(var i=0;i<e.dispatchOrderProductList.length;i++)e.dispatchOrderProductList[i].quantityByEa=0,e.dispatchOrderProductList[i].inboundCarNum||(e.dispatchOrderProductList[i].inboundCarNum="-"),e.dispatchOrderProductList[i].inboundEaNum||(e.dispatchOrderProductList[i].inboundEaNum="-")}else e.$Modal.error({title:"HTTP请求错误",content:t.statusText})}).catch(function(t){console.log(t),e.loading=!1,e.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})},jumpPageHandle:function(t){var e=this;this.pager.page=t,this.loading=!0;var i={currentPage:this.pager.page,ncOrderCode:this.query.ncOrderCode,createStartTime:this.query.createStartTime,createEndTime:this.query.createEndTime,cargoReceiverName:this.query.cargoReceiverName,stpName:this.query.stpName,deliveryStatus:this.query.status};this.$util.ajax.post(this.apiGroup.listUrl,n.default.stringify(i)).then(function(t){if(e.loading=!1,console.log("采购订单请求返回数据：",t),200==t.status){var i=t.data.result;e.pager=i.pager,e.entity=i.resultList;for(var r=0;r<e.entity.length;r++)e.entity[r].createTime=(0,a.timestampToDay)(e.entity[r].createTime),0==e.entity[r].deliveryStatus?e.entity[r].deliveryStatus="待发货":10==e.entity[r].deliveryStatus?e.entity[r].deliveryStatus="部分已发货":20==e.entity[r].deliveryStatus?e.entity[r].deliveryStatus="全部已发货":e.entity[r].deliveryStatus="错误状态"}else e.$Modal.error({title:"HTTP请求错误",content:t.statusText})}).catch(function(t){console.log(t),e.loading=!1,e.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})},lookup:function(){console.log("lookup"),this.jumpPageHandle(1)}}}},2320:function(t,e,i){var a=i(2321);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(43)("ad9cef9c",a,!1,{})},2321:function(t,e,i){e=t.exports=i(42)(!1),e.push([t.i,"\n.cmain[data-v-4c593587] {\r\n  background-color: white;\r\n  position: relative;\r\n  /* min-width: 1020px; */\n}\n.store_detail_list li[data-v-4c593587] {\r\n  display: inline-block;\r\n  margin-right: 45px;\r\n  margin-bottom: 10px;\n}\n.lebals[data-v-4c593587] {\r\n  width: 60px;\r\n  display: inline-block;\n}\n#checkForm .ivu-col[data-v-4c593587] {\r\n  margin: 10px 0px;\n}\r\n",""])},2322:function(t,e,i){var a=i(2323);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(43)("1f7f5ee6",a,!1,{})},2323:function(t,e,i){e=t.exports=i(42)(!1),e.push([t.i,"\n.tableColConfig {\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -ms-flex-align: center;\r\n      align-items: center;\n}\r\n",""])},2324:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cmain"},[i("div",{staticStyle:{padding:"20px 50px"}},[i("Row",{attrs:{id:"checkForm"}},[i("Col",{attrs:{sm:12,md:8,lg:6}},[i("span",{staticClass:"lebals"},[t._v("采购单号")]),t._v(" "),i("Input",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{type:"text"},model:{value:t.query.ncOrderCode,callback:function(e){t.$set(t.query,"ncOrderCode","string"==typeof e?e.trim():e)},expression:"query.ncOrderCode"}})],1),t._v(" "),i("Col",{attrs:{sm:12,md:8,lg:6}},[i("span",{staticClass:"lebals"},[t._v("采购单状态")]),t._v(" "),i("i-select",{staticStyle:{width:"143px","margin-left":"15px"},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},[i("i-option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),i("i-option",{attrs:{value:"0"}},[t._v("待发货")]),t._v(" "),i("i-option",{attrs:{value:"10"}},[t._v("部分发货")]),t._v(" "),i("i-option",{attrs:{value:"20"}},[t._v("全部发货")])],1)],1),t._v(" "),i("Col",{attrs:{sm:24,md:24,lg:12}},[i("span",{staticClass:"lebals"},[t._v("下单时间")]),t._v(" "),i("date-picker",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{value:t.query.createStartTime,format:"yyyy-MM-dd",type:"date",placeholder:"请选择时间"},on:{"on-change":t.shipSTimeChangeHandle}}),t._v(" "),i("i",{staticClass:"demo-icons"},[t._v("-")]),t._v(" "),i("date-picker",{staticStyle:{width:"143px"},attrs:{value:t.query.createEndTime,options:t.dateOptions,format:"yyyy-MM-dd",type:"date",placeholder:"请选择时间"},on:{"on-change":t.shipETimeChangeHandle}})],1),t._v(" "),i("Col",{attrs:{sm:12,md:8,lg:6}},[i("span",{staticClass:"lebals"},[t._v("送达方描述")]),t._v(" "),i("Input",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{type:"text"},model:{value:t.query.cargoReceiverName,callback:function(e){t.$set(t.query,"cargoReceiverName","string"==typeof e?e.trim():e)},expression:"query.cargoReceiverName"}})],1),t._v(" "),i("Col",{attrs:{sm:12,md:8,lg:6}},[i("span",{staticClass:"lebals"},[t._v("售达方描述")]),t._v(" "),i("Input",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{type:"text"},model:{value:t.query.stpName,callback:function(e){t.$set(t.query,"stpName","string"==typeof e?e.trim():e)},expression:"query.stpName"}})],1),t._v(" "),i("Col",{staticStyle:{float:"right"},attrs:{sm:24,md:24,lg:8}},[i("i-button",{staticStyle:{width:"115px","margin-left":"15px"},attrs:{type:"primary",icon:"search"},on:{click:t.lookup}},[t._v("查询")])],1)],1),t._v(" "),i("br"),t._v(" "),i("Table",{attrs:{stripe:"",columns:t.columns1,data:t.entity},on:{"on-row-click":t.openOrder}}),t._v(" "),i("Row",{staticClass:"code-row-bg",staticStyle:{margin:"10px"},attrs:{type:"flex",justify:"end"}},[i("page",{attrs:{current:t.pager.page,total:t.pager.totalCount,"page-size":t.pager.pageCode,"show-elevator":"","show-total":""},on:{"on-change":t.jumpPageHandle}})],1)],1),t._v(" "),i("modal",{attrs:{width:"1200"},model:{value:t.showOrderDetail,callback:function(e){t.showOrderDetail=e},expression:"showOrderDetail"}},[i("span",{attrs:{slot:"header"},slot:"header"},[i("span",[t._v("订单明细")])]),t._v(" "),i("div",[i("div",{staticClass:"tableStandard",staticStyle:{"overflow-y":"auto",height:"300px"}},[i("Table",{attrs:{stripe:"",columns:t.columns2,data:t.dispatchOrderProductList}})],1)]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("i-button",{staticStyle:{width:"92px"},attrs:{type:"primary"},on:{click:t.closeOrderDetail}},[t._v("确认")]),t._v(" "),i("i-button",{staticStyle:{width:"92px"},on:{click:t.closeOrderDetail}},[t._v("取消")])],1)]),t._v(" "),t.loading?i("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},r=[];a._withStripped=!0;var n={render:a,staticRenderFns:r};e.default=n},800:function(t,e,i){"use strict";function a(t){d||(i(2320),i(2322))}Object.defineProperty(e,"__esModule",{value:!0});var r=i(1683),n=i.n(r);for(var s in r)"default"!==s&&function(t){i.d(e,t,function(){return r[t]})}(s);var l=i(2324),o=i.n(l),d=!1,c=i(13),u=a,p=c(n.a,o.a,!1,u,"data-v-4c593587",null);p.options.__file="src/views/purchase-send/purchase-manage/purchase-order-manage/purchase-order-list.vue",e.default=p.exports},898:function(t,e,i){"use strict";function a(t,e){if(!e)var e="yyyy-MM-DD hh:mm:ss";var i={"M+":t.getMonth()+1,"D+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in i)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return e}function r(t,e){if(!e)var e="yyyy-MM-dd";(t=Number(t))<1e10&&(t*=1e3);var i=new Date(t),a={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in a)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return e}Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=a,e.timestampToDay=r}});