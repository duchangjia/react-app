webpackJsonp([160],{1776:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"orderDetail",data:function(){return{loading:!0,stateString:"",remark:"",promotionListArray:{0:"-",1:"买赠",2:"返利",3:"特价",11:"组合"},columnsList:[{title:"创建时间",key:"createTime"},{title:"更新时间",key:"updateTime"},{title:"退货来源",key:"sourceChannel"},{title:"退货单号",key:"returnNo"},{title:"DMS订单号",key:"orderId"},{title:"EA数量",key:"totalEAItemNum"},{title:"CAR数量",key:"totalCRTItemNum"},{title:"退货单金额",key:"returnAmount"},{title:"退货原因",key:"returnResults"},{title:"退货类型",key:"returnCustomerType",width:100,render:function(t,e){var n="退货退款";return 2==e.row.returnCustomerType&&(n="仅退货"),t("div",n)}},{title:"退货单状态",key:"returnStatus",width:100}],columnsListStock:[{title:"门店编码",key:"storeCode"},{title:"门店名称",key:"storeName"},{title:"下单账号",key:"createOrderCode"},{title:"下单人",key:"createOrderPerson"},{title:"业务员",key:"operatePerson"},{title:"退货仓库",width:300,key:"inventoryName"}],columnsListProduct:[{title:"序号",width:80,type:"index"},{title:"商品名称",key:"itemName"},{title:"条形码",key:"item69"},{title:"商品标识",key:"promotionMark",render:function(t,e){var n="-";return 1==e.row.itemType?n="常规装":2==e.row.itemType?n="促销装":3==e.row.itemType?n="赠品/非单卖品":4==e.row.itemType&&(n="广宣品"),t("div",n)}},{title:"转化系数",key:"packageNum"},{title:"件/箱单价",key:"itemActualAmount"},{title:"EA数量",key:"eAItemNum"},{title:"CAR数量",key:"cRTItemNum"},{title:"实际入库EA",key:"eAItemUnit"},{title:"实际入库CAR",key:"cRTItemUnit"},{title:"小计",key:"itemTotalActualAmount"}],thisTableData:[],thisTableDataStock:[],thisTableDataProduct:[]}},methods:{goBack:function(){this.$router.back()},renderPage:function(t){var e=t.tradeReturn.returnMain,n=this,r="",a=t.channels[e.sourceChannel-1],i="";a&&(r=a.name);var o=t.returnStatuss[t.tradeReturn.returnMain.returnStatus-1];o&&(i=o.name),n.stateString=i,n.thisTableData=[];var l={createTime:n.formatDate(e.createTime),updateTime:n.formatDate(e.updateTime),sourceChannel:r,returnNo:e.returnNo,orderId:e.orderId,totalCRTItemNum:e.totalCRTItemNum,totalEAItemNum:e.totalEAItemNum,returnAmount:e.returnAmount,returnResults:e.returnResult,discountAmout:e.discountAmout,returnStatus:i,returnCustomerType:e.returnCustomerType};n.thisTableData.push(l),l={},l={storeCode:e.storeCode,storeName:e.storeName,createOrderCode:e.createOrderCode,createOrderPerson:e.createOrderPerson,operatePerson:e.operatePerson,inventoryName:e.inventoryName},n.thisTableDataStock=[],n.thisTableDataStock.push(l),n.thisTableDataProduct=[],t.tradeReturn.returnItems.forEach(function(t,e){var r={};r={itemName:t.itemName,item69:t.item69,promotionMark:t.itemTypeFlag?n.promotionListArray[t.promotionType]:"商品",packageNum:t.packageNum,itemType:t.itemType||0,itemActualAmount:t.itemActualAmount?parseFloat(t.itemActualAmount).toFixed(2):"0.00",eAItemNum:t.eaitemNum&&!isNaN(t.eaitemNum)?t.eaitemNum:0,cRTItemNum:t.crtitemNum&&!isNaN(t.crtitemNum)?t.crtitemNum:0,eAItemUnit:t.activityEaNum&&!isNaN(t.activityEaNum)?t.activityEaNum:0,cRTItemUnit:t.activityCarNum&&!isNaN(t.activityCarNum)?t.activityCarNum:0,itemTotalActualAmount:t.itemTotalActualAmount?parseFloat(t.itemTotalActualAmount).toFixed(2):"0.00"},n.thisTableDataProduct.push(r)}),n.remark=e.remark?e.remark:"订单无备注"},loadPage:function(){var t=this,e=this;e.loading=!0;this.$route.query.id&&this.$route.query.id.toString();this.$util.ajax({method:"post",url:e.$util.apiConfig.traderManage.returnManage.getdetail+"?returnId="+this.$route.query.id,transformRequest:[function(t){var e="";for(var n in t)e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n])+"&";return e=e.substr(0,e.length-1)}],headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:""}).then(function(t){e.loading=!1,200==t.data.code&&e.renderPage(t.data.result)}).catch(function(e){console.error(e),t.$Message.error({content:"退货订单详情获取失败"})})},formatDate:function(t,e){if(""===t||null===t)return"";var n=new Date;if(n.setTime(t),!e)var e="yyyy-MM-DD hh:mm:ss";var r={"M+":n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1,"D+":n.getDate()<10?"0"+n.getDate():n.getDate(),"h+":n.getHours()<10?"0"+n.getHours():n.getHours(),"m+":n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes(),"s+":n.getSeconds()<10?"0"+n.getSeconds():n.getSeconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in r)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return e},print:function(){var t=window.location.href;t=t.replace(this.$route.fullPath,"/print/return-print?id="+this.$route.query.id),window.open(t,"_blank")}},mounted:function(){this.loadPage()},watch:{$route:function(){this.loadPage()}}}},2688:function(t,e,n){var r=n(2689);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(43)("16413168",r,!1,{})},2689:function(t,e,n){e=t.exports=n(42)(!1),e.push([t.i,"\n.width-100 {\n  width: 100%;\n}\n.lb-left {\n  float: left;\n}\n.lb-right {\n  float: right;\n}\n.lb-center {\n  text-align: center;\n}\n.lb-promotion-main {\n  height: auto;\n  background-color: #fff;\n}\n.lb-promotion-main .lb-promotion-search {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row {\n  margin-bottom: 14px;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row .ListName {\n  text-align: right;\n  line-height: 32px;\n  color: #747474;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.promotion-page {\n  margin: 1rem 0 0 0;\n}\n.container {\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  padding: 1% 1% 3%;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-12 {\n  margin-bottom: 12px;\n}\n.margin-bottom-14 {\n  margin-bottom: 14px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.mb--12 {\n  margin-bottom: 12px;\n}\n.mb--14 {\n  margin-bottom: 14px;\n}\n.border-b--dashed {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.pd--20 {\n  padding: 20px;\n}\n.ml--50 {\n  margin-left: 50px;\n}\n.fr {\n  float: right;\n}\n.fl {\n  float: left;\n}\n.bg--white {\n  background: #fff;\n}\n.clearfix:after {\n  content: '';\n  display: block;\n  height: 0;\n  clear: both;\n}\n.text-center {\n  text-align: center;\n}\n.white {\n  background-color: white;\n}\n.select_box {\n  padding: 20px;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.ling_height {\n  padding-top: 15px;\n}\n.text_align_right {\n  text-align: right;\n}\n.text_align_center {\n  text-align: center;\n}\n.operation_box {\n  padding: 10px 20px;\n  text-align: right;\n}\n.page_right {\n  text-align: right;\n  padding: 10px 20px;\n}\n.input_width {\n  width: 120px;\n}\n.search_btn {\n  width: 100px;\n}\n.margin_bottom_0 {\n  margin-bottom: 0;\n}\n.ivu-breadcrumb a {\n  color: #999;\n}\n.ivu-breadcrumb {\n  font-size: 12px;\n}\n.ivu-breadcrumb > span:last-child {\n  color: #426196;\n}\n.box_shadow {\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-color: #eee;\n}\n.border_bottom_dashed {\n  border-bottom: 1px dashed #E8E8E8;\n}\n.problem_table .ivu-checkbox-wrapper {\n  margin-right: 0px;\n}\n.row-state {\n  height: 40px;\n  line-height: 40px;\n  font-size: 16px;\n}\n.row-title {\n  height: 40px;\n  line-height: 40px;\n  font-weight: bold;\n}\n",""])},2690:function(t,e,n){var r=n(2691);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(43)("00161865",r,!1,{})},2691:function(t,e,n){e=t.exports=n(42)(!1),e.push([t.i,"\n.but[data-v-30dca62c]{\n    text-align: center;\n    padding-bottom: 30px;\n    padding-top: 20px;\n}\n",""])},2692:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"row-state"},[n("Icon",{attrs:{type:"alert-circled"}}),t._v(" "),n("span",[t._v(" "+t._s(t.stateString))])],1)])],1),t._v(" "),n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"row-title"},[t._v("\n                退货信息\n            ")])])],1),t._v(" "),n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("Table",{attrs:{columns:t.columnsList,data:t.thisTableData,loading:t.loading}})],1)],1),t._v(" "),n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"row-title"},[t._v("\n                归属信息\n            ")])])],1),t._v(" "),n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("Table",{attrs:{columns:t.columnsListStock,data:t.thisTableDataStock,loading:t.loading}})],1)],1),t._v(" "),n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"row-title"},[t._v("\n                商品信息\n            ")])])],1),t._v(" "),n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("Table",{attrs:{columns:t.columnsListProduct,data:t.thisTableDataProduct,loading:t.loading}})],1)],1),t._v(" "),n("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[n("Col",{attrs:{span:"24"}},[n("div",{staticClass:"row-title"},[t._v("\n                退货备注\n            ")])])],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"12"}},[n("Input",{attrs:{type:"textarea",readonly:"",rows:4},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)],1),t._v(" "),n("row",{staticClass:"but"},[n("Button",{attrs:{type:"primary"},on:{click:function(e){t.goBack()}}},[t._v("返 回")]),t._v(" "),n("Button",{attrs:{type:"primary"},on:{click:function(e){t.print()}}},[t._v("打印页面")])],1)],1)},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};e.default=i},884:function(t,e,n){"use strict";function r(t){m||(n(2688),n(2690))}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1776),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var l=n(2692),s=n.n(l),m=!1,u=n(13),d=r,p=u(i.a,s.a,!1,d,"data-v-30dca62c",null);p.options.__file="src/views/trader-manage/return-manage/return-detail.vue",e.default=p.exports}});