webpackJsonp([166],{1738:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(65),i=r(a),o=n(38),l=(r(o),n(239)),d=r(l);t.default={data:function(){var e=this;return{sildeAomout:!1,page:1,loading:!1,columns1:[{title:"序号",align:"center",width:70,render:function(e,t){return t.row.addup?e("div","小计"):e("div",t.index+1)}},{title:"开票名称",align:"center",key:"openTicketName",width:150},{title:"收货单号",align:"center",key:"receiptOrderNo",width:180},{title:"对账单号",align:"center",key:"receiptBillNo",width:150},{title:"收货时间",key:"receiptTime",align:"center",width:120,render:function(t,n){return t("div",n.row.receiptTime?e.timestampToTime(n.row.receiptTime):"")}},{title:"已收金额",align:"center",key:"paymentPrice",width:100},{title:"订单编号",align:"center",key:"originalOrderNo",width:150},{title:"订单时间",key:"submitOrderTime",align:"center",width:120,render:function(t,n){return t("div",n.row.submitOrderTime?e.timestampToTime(n.row.submitOrderTime):"")}},{title:"应收金额",align:"center",key:"receiptPrice",width:100,render:function(e,t){return e("div",t.row.receiptPrice?Number(t.row.receiptPrice).toFixed(2):"0.00")}},{title:"预计收款日期",key:"expectedPaybackTime",align:"center",width:120,render:function(t,n){return t("div",n.row.expectedPaybackTime?e.timestampToTime(n.row.expectedPaybackTime):"")}},{title:"逾期天数",align:"center",key:"overdueDays",width:100},{title:"状态",align:"center",key:"chargeOffStatus",width:100,render:function(e,t){return t.row.addup?"":e("div",2==t.row.chargeOffStatus?"全部核销":1==t.row.chargeOffStatus?"部分已核销":"未核销")}}],columns_amount:[{title:"序号",align:"center",width:70,render:function(e,t){return t.row.addup?e("div","小计"):e("div",t.index+1)}},{title:"收货单号",align:"center",key:"receiptOrderNo",width:180},{title:"收款单号",align:"center",key:"receiptBillNo",width:150},{title:"收货时间",key:"receiptTime",align:"center",width:120,render:function(t,n){return t("div",n.row.receiptTime?e.timestampToTime(n.row.receiptTime):"")}},{title:"应收款",key:"receiptPrice",align:"center",width:100,render:function(e,t){return e("div",t.row.receiptPrice?Number(t.row.receiptPrice).toFixed(2):"0.00")}},{title:"订单编号",key:"originalOrderNo",align:"center",width:120},{title:"预收抵减",align:"center",key:"advanceFee",width:100,render:function(e,t){return e("div",t.row.advanceFee?Number(t.row.advanceFee).toFixed(2):"0.00")}},{title:"尾差核销",align:"center",key:"tailChargeOffAmount",width:100,render:function(e,t){return e("div",t.row.tailChargeOffAmount?Number(t.row.tailChargeOffAmount).toFixed(2):"0.00")}},{title:"费用抵减",align:"center",key:"compensatingAmount",width:100,render:function(e,t){return e("div",t.row.compensatingAmount?Number(t.row.compensatingAmount).toFixed(2):"0.00")}},{title:"抵减说明",align:"center",key:"compensatingNote",width:100,ellipsis:!0,tooltip:!0,render:function(e,t){var n="";if(null!==t.row.compensatingNote&&void 0!==t.row.compensatingNote&&""!==t.row.compensatingNote)return n=t.row.note.length>5?t.row.compensatingNote.substring(0,5)+"...":t.row.compensatingNote,e("Tooltip",{props:{placement:"top",offset:0,transfer:!0}},[n,e("div",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},t.row.compensatingNote)])}},{title:"退货抵减",align:"center",key:"refundAmount",width:100,render:function(e,t){return e("div",t.row.refundAmount?Number(t.row.refundAmount).toFixed(2):"0.00")}},{title:"实收金额",align:"center",key:"paymentPrice",width:100,render:function(e,t){return e("div",t.row.paymentPrice?Number(t.row.paymentPrice).toFixed(2):"0.00")}},{title:"核销金额",align:"center",key:"chargeOffAmount",width:100,render:function(e,t){return e("div",t.row.chargeOffAmount?Number(t.row.chargeOffAmount).toFixed(2):"0.00")}},{title:"备注",align:"center",key:"note",width:100,ellipsis:!0,tooltip:!0,render:function(e,t){var n="";if(null!==t.row.note&&void 0!==t.row.note&&""!==t.row.note)return n=t.row.note.length>5?t.row.note.substring(0,5)+"...":t.row.note,e("Tooltip",{props:{placement:"top",offset:0,transfer:!0}},[n,e("div",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},t.row.note)])}},{title:"状态",align:"center",key:"chargeOffStatus",width:100,render:function(e,t){return t.row.addup?"":e("div",2==t.row.chargeOffStatus?"全部核销":1==t.row.chargeOffStatus?"部分已核销":"未核销")}}],data1:[],paymentPriceAll:0,paymentPrice:0,chargeOffAmount:0,columns:[{title:"序号",align:"center",width:70,render:function(e,t){return t.row.addup?e("div","小计"):e("div",t.index+1)}},{title:"单号",key:"refundBillNo",align:"center"},{title:"单据类型",key:"billType",align:"center",width:120},{title:"业务时间",align:"center",key:"refundTime",width:100,render:function(t,n){return t("div",n.row.refundTime?e.timestampToTime(n.row.refundTime):"")}},{title:"金额",align:"center",key:"refundAmount",width:100,render:function(e,t){return e("div",t.row.refundAmount?Number(t.row.refundAmount).toFixed(2):"0.00")}},{title:"剩余金额",align:"center",key:"restAmount",width:100,render:function(e,t){return e("div",t.row.restAmount?Number(t.row.restAmount).toFixed(2):"0.00")}},{title:"业务员",align:"center",key:"refundUser",width:100},{title:"备注",align:"center",key:"refundReason",ellipsis:!0,tooltip:!0,render:function(e,t){var n="";if(null!==t.row.refundReason&&void 0!==t.row.refundReason&&""!==t.row.refundReason)return n=t.row.refundReason.length>5?t.row.refundReason.substring(0,5)+"...":t.row.refundReason,e("Tooltip",{props:{placement:"top",offset:0,transfer:!0}},[n,e("div",{slot:"content",style:{whiteSpace:"normal",wordBreak:"break-all"}},t.row.refundReason)])}},{title:"状态",align:"center",key:"chargeOffStatus",width:100,render:function(e,t){return t.row.addup?"":e("div",2==t.row.chargeOffStatus?"全部核销":1==t.row.chargeOffStatus?"部分已核销":"未核销")}}],data:[],formItem:[{id:"",name:"请选择"},{id:4,name:"现金"},{id:1,name:"银行卡"},{id:2,name:"支付宝"},{id:3,name:"微信"},{id:5,name:"其他"}],typeList:[{value:1,label:"是"},{value:0,label:"否"},{value:2,label:"全部"}],value:{startTime:"",endTime:"",openTicketName:JSON.parse(this.$route.query.data).openTicketName,ifOverdue:1,originalOrderNo:"",operateAccount:"",receiptOrderNo:"",storeName:JSON.parse(this.$route.query.data).storeName,storeCode:JSON.parse(this.$route.query.data).storeCode,customizeClientId:JSON.parse(this.$route.query.data).customizeClientId,page:1},refundAmount:0,restAmount:0,addRecepitOrderNo:0,addRefundBillNo:0}},mounted:function(){this.value.startTime=JSON.parse(this.$route.query.data).startTime,this.value.endTime=JSON.parse(this.$route.query.data).endTime,this.timeSlide(),1==this.$route.query.type?(this.sildeAomout=!1,this.detail()):(this.columns1=this.columns_amount,this.sildeAomout=!0,this.queryChargeOffByTJ())},methods:{timeSlide:function(){var e=new Date(this.value.startTime);this.value.startTime=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var t=new Date(this.value.endTime);this.value.endTime=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},detail:function(){var e=this;e.timeSlide(),this.$util.ajax({method:"post",contentType:"application/json;charset=UTF-8",dataType:"json",url:e.$util.apiConfig.traderManage.flowManage.shouldReceiptAccount.queryReceivablesDetail,data:d.default.stringify(this.value)}).then(function(t){if("200"==t.data.code){if(e.data=t.data.result.rorLists,e.data1=t.data.result.rrLists,t.data.result.rorLists.length>=1){var n=0,r=0;for(var a in e.data)n+=Number(Number(e.data[a].refundAmount).toFixed(2)),r+=Number(Number(e.data[a].restAmount).toFixed(2));e.refundAmount=n,e.restAmount=r,e.data.push({addup:1,refundAmount:n,restAmount:r})}if(t.data.result.rrLists.length>=1){var i=0,o=0;for(var l in e.data1)i+=Number(Number(e.data1[l].paymentPrice).toFixed(2)),o+=Number(Number(e.data1[l].receiptPrice).toFixed(2));e.paymentPriceAll=o,e.data1.push({addup:1,paymentPrice:i,receiptPrice:o})}}}).catch(function(e){console.log("失败信息：",e)})},queryChargeOffByTJ:function(){var e=this;e.timeSlide();var t={storeCode:this.value.storeCode,startTime:this.value.startTime,endTime:this.value.endTime,storeName:this.value.storeName,originalOrderNo:this.value.originalOrderNo,operateAccount:this.value.operateAccount,receiptOrderNo:this.value.receiptOrderNo};this.$util.ajax({method:"post",contentType:"application/json;charset=UTF-8",dataType:"json",url:e.$util.apiConfig.traderManage.flowManage.shouldReceiptAccount.queryChargeOffByTJ,data:d.default.stringify(t)}).then(function(t){if("200"==t.data.code){if(e.data=t.data.result.rvoList,e.data1=t.data.result.voList,t.data.result.rvoList.length>=1){var n=0,r=0;for(var a in e.data)n+=Number(Number(e.data[a].refundAmount).toFixed(2)),r+=Number(Number(e.data[a].restAmount).toFixed(2));e.refundAmount=n,e.restAmount=r,e.data.push({addup:1,refundAmount:n,restAmount:r})}if(t.data.result.voList.length>=1){var i=0,o=0,l=0,d=0,s=0,u=0,c=0;for(var p in e.data1)i+=Number(Number(e.data1[p].receiptPrice).toFixed(2)),o+=Number(Number(e.data1[p].advanceFee).toFixed(2)),l+=Number(Number(e.data1[p].tailChargeOffAmount).toFixed(2)),d+=Number(Number(e.data1[p].compensatingAmount).toFixed(2)),s+=Number(Number(e.data1[p].refundAmount).toFixed(2)),u+=Number(Number(e.data1[p].paymentPrice).toFixed(2)),c+=Number(Number(e.data1[p].chargeOffAmount).toFixed(2));e.paymentPriceAll=i.toFixed(2),e.paymentPrice=u.toFixed(2),e.chargeOffAmount=c.toFixed(2),e.data1.push({addup:1,receiptPrice:i,advanceFee:o,tailChargeOffAmount:l,compensatingAmount:d,refundAmount:s,paymentPrice:u,chargeOffAmount:c})}}}).catch(function(e){console.log("失败信息：",e)})},queryDetail:function(){1==this.$route.query.type?this.detail(1):this.queryChargeOffByTJ()},creatData:function(){this.timeSlide(),this.$router.push({name:"should-receipt-account-view",query:{data:(0,i.default)({startTime:this.value.startTime,endTime:this.value.endTime,customizeClientId:this.value.customizeClientId,openTicketName:this.value.openTicketName})}})},timestampToTime:function(e){var t=new Date(e),n=t.getFullYear()+"-",r=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",a=t.getDate()+" ";t.getHours(),t.getMinutes(),t.getSeconds();return n+r+a}},created:function(){},components:{}}},2524:function(e,t,n){var r=n(2525);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(43)("42a8a3c1",r,!1,{})},2525:function(e,t,n){t=e.exports=n(42)(!1),t.push([e.i,"\n.width-100 {\n  width: 100%;\n}\n.lb-left {\n  float: left;\n}\n.lb-right {\n  float: right;\n}\n.lb-center {\n  text-align: center;\n}\n.lb-promotion-main {\n  height: auto;\n  background-color: #fff;\n}\n.lb-promotion-main .lb-promotion-search {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row {\n  margin-bottom: 14px;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row .ListName {\n  text-align: right;\n  line-height: 32px;\n  color: #747474;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.promotion-page {\n  margin: 1rem 0 0 0;\n}\n.container {\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  padding: 1% 1% 3%;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-12 {\n  margin-bottom: 12px;\n}\n.margin-bottom-14 {\n  margin-bottom: 14px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.mb--12 {\n  margin-bottom: 12px;\n}\n.mb--14 {\n  margin-bottom: 14px;\n}\n.border-b--dashed {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.pd--20 {\n  padding: 20px;\n}\n.ml--50 {\n  margin-left: 50px;\n}\n.fr {\n  float: right;\n}\n.fl {\n  float: left;\n}\n.bg--white {\n  background: #fff;\n}\n.clearfix:after {\n  content: '';\n  display: block;\n  height: 0;\n  clear: both;\n}\n.text-center {\n  text-align: center;\n}\n.white {\n  background-color: white;\n}\n.select_box {\n  padding: 20px;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.ling_height {\n  padding-top: 15px;\n}\n.text_align_right {\n  text-align: right;\n}\n.text_align_center {\n  text-align: center;\n}\n.operation_box {\n  padding: 10px 20px;\n  text-align: right;\n}\n.page_right {\n  text-align: right;\n  padding: 10px 20px;\n}\n.input_width {\n  width: 120px;\n}\n.search_btn {\n  width: 100px;\n}\n.margin_bottom_0 {\n  margin-bottom: 0;\n}\n.ivu-breadcrumb a {\n  color: #999;\n}\n.ivu-breadcrumb {\n  font-size: 12px;\n}\n.ivu-breadcrumb > span:last-child {\n  color: #426196;\n}\n.box_shadow {\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-color: #eee;\n}\n.border_bottom_dashed {\n  border-bottom: 1px dashed #E8E8E8;\n}\n.problem_table .ivu-checkbox-wrapper {\n  margin-right: 0px;\n}\n",""])},2526:function(e,t,n){var r=n(2527);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n(43)("27bf34ff",r,!1,{})},2527:function(e,t,n){t=e.exports=n(42)(!1),t.push([e.i,"\n.accountBg[data-v-3245f106]{\n    width:100%;\n    height: 100%;\n    background:#fff;\n    color:#747474;\n    padding:20px 0;\n}\n.head[data-v-3245f106]{\n    padding: 20px;\n}\n.content[data-v-3245f106]{\n    padding: 20px;\n}\n.audit_title[data-v-3245f106]{\n    height: 45px;\n    line-height: 45px;\n    font-size: 20px;\n    color: #747474;\n    padding-left: 20px;\n    font-weight: bold;\n}\n.queryLeft[data-v-3245f106]{\n    height: 32px;\n    line-height: 32px;\n}\n.creatForm[data-v-3245f106]{\n    height: 60px;\n    line-height: 60px;\n    margin: 15px;\n    background: #f1f1f1;\n}\n\n",""])},2528:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"accountBg"},[n("Row",{staticClass:"head"},[n("Row",[n("Col",{attrs:{span:"6"}},[n("Col",{staticClass:"queryLeft",attrs:{span:"6"}},[e._v("开始时间 :")]),e._v(" "),n("Col",{attrs:{span:"18"}},[n("DatePicker",{attrs:{type:"date",name:"startTime",placeholder:"开始时间"},model:{value:e.value.startTime,callback:function(t){e.$set(e.value,"startTime",t)},expression:"value.startTime"}})],1)],1),e._v(" "),n("Col",{attrs:{span:"6"}},[n("Col",{staticClass:"queryLeft",attrs:{span:"6"}},[e._v("截止时间 :")]),e._v(" "),n("Col",{attrs:{span:"18"}},[n("DatePicker",{attrs:{type:"date",name:"endTime",placeholder:"截止时间"},model:{value:e.value.endTime,callback:function(t){e.$set(e.value,"endTime",t)},expression:"value.endTime"}})],1)],1),e._v(" "),n("Col",{staticClass:"queryLeft",attrs:{span:"6"}},[n("Col",{attrs:{span:"6"}},[e._v("门店名称 :")]),e._v("\n            "+e._s(e.value.storeName)+"\n            ")],1),e._v(" "),n("Col",{directives:[{name:"show",rawName:"v-show",value:!e.sildeAomout,expression:"!sildeAomout"}],staticClass:"queryLeft",attrs:{span:"6"}},[n("Col",{attrs:{span:"6"}},[e._v("是否逾期 :")]),e._v(" "),n("Col",{attrs:{span:"18"}},[n("Select",{staticStyle:{width:"80px"},model:{value:e.value.ifOverdue,callback:function(t){e.$set(e.value,"ifOverdue",t)},expression:"value.ifOverdue"}},e._l(e.typeList,function(t){return n("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)],1)],1),e._v(" "),n("Row",{staticStyle:{"padding-top":"30px"}},[n("Col",{attrs:{span:"6"}},[n("Col",{staticClass:"queryLeft",attrs:{span:"6"}},[e._v("订单号 :")]),e._v(" "),n("Col",{attrs:{span:"18"}},[n("Input",{staticStyle:{width:"85%"},attrs:{clearabl:""},model:{value:e.value.originalOrderNo,callback:function(t){e.$set(e.value,"originalOrderNo",t)},expression:"value.originalOrderNo"}})],1)],1),e._v(" "),n("Col",{attrs:{span:"6"}},[n("Col",{staticClass:"queryLeft",attrs:{span:"6"}},[e._v("下单账号 :")]),e._v(" "),n("Col",{attrs:{span:"18"}},[n("Input",{staticStyle:{width:"85%"},attrs:{clearabl:""},model:{value:e.value.operateAccount,callback:function(t){e.$set(e.value,"operateAccount",t)},expression:"value.operateAccount"}})],1)],1),e._v(" "),n("Col",{attrs:{span:"6"}},[n("Col",{staticClass:"queryLeft",attrs:{span:"6"}},[e._v("收货单号 :")]),e._v(" "),n("Col",{attrs:{span:"18"}},[n("Input",{staticStyle:{width:"85%"},attrs:{clearabl:""},model:{value:e.value.receiptOrderNo,callback:function(t){e.$set(e.value,"receiptOrderNo",t)},expression:"value.receiptOrderNo"}})],1)],1),e._v(" "),n("Col",{staticClass:"queryLeft",staticStyle:{"text-align":"center"},attrs:{span:"6"}},[n("Button",{staticClass:"query",staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:function(t){e.queryDetail()}}},[e._v("查询 ")])],1)],1)],1),e._v(" "),n("row",[n("row",{directives:[{name:"show",rawName:"v-show",value:!e.sildeAomout,expression:"!sildeAomout"}],staticClass:"creatForm"},[n("Col",{staticStyle:{"font-size":"20px","padding-left":"20px"},attrs:{span:"11"}},[e._v("\n            应收总额："+e._s((Number(e.paymentPriceAll)-Number(e.restAmount)).toFixed(2))+"元 = "+e._s(Number(e.paymentPriceAll).toFixed(2))+" - "+e._s(Number(e.restAmount).toFixed(2))+"\n            ")]),e._v(" "),n("Col",{attrs:{span:"3"}}),e._v(" "),n("Col",{staticStyle:{"text-align":"center",float:"right"},attrs:{span:"6"}},[n("Button",{staticClass:"query",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.creatData}},[e._v("创建对账单 ")])],1)],1),e._v(" "),n("row",{directives:[{name:"show",rawName:"v-show",value:e.sildeAomout,expression:"sildeAomout"}],staticClass:"creatForm"},[n("Col",{staticStyle:{"font-size":"20px","padding-left":"20px"},attrs:{span:"6"}},[e._v("\n            应收总额："+e._s(e.paymentPriceAll)+"\n            ")]),e._v(" "),n("Col",{staticStyle:{"font-size":"20px","padding-left":"20px"},attrs:{span:"6"}},[e._v("\n            实收金额："+e._s(e.paymentPrice)+"\n            ")]),e._v(" "),n("Col",{staticStyle:{"font-size":"20px","padding-left":"20px"},attrs:{span:"6"}},[e._v("\n            核销总额："+e._s(e.chargeOffAmount)+"\n            ")])],1)],1),e._v(" "),n("div",{staticClass:"content"},[n("p",{staticClass:"audit_title"},[e._v("收货单核销明细")]),e._v(" "),n("Table",{staticClass:"table",attrs:{loading:e.loading,columns:e.columns1,data:e.data1}}),e._v(" "),n("p",{staticClass:"audit_title"},[e._v("退货单核销明细(按抵减关联查询退货单)")]),e._v(" "),n("Table",{staticClass:"table",attrs:{loading:e.loading,columns:e.columns,data:e.data}})],1)],1)},a=[];r._withStripped=!0;var i={render:r,staticRenderFns:a};t.default=i},852:function(e,t,n){"use strict";function r(e){s||(n(2524),n(2526))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(1738),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,function(){return a[e]})}(o);var l=n(2528),d=n.n(l),s=!1,u=n(13),c=r,p=u(i.a,d.a,!1,c,"data-v-3245f106",null);p.options.__file="src/views/trader-manage/flow-manage/should-receipt-account/should-receipt-account-listDetail.vue",t.default=p.exports}});