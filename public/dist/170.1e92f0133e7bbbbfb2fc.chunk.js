webpackJsonp([170],{1728:function(e,n,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var i=t(65),r=a(i),o=t(38),l=(a(o),t(239)),d=a(l);n.default={data:function(){var e=this;return{spinShow:!1,deleteModal:!1,loadingModal:!1,totalCount:0,page:1,loading:!1,columns:[{title:"序号",type:"index",align:"center",width:62},{title:"开票名称",key:"openTicketName",align:"center",width:120},{title:"核销单号",key:"verificationBillNo",align:"center",width:150},{title:"对账单号",align:"center",key:"receiptBillNo",width:100},{title:"应收款金额",align:"center",key:"receivable",width:100,render:function(e,n){if("小计"!=n.row.openTicketName&&"总计"!=n.row.openTicketName)return e("div",n.row.receivable?n.row.receivable.toFixed(2):"0.00")}},{title:"预收抵减",align:"center",key:"advanceFee",width:100,render:function(e,n){return e("div",n.row.advanceFee?n.row.advanceFee.toFixed(2):"0.00")}},{title:"尾差核销",align:"center",key:"diff",width:100,render:function(e,n){return e("div",n.row.diff?Number(n.row.diff).toFixed(2):"0.00")}},{title:"费用抵减",align:"center",key:"fee",width:100,render:function(e,n){return e("div",n.row.fee?Number(n.row.fee).toFixed(2):"0.00")}},{title:"退货抵减",align:"center",key:"refund",width:100,render:function(e,n){return e("div",n.row.refund?Number(n.row.refund).toFixed(2):"0.00")}},{title:"实收金额",align:"center",key:"netReceipts",width:100,render:function(e,n){return e("div",n.row.netReceipts?Number(n.row.netReceipts).toFixed(2):"0.00")}},{title:"本次核销金额",align:"center",key:"verification",width:110,render:function(e,n){return e("div",n.row.verification?Number(n.row.verification).toFixed(2):"0.00")}},{title:"剩余核销金额",align:"center",key:"reVerification",width:110,render:function(e,n){return""===n.row.reVerification?e("div",n.row.reVerification):e("div",n.row.reVerification?Number(n.row.reVerification).toFixed(2):"0.00")}},{title:"更新时间",align:"center",key:"user",width:160,render:function(n,t){return n("div",t.row.verificationDate?e.timestampToTime(t.row.verificationDate):"")}},{title:"操作",align:"center",key:"handle",fixed:"right",width:125,render:function(n,t){if("小计"!=t.row.openTicketName&&"总计"!=t.row.openTicketName){var a=[n("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.$router.push({name:"audit-order-manage-view",query:{verificationBillNo:t.row.verificationBillNo}})}}},"查看")];return 0!=t.row.verificationBillType&&null!=t.row.verificationBillType||a.unshift(n("Button",{props:{size:"small"},style:{marginRight:"5px",color:"red"},on:{click:function(){e.deleteModal=!0,e.redFlushBillNo=t.row.verificationBillNo}}},"红冲")),n("div",a)}}}],data:[],formItem:[{id:"",name:"请选择"},{id:4,name:"现金"},{id:1,name:"银行卡"},{id:2,name:"支付宝"},{id:3,name:"微信"},{id:5,name:"其他"}],formItemTextArray:{"请选择":"","现金":4,"银行卡":1,"支付宝":2,"微信":3,"其他":5},value:{startTime:"",endTime:"",verificationBillNo:"",receiptBillNo:"",openTicketName:"",type:"",startIndex:"",pageSize:10},redFlushBillNo:""}},mounted:function(){this.queryData(1)},methods:{queryData:function(e){var n=this;n.loading=!0,n.page=e,n.value.startIndex=10*(Number(e)-1);var t=JSON.parse((0,r.default)(n.value));t.type=n.formItemTextArray[n.value.type],""==t.type&&delete t.type,this.$util.ajax({method:"post",url:n.$util.apiConfig.traderManage.flowManage.auditManage.list,data:t}).then(function(e){if(n.loading=!1,"200"==e.data.code){if(n.data=[],n.totalCount=e.data.result.total,0!=e.data.result.list.length){n.data=e.data.result.list;var t={advanceFee:0,diff:0,fee:0,refund:0,netReceipts:0,verification:0,receipts:0,reVerification:0};for(var a in t)for(var i in n.data)t[a]+=Number(n.data[i][a]);t.openTicketName="小计",t.reVerification="",n.data.push(t);var r=e.data.result.calcSum;r.reVerification="",r.netReceipts=r.receipts,r.openTicketName="总计",n.data.push(r)}console.log(n.data)}else n.$Modal.error({title:"提示",content:e.data.message})}).catch(function(e){n.loading=!1,console.log("失败信息：",e)})},asyncOK:function(){var e=this,n=this;this.loadingModal=!0,this.spinShow=!0,this.$util.ajax({method:"post",url:n.$util.apiConfig.traderManage.flowManage.auditManage.redFlush,data:d.default.stringify({verificationBillNo:this.redFlushBillNo})}).then(function(t){e.spinShow=!1,"200"==t.data.code?(n.queryData(1),n.$Modal.success({title:"提示",content:t.data.message,onOk:function(){e.loadingModal=!1}})):n.$Modal.error({title:"提示",content:"红冲失败，请检查数据!",onOk:function(){e.loadingModal=!1}})}).catch(function(e){console.log("失败信息：",e)})},timestampToTime:function(e){var n=new Date(e);return n.getFullYear()+"-"+(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()},getEndTime:function(e){this.value.endTime=e},getStartTime:function(e){this.value.startTime=e}},created:function(){},components:{}}},2480:function(e,n,t){var a=t(2481);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(43)("a3679f46",a,!1,{})},2481:function(e,n,t){n=e.exports=t(42)(!1),n.push([e.i,"\n.width-100 {\n  width: 100%;\n}\n.lb-left {\n  float: left;\n}\n.lb-right {\n  float: right;\n}\n.lb-center {\n  text-align: center;\n}\n.lb-promotion-main {\n  height: auto;\n  background-color: #fff;\n}\n.lb-promotion-main .lb-promotion-search {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row {\n  margin-bottom: 14px;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row .ListName {\n  text-align: right;\n  line-height: 32px;\n  color: #747474;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.promotion-page {\n  margin: 1rem 0 0 0;\n}\n.container {\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  padding: 1% 1% 3%;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-12 {\n  margin-bottom: 12px;\n}\n.margin-bottom-14 {\n  margin-bottom: 14px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.mb--12 {\n  margin-bottom: 12px;\n}\n.mb--14 {\n  margin-bottom: 14px;\n}\n.border-b--dashed {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.pd--20 {\n  padding: 20px;\n}\n.ml--50 {\n  margin-left: 50px;\n}\n.fr {\n  float: right;\n}\n.fl {\n  float: left;\n}\n.bg--white {\n  background: #fff;\n}\n.clearfix:after {\n  content: '';\n  display: block;\n  height: 0;\n  clear: both;\n}\n.text-center {\n  text-align: center;\n}\n.white {\n  background-color: white;\n}\n.select_box {\n  padding: 20px;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.ling_height {\n  padding-top: 15px;\n}\n.text_align_right {\n  text-align: right;\n}\n.text_align_center {\n  text-align: center;\n}\n.operation_box {\n  padding: 10px 20px;\n  text-align: right;\n}\n.page_right {\n  text-align: right;\n  padding: 10px 20px;\n}\n.input_width {\n  width: 120px;\n}\n.search_btn {\n  width: 100px;\n}\n.margin_bottom_0 {\n  margin-bottom: 0;\n}\n.ivu-breadcrumb a {\n  color: #999;\n}\n.ivu-breadcrumb {\n  font-size: 12px;\n}\n.ivu-breadcrumb > span:last-child {\n  color: #426196;\n}\n.box_shadow {\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-color: #eee;\n}\n.border_bottom_dashed {\n  border-bottom: 1px dashed #E8E8E8;\n}\n.problem_table .ivu-checkbox-wrapper {\n  margin-right: 0px;\n}\n.audit-order-manage {\n  width: 100%;\n  height: 100%;\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  text-align: center;\n  padding: 10px 0;\n}\n.audit-order-manage .head {\n  padding: 20px 0;\n}\n.audit-order-manage .head .head_left {\n  padding: 10px 0;\n  border-right: 1px dashed #E8E8E8;\n}\n.audit-order-manage .head .head_left .payment {\n  width: 50%;\n}\n.audit-order-manage .head .head_left #verificationNumber {\n  width: 50%;\n}\n.audit-order-manage .head .head_left #advanceNumber {\n  width: 50%;\n}\n.audit-order-manage .head .head_left #storeName {\n  width: 50%;\n}\n.audit-order-manage .head .head_left .date {\n  width: 50%;\n}\n.audit-order-manage .head .head_left .hl2 {\n  margin-top: 10px;\n}\n.audit-order-manage .head .head_right .query {\n  margin-bottom: 10px;\n}\n.audit-order-manage .table {\n  margin: 1%;\n}\n.audit-order-manage .page {\n  text-align: right;\n  margin-right: 1%;\n}\n.ivu-table-row-highlight td,\ntr.ivu-table-row-highlight.ivu-table-row-hover td {\n  background: red;\n  color: #fff;\n}\n",""])},2482:function(e,n,t){var a=t(2483);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(43)("845dcb52",a,!1,{})},2483:function(e,n,t){n=e.exports=t(42)(!1),n.push([e.i,"\n.demo-spin-icon-load[data-v-00836f4f] {\n  animation: ani-demo-spin-data-v-00836f4f 1s linear infinite;\n}\n@keyframes ani-demo-spin-data-v-00836f4f {\nfrom {\n    transform: rotate(0deg);\n}\n50% {\n    transform: rotate(180deg);\n}\nto {\n    transform: rotate(360deg);\n}\n}\n",""])},2484:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"audit-order-manage",staticStyle:{position:"relative"}},[e.spinShow?t("Spin",{staticStyle:{position:"fixed",left:"85px"},attrs:{size:"large",fix:""}},[t("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-refresh",color:"#2d8cf0",size:"38"}}),e._v(" "),t("div",[e._v("Loading")])],1):e._e(),e._v(" "),t("Row",{staticClass:"head"},[t("Col",{staticClass:"head_left",attrs:{span:"18"}},[t("Row",[t("Col",{attrs:{span:"8"}},[e._v("\n                    创建时间 : \n                    "),t("DatePicker",{staticClass:"date",attrs:{type:"date",value:e.value.startTime},on:{"on-change":e.getStartTime}})],1),e._v(" "),t("Col",{attrs:{span:"8"}},[e._v("\n                    截止时间 : \n                    "),t("DatePicker",{staticClass:"date",attrs:{type:"date",value:e.value.endTime},on:{"on-change":e.getEndTime}})],1),e._v(" "),t("Col",{attrs:{span:"8"}},[e._v("\n                    收款方式 :\n                    "),t("Select",{staticClass:"payment",attrs:{placeholder:"请选择"},model:{value:e.value.type,callback:function(n){e.$set(e.value,"type",n)},expression:"value.type"}},e._l(e.formItem,function(n){return t("Option",{key:n.id,attrs:{value:n.name}},[e._v(e._s(n.name))])}))],1)],1),e._v(" "),t("Row",{staticClass:"hl2"},[t("Col",{attrs:{span:"8"}},[t("label",{attrs:{for:"verificationNumber"}},[e._v("核销单号 :  ")]),t("Input",{attrs:{id:"verificationNumber"},model:{value:e.value.verificationBillNo,callback:function(n){e.$set(e.value,"verificationBillNo",n)},expression:"value.verificationBillNo"}})],1),e._v(" "),t("Col",{attrs:{span:"8"}},[t("label",{attrs:{for:"storeName"}},[e._v("对账单 :  ")]),t("Input",{attrs:{id:"storeName"},model:{value:e.value.receiptBillNo,callback:function(n){e.$set(e.value,"receiptBillNo",n)},expression:"value.receiptBillNo"}})],1),e._v(" "),t("Col",{attrs:{span:"8"}},[t("label",{attrs:{for:"advanceNumber"}},[e._v("开票名称 :  ")]),t("Input",{attrs:{id:"advanceNumber"},model:{value:e.value.openTicketName,callback:function(n){e.$set(e.value,"openTicketName",n)},expression:"value.openTicketName"}})],1)],1)],1),e._v(" "),t("Col",{staticClass:"head_right",attrs:{span:"6"}},[t("br"),t("br"),t("Button",{staticClass:"query",on:{click:function(n){e.queryData(1)}}},[e._v("查询 ")])],1)],1),e._v(" "),t("Table",{staticClass:"table",attrs:{loading:e.loading,columns:e.columns,data:e.data}}),e._v(" "),t("Page",{attrs:{current:e.page,total:e.totalCount,"show-total":"","show-elevator":"","class-name":"page"},on:{"on-change":e.queryData}}),e._v(" "),t("Modal",{attrs:{title:"提示",loading:e.loadingModal},on:{"on-ok":e.asyncOK},model:{value:e.deleteModal,callback:function(n){e.deleteModal=n},expression:"deleteModal"}},[t("h2",[e._v("确定要红冲吗？")]),e._v(" "),t("h5",{staticStyle:{color:"rgb(169, 169, 169)","font-size":"14px"}},[e._v("待生成的核销号："+e._s(e.redFlushBillNo))])])],1)},i=[];a._withStripped=!0;var r={render:a,staticRenderFns:i};n.default=r},843:function(e,n,t){"use strict";function a(e){c||(t(2480),t(2482))}Object.defineProperty(n,"__esModule",{value:!0});var i=t(1728),r=t.n(i);for(var o in i)"default"!==o&&function(e){t.d(n,e,function(){return i[e]})}(o);var l=t(2484),d=t.n(l),c=!1,s=t(13),p=a,u=s(r.a,d.a,!1,p,"data-v-00836f4f",null);u.options.__file="src/views/trader-manage/flow-manage/audit-order-manage/audit-order-manage.vue",n.default=u.exports}});