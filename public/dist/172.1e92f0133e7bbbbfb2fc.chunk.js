webpackJsonp([172],{1581:function(t,n,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var o=e(38),i=(a(o),e(239)),r=a(i);n.default={data:function(){var t=this;return{totalCount:1,loading:!1,columns:[{title:"政策编号",key:"policyid",align:"center"},{title:"品牌",align:"center",key:"brand"},{title:"品类",align:"center",key:"school"},{title:"分类",align:"center",key:"sort"},{title:"类型",align:"center",key:"types"},{title:"政策标题",align:"center",key:"headline"},{title:"开始时间",align:"center",key:"startDate"},{title:"结束时间",align:"center",key:"endDate"},{title:"附件",align:"center",key:"attachment",render:function(n,e){return n("div",[n("Button",{on:{click:function(){t.download(e.row.attachment)}}},"下载")])}},{title:"操作",align:"center",key:"handle",render:function(n,e){return n("div",[n("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.show(e.index)}}},"查看详情")])}}],data:[],saveData:[],formItem:{brand:[],brand2:[{id:0,name:"全部"}],school:[],school2:[],saveSchool:[],saveSchool2:[{id:0,name:"全部"}],sort:[{id:0,name:"全部"},{id:1,name:"一帮卖"},{id:2,name:"二帮卖"}],types:[{id:0,name:"全部"},{id:1,name:"买赠"},{id:2,name:"返利"},{id:3,name:"特价"},{id:4,name:"纯费用"},{id:5,name:"秒杀"},{id:6,name:"众筹"}],state:[{id:0,name:"全部"},{id:1,name:"已发布"},{id:2,name:"已下架"}]},value:{brand:0,brand2:0,school:0,school2:0,policy:"",sort:0,types:0,state:0,startDate:"",endDate:""},page:1,params:{},pname:"",createDateOptions:{disabledDate:function(n){return n&&n.valueOf()+864e5-1<new Date(t.value.startDate)}}}},mounted:function(){},methods:{getFormItem:function(){var t=this;this.$ajax({method:"post",url:this.$util.apiConfig.promotionManage.warAdviser.promotionSourceList.category}).then(function(n){n.data.itemCategory11List.map(function(n){var e={id:n.cid,name:n.cName};t.formItem.brand.push(e),t.formItem.brand2.push(e)}),n.data.itemCategory21List.map(function(n){var e={id:n.cid,name:n.cName,parentCid:n.parentCid,type:n.sortNumber};t.formItem.school.push(e),t.formItem.school2.push(e)})}).catch(function(t){console.log("失败信息：",t)})},getData:function(){var t=this;this.data=[];var n={};this.params.page=this.page,n=this.params,this.loading=!0,this.$util.ajax({method:"post",url:this.$util.apiConfig.promotionManage.warAdviser.promotionSourceList.queryList,data:r.default.stringify(n)}).then(function(n){t.loading=!1,t.totalCount=n.data.result.pager.totalCount,n.data.result.pager.records.map(function(n){var e="";1==n.classfiy?e="一帮卖":2==n.classfiy&&(e="二帮卖");var a="";1==n.type?a="买赠":2==n.type?a="返利":3==n.type?a="特价":4==n.type?a="纯费用":5==n.type?a="秒杀":6==n.type&&(a="众筹");var o={policyid:n.id,brand:n.brandName,school:n.cname,sort:e,types:a,headline:n.title,startDate:t.formatDate(n.beginDate,"yyyy-MM-DD"),endDate:t.formatDate(n.endDate,"yyyy-MM-DD"),attachment:n.attachment};t.data.push(o),t.saveData.push(o)})}).catch(function(t){console.log("失败信息：",t)})},query:function(){var t=this.value,n={},e="";this.formItem.brand.map(function(n){n.id==t.brand&&(e=n.name)});var a="";this.formItem.saveSchool.map(function(n){n.id==t.school&&(a=n.name)}),n.beginDate=t.startDate,n.endDate=t.endDate,n.brandId=t.brand,n.brandName=e,n.cid=t.school,n.cname=a,n.status=t.state,n.title=t.policy,0==t.sort?n.classfiy="":n.classfiy=t.sort,0==t.types?n.type="":n.type=t.types,this.params=n,this.page=1,this.getData()},formatDate:function(t,n){if(""===t)return"";var e=new Date;if(e.setTime(t),!n)var n="yyyy-MM-DD hh:mm:ss";var a={"M+":e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,"D+":e.getDate()<10?"0"+e.getDate():e.getDate(),"h+":e.getHours()<10?"0"+e.getHours():e.getHours(),"m+":e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),"s+":e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()};/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in a)new RegExp("("+o+")").test(n)&&(n=n.replace(RegExp.$1,1===RegExp.$1.length?a[o]:("00"+a[o]).substr((""+a[o]).length)));return n},change:function(t){var n=this;this.formItem.saveSchool=[],this.value.school="",this.formItem.school.map(function(e){if(t==e.parentCid){var a={id:e.id,name:e.name,parentCid:e.parentCid,type:e.type};n.formItem.saveSchool.push(a)}})},changePage:function(t){this.page=t,this.getData()},change2:function(t){var n=this;this.formItem.saveSchool2=[],this.value.school2="";var e={id:0,name:"全部"};this.formItem.saveSchool2.push(e),this.formItem.school2.map(function(e){if(t==e.parentCid){var a={id:e.id,name:e.name,parentCid:e.parentCid,type:e.type};n.formItem.saveSchool2.push(a)}});var a="";this.formItem.brand2.map(function(n){t==n.id&&(a=n.name)}),this.pname=a,this.gong()},change3:function(t){this.gong()},gong:function(){var t=this.value,n={};0==t.brand2||null==t.brand2?n.brandId="":n.brandId=t.brand2,0==t.school2||null==t.school2?n.cid="":n.cid=t.school2,this.params=n,this.page=1,this.getData()},download:function(t){if(!t)return this.$Modal.warning({content:"没有附件"}),!1;var n=t.split("***")[0],e=t.split("***")[1];if(!e&&n){var a=n.lastIndexOf("/");e=n.substring(a+1,n.length)}e=encodeURI(encodeURI(e)),window.location.href=this.$util.baseUrl+this.$util.apiConfig.promotionManage.warAdviser.promotionSourceList.attachmentDownload+"?downloadUrl="+n+"&fileName="+e},show:function(t){var n=this,e={};e.policyId=this.data[t].policyid,this.$ajax({method:"post",url:this.$util.apiConfig.promotionManage.warAdviser.promotionSourceList.detail,data:r.default.stringify(e)}).then(function(e){var a="无";null!=e.data.result.result.platform&&(a=e.data.result.result.platform),n.$Modal.info({title:"详情",width:750,content:'<div id="alertMoadl">\n                                <div class="ModalLeft"><span>政策标题：</span>'+n.data[t].headline+'</div>\n                                <div class="ModalLeft"><span>开始时间：</span>'+n.data[t].startDate+'</div>\n                                <div class="ModalLeft"><span>结束时间：</span>'+n.data[t].endDate+'</div>\n                                <div class="ModalLeft"><span>品牌：</span>'+n.data[t].brand+'</div>\n                                <div class="ModalLeft"><span>品类：</span>'+n.data[t].school+'</div>\n                                <div class="ModalLeft"><span>分类：</span>'+n.data[t].sort+'</div>\n                                <div class="ModalLeft"><span>促销类型：</span>'+n.data[t].types+'</div>\n                                <div class="ModalLeft"><span>指定平台：</span>'+a+'</div>\n                                <div class="ModalLeft"><span>内容：</span> <div id="modalContent">'+e.data.result.result.content+"</div></div>\n                               </div>"})}).catch(function(t){console.log("失败信息：",t)})},createSTimeChangeHandle:function(t){this.value.startDate=t,this.value.startDate>this.value.endDate&&(this.value.endDate="")},createETimeChangeHandle:function(t){this.value.endDate=t}},components:{},created:function(){this.getFormItem(),this.getData()}}},1998:function(t,n,e){var a=e(1999);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(43)("f42c21be",a,!1,{})},1999:function(t,n,e){n=t.exports=e(42)(!1),n.push([t.i,"\n.width-100 {\n  width: 100%;\n}\n.lb-left {\n  float: left;\n}\n.lb-right {\n  float: right;\n}\n.lb-center {\n  text-align: center;\n}\n.lb-promotion-main {\n  height: auto;\n  background-color: #fff;\n}\n.lb-promotion-main .lb-promotion-search {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row {\n  margin-bottom: 14px;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row .ListName {\n  text-align: right;\n  line-height: 32px;\n  color: #747474;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.promotion-page {\n  margin: 1rem 0 0 0;\n}\n.container {\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  padding: 1% 1% 3%;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-12 {\n  margin-bottom: 12px;\n}\n.margin-bottom-14 {\n  margin-bottom: 14px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.mb--12 {\n  margin-bottom: 12px;\n}\n.mb--14 {\n  margin-bottom: 14px;\n}\n.border-b--dashed {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.pd--20 {\n  padding: 20px;\n}\n.ml--50 {\n  margin-left: 50px;\n}\n.fr {\n  float: right;\n}\n.fl {\n  float: left;\n}\n.bg--white {\n  background: #fff;\n}\n.clearfix:after {\n  content: '';\n  display: block;\n  height: 0;\n  clear: both;\n}\n.text-center {\n  text-align: center;\n}\n.white {\n  background-color: white;\n}\n.select_box {\n  padding: 20px;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.ling_height {\n  padding-top: 15px;\n}\n.text_align_right {\n  text-align: right;\n}\n.text_align_center {\n  text-align: center;\n}\n.operation_box {\n  padding: 10px 20px;\n  text-align: right;\n}\n.page_right {\n  text-align: right;\n  padding: 10px 20px;\n}\n.input_width {\n  width: 120px;\n}\n.search_btn {\n  width: 100px;\n}\n.margin_bottom_0 {\n  margin-bottom: 0;\n}\n.ivu-breadcrumb a {\n  color: #999;\n}\n.ivu-breadcrumb {\n  font-size: 12px;\n}\n.ivu-breadcrumb > span:last-child {\n  color: #426196;\n}\n.box_shadow {\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-color: #eee;\n}\n.border_bottom_dashed {\n  border-bottom: 1px dashed #E8E8E8;\n}\n.problem_table .ivu-checkbox-wrapper {\n  margin-right: 0px;\n}\n.promotion-source-list {\n  width: 100%;\n  height: 100%;\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  text-align: center;\n  padding: 10px 0;\n}\n.promotion-source-list .box1 {\n  width: 100%;\n  display: -ms-flexbox;\n  display: flex;\n  padding: 10px 0;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.promotion-source-list .box1 .box1_left {\n  -ms-flex: 1;\n      flex: 1;\n  border-right: 1px dashed #E8E8E8;\n}\n.promotion-source-list .box1 .box1_left .box1_left1 .xiala1 {\n  width: 50%;\n}\n.promotion-source-list .box1 .box1_left .box1_left1 #policy {\n  width: 50%;\n}\n.promotion-source-list .box1 .box1_left .box1_left2 {\n  margin: 10px 0;\n}\n.promotion-source-list .box1 .box1_left .box1_left2 .xiala1 {\n  width: 40%;\n}\n.promotion-source-list .box1 .box1_left .box1_left3 .xiala1 {\n  width: 40%;\n}\n.promotion-source-list .box1 .box1_right {\n  width: 15%;\n}\n.promotion-source-list .box1 .box1_right .query {\n  margin: 20px 0;\n}\n.promotion-source-list .box2 {\n  padding-top: 15px;\n}\n.promotion-source-list .box2 .shai {\n  font-size: 16px;\n  text-align: right;\n  font-weight: 800;\n}\n.promotion-source-list .box2 .xiala1 {\n  width: 60%;\n}\n.promotion-source-list .box2 .table {\n  margin: 1%;\n}\n.promotion-source-list .box2 .page {\n  text-align: right;\n  margin-right: 1%;\n}\n",""])},2e3:function(t,n,e){var a=e(2001);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e(43)("42ec8e1a",a,!1,{})},2001:function(t,n,e){n=t.exports=e(42)(!1),n.push([t.i,"\n#alertMoadl{\n        min-height: 230px;\n        max-height: 350px;  \n        overflow-y: auto;\n}\n#alertMoadl .ModalLeft{\n        height: 25px;\n        line-height: 25px;\n        color: #666;\n}\n#alertMoadl .ModalLeft span{\n        display: inline-block;\n        width: 80px;\n        text-align: right;\n        color: #222;\n        font-weight: bold;\n        font-size: 14px;\n        float: left;\n}\n#alertMoadl img{\n        max-width: 556px;\n        height: auto;\n}\n#modalContent{\n        float: left;\n\t\tmax-width: 556px;\n}\n",""])},2002:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"promotion-source-list"},[e("div",{staticClass:"box1"},[e("Row",{staticClass:"box1_left"},[e("Row",{staticClass:"box1_left1"},[e("Col",{attrs:{span:"7"}},[t._v("\n                    指定品牌 :\n                    "),e("Select",{staticClass:"xiala1",attrs:{placeholder:"请选择"},on:{"on-change":t.change},model:{value:t.value.brand,callback:function(n){t.$set(t.value,"brand",n)},expression:"value.brand"}},t._l(t.formItem.brand,function(n){return e("Option",{key:n.id,attrs:{value:n.id}},[t._v(t._s(n.name))])}))],1),t._v(" "),e("Col",{attrs:{span:"7"}},[t._v("\n                    指定品类 :\n                    "),e("Select",{staticClass:"xiala1",attrs:{placeholder:"请选择"},model:{value:t.value.school,callback:function(n){t.$set(t.value,"school",n)},expression:"value.school"}},t._l(t.formItem.saveSchool,function(n){return e("Option",{key:n.id,attrs:{value:n.id}},[t._v(t._s(n.name))])}))],1),t._v(" "),e("Col",{attrs:{span:"10"}},[e("label",{attrs:{for:"policy"}},[t._v("政策名称 :  ")]),e("Input",{attrs:{id:"policy"},model:{value:t.value.policy,callback:function(n){t.$set(t.value,"policy",n)},expression:"value.policy"}})],1)],1),t._v(" "),e("Row",{staticClass:"box1_left2"},[e("Col",{attrs:{span:"7"}},[t._v("\n                    分类 :\n                    "),e("Select",{staticClass:"xiala1",attrs:{placeholder:"请选择"},model:{value:t.value.sort,callback:function(n){t.$set(t.value,"sort",n)},expression:"value.sort"}},t._l(t.formItem.sort,function(n){return e("Option",{key:n.id,attrs:{value:n.id}},[t._v(t._s(n.name))])}))],1),t._v(" "),e("Col",{attrs:{span:"7"}},[t._v("\n                    类型 :\n                    "),e("Select",{staticClass:"xiala1",attrs:{placeholder:"请选择"},model:{value:t.value.types,callback:function(n){t.$set(t.value,"types",n)},expression:"value.types"}},t._l(t.formItem.types,function(n){return e("Option",{key:n.id,attrs:{value:n.id}},[t._v(t._s(n.name))])}))],1)],1),t._v(" "),e("Row",{staticClass:"box1_left3"},[e("Col",{attrs:{span:"7"}},[t._v("\n                    状态 :\n                    "),e("Select",{staticClass:"xiala1",attrs:{placeholder:"请选择"},model:{value:t.value.state,callback:function(n){t.$set(t.value,"state",n)},expression:"value.state"}},t._l(t.formItem.state,function(n){return e("Option",{key:n.id,attrs:{value:n.id}},[t._v(t._s(n.name))])}))],1),t._v(" "),e("Col",{attrs:{span:"7"}},[t._v("\n                    开始时间 : \n                    "),t._v(" "),e("DatePicker",{attrs:{type:"date",value:t.value.startDate,placeholder:"请选择时间"},on:{"on-change":t.createSTimeChangeHandle}})],1),t._v(" "),e("Col",{attrs:{span:"7"}},[t._v("\n                    结束时间 : \n                    "),t._v(" "),e("DatePicker",{attrs:{type:"date",value:t.value.endDate,options:t.createDateOptions,placeholder:"请选择时间"},on:{"on-change":t.createETimeChangeHandle}})],1)],1)],1),t._v(" "),e("Row",{staticClass:"box1_right"},[e("Col",[e("Button",{staticClass:"query",on:{click:function(n){t.query(1)}}},[t._v("查询")])],1)],1)],1),t._v(" "),e("div",{staticClass:"box2"},[e("Row",[e("Col",{staticClass:"shai",attrs:{span:"2"}},[t._v("\n                筛选：\n            ")]),t._v(" "),e("Col",{attrs:{span:"4"}},[t._v("\n                品牌：\n                "),e("Select",{staticClass:"xiala1",attrs:{placeholder:"请选择"},on:{"on-change":t.change2},model:{value:t.value.brand2,callback:function(n){t.$set(t.value,"brand2",n)},expression:"value.brand2"}},t._l(t.formItem.brand2,function(n){return e("Option",{key:n.id,attrs:{value:n.id}},[t._v(t._s(n.name))])}))],1),t._v(" "),e("Col",{attrs:{span:"4"}},[t._v("\n                品类：\n                "),e("Select",{staticClass:"xiala1",attrs:{placeholder:"请选择"},on:{"on-change":t.change3},model:{value:t.value.school2,callback:function(n){t.$set(t.value,"school2",n)},expression:"value.school2"}},t._l(t.formItem.saveSchool2,function(n){return e("Option",{key:n.id,attrs:{value:n.id}},[t._v(t._s(n.name))])}))],1)],1),t._v(" "),e("Table",{staticClass:"table",attrs:{loading:t.loading,columns:t.columns,data:t.data}}),t._v(" "),e("Page",{attrs:{current:t.page,total:t.totalCount,"show-total":"","show-elevator":"","class-name":"page"},on:{"on-change":t.changePage}})],1)])},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};n.default=i},699:function(t,n,e){"use strict";function a(t){d||(e(1998),e(2e3))}Object.defineProperty(n,"__esModule",{value:!0});var o=e(1581),i=e.n(o);for(var r in o)"default"!==r&&function(t){e.d(n,t,function(){return o[t]})}(r);var l=e(2002),s=e.n(l),d=!1,c=e(13),p=a,h=c(i.a,s.a,!1,p,null,null);h.options.__file="src/views/promotion-manage/war-adviser/promotion-source-list/promotion-source-list.vue",n.default=h.exports}});