webpackJsonp([187],{1684:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(898),n=i(239),r=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default={data:function(){var t=this;return{query:{dnCode:"",ncOrderCode:"",deliveryCarBillNo:"",shippedStartTime:"",shippedEndTime:"",inboundStartTime:"",inboundEndTime:"",status:null},columns1:[{title:"序号",type:"index",minWidth:60,fixed:"left"},{title:"发货单号",key:"dnCode",minWidth:110},{title:"关联采购单号",key:"ncOrderCode",minWidth:110},{title:"发货单整件数量",key:"countByCar",minWidth:120},{title:"发货单散个数量",key:"countByEa",minWidth:120},{title:"总重量",key:"totalWeight",minWidth:80},{title:"总体积",key:"totalVolume",minWidth:80},{title:"总价值",key:"totalPrice",minWidth:80},{title:"拼车单号",key:"deliveryCarBillNo",minWidth:110},{title:"司机姓名",key:"driverName",minWidth:110},{title:"联系方式",key:"driverPhone",minWidth:110},{title:"发货时间",key:"shippedTime",minWidth:110},{title:"入库时间",key:"inboundTime",minWidth:110},{title:"入库状态",key:"status",minWidth:110}],entity:[],columns2:[{title:"序号",type:"index",minWidth:60},{title:"条形码",key:"materialCode69",minWidth:100},{title:"商品名称",key:"name",minWidth:200},{title:"订单整件数",key:"quantityByCar"},{title:"订单散个数",key:"quantityByEa"},{title:"待入库整件数",key:"surplusInboundCarNum"},{title:"待入库散个数",key:"surplusInoundEaNum"},{title:"转换系数",key:"boxCount"}],dispatchOrderProductList:[{materialCode69:"ttttttttt",name:"rrrrrrrr",quantityByCar:"eeeeeeeeee",quantityByEa:"wwwwwwwwww",surplusInboundCarNum:"pppppppppp",surplusInoundEaNum:"fearerearar",batchNo:"feafeafaf",boxCount:"uuuuuuuuu"}],showOrderDetail:!1,detail_list:{},pager:{},loading:!1,shippedDateOptions:{disabledDate:function(e){return e&&e.valueOf()<new Date(t.query.shippedStartTime)}},inboundDateOptions:{disabledDate:function(e){return e&&e.valueOf()<new Date(t.query.inboundStartTime)}}}},created:function(){console.log("purchase-send-list created"),this.jumpPageHandle(1)},methods:{closeOrderDetail:function(){this.showOrderDetail=!1},shipSTimeChangeHandle:function(t){this.query.shippedStartTime=t,this.query.shippedStartTime>this.query.shippedEndTime&&(this.query.shippedEndTime="")},shipETimeChangeHandle:function(t){this.query.shippedEndTime=t},iSTimeChangeHandle:function(t){this.query.inboundStartTime=t,this.query.inboundStartTime>this.query.inboundEndTime&&(this.query.inboundEndTime="")},iETimeChangeHandle:function(t){this.query.inboundEndTime=t},openOrder:function(t){var e=this;console.log(t),this.loading=!0;var i=this;this.$util.ajax.post(i.$util.apiConfig.purchaseDelivery.purchaseManage.purchaseSendManage.getDetailUrl,r.default.stringify({code:t.dnCode})).then(function(t){console.log("getted order:"),console.log(t),e.loading=!1,200==t.status?(e.showOrderDetail=!0,e.detail_list=t.data,e.dispatchOrderProductList=e.detail_list.dispatchOrderProductList):e.$Modal.error({title:"HTTP请求错误",content:t.statusText})}).catch(function(t){console.log(t),e.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})},jumpPageHandle:function(t){var e=this;this.pager.page=t,this.loading=!0;var i={currentPage:this.pager.page,dnCode:this.query.dnCode,ncOrderCode:this.query.ncOrderCode,deliveryCarBillNo:this.query.deliveryCarBillNo,status:this.query.status,shippedStartTime:this.query.shippedStartTime,shippedEndTime:this.query.shippedEndTime,inboundStartTime:this.query.inboundStartTime,inboundEndTime:this.query.inboundEndTime},n=this;this.$util.ajax.post(n.$util.apiConfig.purchaseDelivery.purchaseManage.purchaseSendManage.listUrl,r.default.stringify(i)).then(function(t){if(e.loading=!1,console.log("采购发货单请求返回数据：",t),200==t.status){e.pager=t.data.pager,e.entity=t.data.resultList;for(var i=0;i<e.entity.length;i++)e.entity[i].shippedTime=(0,a.timestampToDay)(e.entity[i].shippedTime),e.entity[i].inboundTime=(0,a.timestampToDay)(e.entity[i].inboundTime),0==e.entity[i].status?e.entity[i].status="待入库":10==e.entity[i].status?e.entity[i].status="部分已入库":20==e.entity[i].status&&(e.entity[i].status="全部已入库");e.query.dnCode=t.data.query.dnCode,e.query.ncOrderCode=t.data.query.ncOrderCode,e.query.deliveryCarBillNo=t.data.query.deliveryCarBillNo,null!=t.data.query.shippedStartTime?e.query.shippedStartTime=(0,a.timestampToDay)(t.data.query.shippedStartTime):e.query.shippedStartTime=null,null!=t.data.query.shippedEndTime?e.query.shippedEndTime=(0,a.timestampToDay)(t.data.query.shippedEndTime):e.query.shippedEndTime=null,null!=t.data.query.inboundStartTime?e.query.inboundStartTime=(0,a.timestampToDay)(t.data.query.inboundStartTime):e.query.inboundStartTime=null,null!=t.data.query.inboundEndTime?e.query.inboundEndTime=(0,a.timestampToDay)(t.data.query.inboundEndTime):e.query.inboundEndTime=null}else e.$Modal.error({title:"HTTP请求错误",content:t.statusText})}).catch(function(t){console.log(t),e.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})},lookup:function(){console.log("lookup"),this.jumpPageHandle(1)}}}},2325:function(t,e,i){var a=i(2326);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i(43)("37a99bf7",a,!1,{})},2326:function(t,e,i){e=t.exports=i(42)(!1),e.push([t.i,"\n.cmain[data-v-62223536] {\r\n  background-color: white;\r\n  position: relative;\r\n  /* min-width: 1020px; */\n}\n.store_detail_list li[data-v-62223536] {\r\n    display: inline-block;\r\n    margin-right: 45px;\r\n    margin-bottom: 10px;\n}\n#checkForm .ivu-col[data-v-62223536]{\r\n  margin: 10px 0px;\n}\r\n",""])},2327:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cmain"},[t.loading?i("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),i("div",{staticStyle:{padding:"20px 50px"}},[i("Row",{attrs:{id:"checkForm"}},[i("Col",{attrs:{sm:12,md:8,lg:6}},[i("span",[t._v("发货单号")]),t._v(" "),i("Input",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{type:"text"},model:{value:t.query.dnCode,callback:function(e){t.$set(t.query,"dnCode","string"==typeof e?e.trim():e)},expression:"query.dnCode"}})],1),t._v(" "),i("Col",{attrs:{sm:12,md:8,lg:6}},[i("span",[t._v("采购单号")]),t._v(" "),i("Input",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{type:"text"},model:{value:t.query.ncOrderCode,callback:function(e){t.$set(t.query,"ncOrderCode","string"==typeof e?e.trim():e)},expression:"query.ncOrderCode"}})],1),t._v(" "),i("Col",{attrs:{sm:12,md:8,lg:6}},[i("span",[t._v("拼车单号")]),t._v(" "),i("Input",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{type:"text"},model:{value:t.query.deliveryCarBillNo,callback:function(e){t.$set(t.query,"deliveryCarBillNo","string"==typeof e?e.trim():e)},expression:"query.deliveryCarBillNo"}})],1),t._v(" "),i("Col",{attrs:{sm:12,md:8,lg:6}},[i("span",[t._v("入库状态")]),t._v(" "),i("i-select",{staticStyle:{width:"143px","margin-left":"15px"},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},[i("i-option",{attrs:{value:""}},[t._v("请选择")]),t._v(" "),i("i-option",{attrs:{value:"0"}},[t._v("待入库")]),t._v(" "),i("i-option",{attrs:{value:"10"}},[t._v("部分已入库")]),t._v(" "),i("i-option",{attrs:{value:"20"}},[t._v("全部已入库")])],1)],1),t._v(" "),i("Col",{attrs:{sm:24,md:18,lg:10}},[i("span",[t._v("发货时间")]),t._v(" "),i("date-picker",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{value:t.query.shippedStartTime,format:"yyyy-MM-dd",type:"date",placeholder:"请选择时间"},on:{"on-change":t.shipSTimeChangeHandle}}),t._v(" "),i("i",{staticClass:"demo-icons"},[t._v("-")]),t._v(" "),i("date-picker",{staticStyle:{width:"143px"},attrs:{value:t.query.shippedEndTime,options:t.shippedDateOptions,format:"yyyy-MM-dd",type:"date",placeholder:"请选择时间"},on:{"on-change":t.shipETimeChangeHandle}})],1),t._v(" "),i("Col",{attrs:{sm:24,md:18,lg:10}},[i("span",[t._v("入库时间")]),t._v(" "),i("date-picker",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{value:t.query.inboundStartTime,format:"yyyy-MM-dd",type:"date",placeholder:"请选择时间"},on:{"on-change":t.iSTimeChangeHandle}}),t._v(" "),i("i",{staticClass:"demo-icons"},[t._v("-")]),t._v(" "),i("date-picker",{staticStyle:{width:"143px"},attrs:{value:t.query.inboundEndTime,options:t.inboundDateOptions,format:"yyyy-MM-dd",type:"date",placeholder:"请选择时间"},on:{"on-change":t.iETimeChangeHandle}})],1),t._v(" "),i("Col",{staticStyle:{float:"right"},attrs:{sm:12,md:8,lg:4}},[i("i-button",{staticStyle:{width:"115px","margin-left":"15px"},attrs:{type:"primary"},on:{click:t.lookup}},[t._v("查询")])],1)],1),t._v(" "),i("br"),t._v(" "),i("Table",{attrs:{stripe:"",columns:t.columns1,data:t.entity},on:{"on-row-click":t.openOrder}}),t._v(" "),i("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",justify:"end"}},[i("page",{attrs:{current:t.pager.current,total:t.pager.totalCount,"page-size":t.pager.pageCode,"show-elevator":"","show-total":""},on:{"on-change":t.jumpPageHandle}})],1)],1),t._v(" "),i("modal",{attrs:{width:"1200"},model:{value:t.showOrderDetail,callback:function(e){t.showOrderDetail=e},expression:"showOrderDetail"}},[i("span",{attrs:{slot:"header"},slot:"header"},[i("span",[t._v("入库单详情")])]),t._v(" "),i("div",[i("ul",{staticClass:"store_detail_list",staticStyle:{height:"50px"}},[i("li",[i("span",[t._v("发货单号：")]),i("span",[t._v(t._s(t.detail_list.dnCode))])]),t._v(" "),i("li",[i("span",[t._v("关联采购单号：")]),i("span",[t._v(t._s(t.detail_list.ncOrderCode))])]),t._v(" "),i("li",[i("span",[t._v("送达方：")]),i("span",[t._v(t._s(t.detail_list.cargoReceiverName))])]),t._v(" "),i("li",[i("span",[t._v("司机姓名：")]),i("span",[t._v(t._s(t.detail_list.driverName))])]),t._v(" "),i("li",[i("span",[t._v("联系人方式：")]),i("span",[t._v(t._s(t.detail_list.driverPhone))])]),t._v(" "),i("li",[i("span",[t._v("车牌号：")]),i("span",[t._v(t._s(t.detail_list.plateNo))])]),t._v(" "),i("li",[i("span",[t._v("总重量：")]),i("span",[t._v(t._s(t.detail_list.totalWeight))])]),t._v(" "),i("li",[i("span",[t._v("总体积：")]),i("span",[t._v(t._s(t.detail_list.totalVolume))])]),t._v(" "),i("li",[i("span",[t._v("入库仓库：")]),i("span",[t._v(t._s(t.detail_list.warehouseName))])])]),t._v(" "),i("div",{staticClass:"tableStandard",staticStyle:{"overflow-y":"auto",height:"300px"}},[i("Table",{attrs:{stripe:"",columns:t.columns2,data:t.dispatchOrderProductList}})],1)]),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("i-button",{staticStyle:{width:"92px"},attrs:{type:"primary"},on:{click:t.closeOrderDetail}},[t._v("确认")]),t._v(" "),i("i-button",{staticStyle:{width:"92px"},on:{click:t.closeOrderDetail}},[t._v("取消")])],1)])],1)},n=[];a._withStripped=!0;var r={render:a,staticRenderFns:n};e.default=r},801:function(t,e,i){"use strict";function a(t){o||i(2325)}Object.defineProperty(e,"__esModule",{value:!0});var n=i(1684),r=i.n(n);for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);var l=i(2327),d=i.n(l),o=!1,u=i(13),p=a,y=u(r.a,d.a,!1,p,"data-v-62223536",null);y.options.__file="src/views/purchase-send/purchase-manage/purchase-send-manage/purchase-send-list.vue",e.default=y.exports},898:function(t,e,i){"use strict";function a(t,e){if(!e)var e="yyyy-MM-DD hh:mm:ss";var i={"M+":t.getMonth()+1,"D+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in i)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return e}function n(t,e){if(!e)var e="yyyy-MM-dd";(t=Number(t))<1e10&&(t*=1e3);var i=new Date(t),a={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e}Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=a,e.timestampToDay=n}});