webpackJsonp([188],{1682:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(241),s=a(n),i=r(146),l=a(i),o=r(242),c=a(o),u=r(898),d=r(239);t.default={data:function(){var e=this;return{apiGroup:this.$util.apiConfig.purchaseDelivery.purchaseManage.helpSellerOrder.helpSellerOrderList,query:{ncOrderCode:"",suplierName:"",custName:"",createStartTime:"",createEndTime:"",procurementCreateStartDate:"",procurementCreateEndDate:"",currentPage:1},orderList:[],orderTotal:0,orderListColumns:[{title:"序号",align:"center",width:60,render:function(t,r){return t("span",10*(e.query.currentPage-1)+r.index+1)}},{title:"采购单号",align:"center",key:"ncOrderCode"},{title:"供应商",align:"center",key:"suplierName"},{title:"采购数量CAR",align:"center",key:"countByCar"},{title:"采购数量EA",align:"center",key:"countByEa"},{title:"总金额(元)",align:"center",key:"totalPrice"},{title:"采购员",align:"center",key:"custName"},{title:"采购日期",align:"center",key:"procurementCreateDate"},{title:"操作",align:"center",render:function(t,r){return t("Button",{on:{click:function(t){return e.showGoodsDetail(r.row.ncOrderCode)}}},"查看")}}],orderDetailModalVisible:!1,orderDetailData:[],orderDetailColumns:[{title:"序号",align:"center",width:60,render:function(e,t){return e("span",t.index+1)}},{title:"商品名称",align:"center",key:"materialName79"},{title:"销售分类",align:"center",render:function(e,t){return e("span","助销品/助销品")}},{title:"销售编码",align:"center",key:"materialCode79"},{title:"条形码",align:"center",key:"materialCode69"},{title:"采购数量CAR",align:"center",key:"carNum"},{title:"采购数量EA",align:"center",key:"eaNum"},{title:"采购单价(元/CAR)",align:"center",key:"carBasePrice"}]}},mounted:function(){this.getOrderList()},methods:{getOrderList:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(s.default.mark(function e(){var t,r,a,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,l.default)({},this.query);for(r in t)t[r]&&0!=t[r]||delete t[r];return e.prev=2,a=void 0,n=void 0,e.next=6,this.$ajax.post(this.apiGroup.list,d.stringify(t),{headers:{Accept:"text/plain, */*; q=0.01"}});case 6:n=e.sent,a=n.data,a.success&&(a.result.resultList instanceof Array&&(this.orderList=a.result.resultList.map(function(e){var t=e.procurementCreateDate?(0,u.formatDate)(new Date(e.procurementCreateDate),"yyyy-MM-DD"):"";return(0,l.default)({},e,{procurementCreateDate:t})})),this.orderTotal=a.result.pager.totalCount),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),this.$Message.error("助销品订单列表获取失败");case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return e}(),showGoodsDetail:function(){function e(e){return t.apply(this,arguments)}var t=(0,c.default)(s.default.mark(function e(t){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.orderDetailData=[],this.orderDetailModalVisible=!0,e.prev=2,r=void 0,a=void 0,e.next=6,this.$ajax.post(this.apiGroup.detail,d.stringify({code:t}),{headers:{Accept:"text/plain, */*; q=0.01"}});case 6:a=e.sent,r=a.data,200==r.code&&r.result.rows instanceof Array&&(this.orderDetailData=r.result.rows.map(function(e){var t=0,r=0,a=e.carBasePrice.toFixed(2);return e.quantityByCar&&null!==e.quantityByCar&&(t=e.quantityByCar),e.num&&null!==e.num&&(t=Math.floor(e.num/e.transformRule)),e.num&&null!==e.num&&(r=e.num%e.transformRule),(0,l.default)({},e,{carNum:t,eaNum:r,carBasePrice:a})})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),this.$Message.error("采购明细获取失败"),console.error(e.t0);case 15:case"end":return e.stop()}},e,this,[[2,11]])}));return e}(),setQueryDate:function(e,t){this.query[t]=e},search:function(){this.query.page=1,this.getOrderList()},reset:function(){this.query={ncOrderCode:"",suplierName:"",custName:"",createStartTime:"",createEndTime:"",procurementCreateStartDate:"",procurementCreateEndDate:"",currentPage:1},this.getOrderList()}}}},2317:function(e,t,r){var a=r(2318);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(43)("56a23436",a,!1,{})},2318:function(e,t,r){t=e.exports=r(42)(!1),t.push([e.i,"\n.flr[data-v-4c9a4696] {\n  float: right;\n}\n.wd-150[data-v-4c9a4696] {\n  width: 150px;\n}\n.wd-220[data-v-4c9a4696] {\n  width: 220px;\n}\n.query[data-v-4c9a4696] {\n  font-size: 12px;\n}\n.query .flr[data-v-4c9a4696] {\n  width: 120px;\n  text-align: center;\n  padding: 0 10px;\n}\n.query .flr .btn[data-v-4c9a4696] {\n  margin: 10px 0;\n}\n.query .left[data-v-4c9a4696] {\n  overflow: hidden;\n  border-right: 1px dashed #aaa;\n}\n.query .left .item[data-v-4c9a4696] {\n  display: inline-block;\n  margin-right: 20px;\n  margin-bottom: 10px;\n}\n.query .left .content[data-v-4c9a4696] {\n  display: inline-block;\n}\n.extra-row[data-v-4c9a4696] {\n  overflow: hidden;\n  margin: 10px 0;\n}\n.extra-row .btn[data-v-4c9a4696] {\n  float: right;\n}\n.pager[data-v-4c9a4696] {\n  margin-top: 10px;\n  text-align: right;\n}\n",""])},2319:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Card",[r("div",{staticClass:"query"},[r("div",{staticClass:"flr"},[r("Button",{staticClass:"btn",attrs:{long:""},on:{click:e.search}},[e._v("查询")]),e._v(" "),r("br"),e._v(" "),r("Button",{staticClass:"btn",attrs:{long:""},on:{click:e.reset}},[e._v("重置")])],1),e._v(" "),r("div",{staticClass:"left"},[r("Row",[r("span",{staticClass:"item wd-220"},[r("span",{staticClass:"label"},[e._v("采购单号: ")]),e._v(" "),r("span",{staticClass:"content"},[r("Input",{staticClass:"wd-150",model:{value:e.query.ncOrderCode,callback:function(t){e.$set(e.query,"ncOrderCode",t)},expression:"query.ncOrderCode"}})],1)]),e._v(" "),r("span",{staticClass:"item wd-220"},[r("span",{staticClass:"label"},[e._v("供应商名称: ")]),e._v(" "),r("span",{staticClass:"content"},[r("Input",{staticClass:"wd-150",model:{value:e.query.suplierName,callback:function(t){e.$set(e.query,"suplierName",t)},expression:"query.suplierName"}})],1)])]),e._v(" "),r("Row",[r("span",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("采购人员: ")]),e._v(" "),r("span",{staticClass:"content"},[r("Input",{staticClass:"wd-150",model:{value:e.query.custName,callback:function(t){e.$set(e.query,"custName",t)},expression:"query.custName"}})],1)])]),e._v(" "),r("Row",[r("span",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("采购日期: ")]),e._v(" "),r("span",{staticClass:"content"},[r("DatePicker",{attrs:{transfer:!0,value:e.query.procurementCreateStartDate},on:{"on-change":function(t){return e.setQueryDate(t,"procurementCreateStartDate")}}}),e._v(" "),r("span",{staticStyle:{margin:"10px"}},[e._v(" 至 ")]),e._v(" "),r("DatePicker",{attrs:{transfer:!0,value:e.query.procurementCreateEndDate},on:{"on-change":function(t){return e.setQueryDate(t,"procurementCreateEndDate")}}})],1)])]),e._v(" "),r("Row",[r("span",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("创建日期: ")]),e._v(" "),r("span",{staticClass:"content"},[r("DatePicker",{attrs:{transfer:!0,value:e.query.createStartTime},on:{"on-change":function(t){return e.setQueryDate(t,"createStartTime")}}}),e._v(" "),r("span",{staticStyle:{margin:"10px"}},[e._v(" 至 ")]),e._v(" "),r("DatePicker",{attrs:{transfer:!0,value:e.query.createEndTime},on:{"on-change":function(t){return e.setQueryDate(t,"createEndTime")}}})],1)])])],1)]),e._v(" "),r("div",{staticClass:"extra-row"},[r("Button",{staticClass:"btn",staticStyle:{"margin-right":"150px"},attrs:{type:"primary"},on:{click:function(t){e.$router.push({name:"help-seller-order-add"})}}},[e._v("新建助销品采购单")])],1),e._v(" "),r("div",{staticClass:"result"},[r("Table",{attrs:{data:e.orderList,columns:e.orderListColumns}}),e._v(" "),r("Page",{staticClass:"pager",attrs:{current:e.query.currentPage,total:e.orderTotal,"show-elevator":"","show-total":""},on:{"update:current":function(t){e.$set(e.query,"currentPage",t)},"on-change":e.getOrderList}})],1),e._v(" "),r("Modal",{attrs:{title:"采购明细",width:"900"},model:{value:e.orderDetailModalVisible,callback:function(t){e.orderDetailModalVisible=t},expression:"orderDetailModalVisible"}},[r("div",[r("Table",{attrs:{data:e.orderDetailData,columns:e.orderDetailColumns}})],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:function(t){e.orderDetailModalVisible=!1}}},[e._v("关闭")])],1)])],1)},n=[];a._withStripped=!0;var s={render:a,staticRenderFns:n};t.default=s},799:function(e,t,r){"use strict";function a(e){c||r(2317)}Object.defineProperty(t,"__esModule",{value:!0});var n=r(1682),s=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,function(){return n[e]})}(i);var l=r(2319),o=r.n(l),c=!1,u=r(13),d=a,p=u(s.a,o.a,!1,d,"data-v-4c9a4696",null);p.options.__file="src/views/purchase-send/purchase-manage/help-seller-order/help-seller-order-list.vue",t.default=p.exports},898:function(e,t,r){"use strict";function a(e,t){if(!t)var t="yyyy-MM-DD hh:mm:ss";var r={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in r)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return t}function n(e,t){if(!t)var t="yyyy-MM-dd";(e=Number(e))<1e10&&(e*=1e3);var r=new Date(e),a={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=a,t.timestampToDay=n}});