webpackJsonp([193],{1665:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(241),r=n(i),o=a(242),s=n(o),l=a(239),u=n(l);a(898);e.default={data:function(){var t=this;return{apiGroup:this.$util.apiConfig.traderManage.infoManage.standardizationTarget,query:{month:""},pager:{},loading:!1,empList:[],empSelectedList:[],month:"",maxDays:31,columns1:[{title:"月份",key:"month",align:"center",minWidth:150},{title:"业务员",key:"empName",align:"center",minWidth:150},{title:"预打造",key:"geoponicsCount",align:"center",minWidth:150},{title:"精耕打造",key:"prebuildCount",align:"center",minWidth:150},{title:"扫盲",key:"eliminateIlliteracy",align:"center",minWidth:150},{title:"O2O推广",key:"storeCount",align:"center",minWidth:150},{title:"操作",key:"crtl",align:"center",minWidth:150,render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.$router.push({name:"standardization-make-target-edit",query:{id:a.row.id}})}}},"编辑"),e("Button",{props:{type:"error",size:"small"},on:{click:function(){t.remove(a.row)}},style:{marginLeft:"10px"}},"删除")])}}],entity:[]}},created:function(){this.getMonth(),this.jumpPageHandle(1),this.getEmpList()},methods:{getEmpList:function(){function t(){return e.apply(this,arguments)}var e=(0,s.default)(r.default.mark(function t(){var e;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$util.ajax.post(this.apiGroup.querySalesman);case 3:e=t.sent,console.log("业务员列表返回数据",e),200==e.data.code&&void 0!=e.data.result&&(this.empList=e.data.result),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}},t,this,[[0,8]])}));return t}(),getMonth:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a<10&&(a="0"+a),this.query.month=e+"-"+a},attendDayInputFormat:function(t){t.target.value=t.target.value.replace(/[^\d]/g,""),""==this.query.month&&(this.maxDays=31),Number(t.target.value)>Number(this.maxDays)&&(t.target.value=this.maxDays,this.$Notice.warning({desc:"本月只有"+this.maxDays+"天",duration:2}))},monthChangeHandle:function(t){if(this.query.month=t,""!=this.query.month){var e=this.query.month.split("-")[0],a=this.query.month.split("-")[1],n=new Date(e,a,0);this.maxDays=Number(n.getDate()),Number(this.query.attendDays)>this.maxDays&&(this.query.attendDays=this.maxDays)}else this.maxDays},jumpPageHandle:function(t){var e=this;this.pager.currentPage=t;var a={page:this.pager.currentPage};this.empSelectedList.length>0&&(a.empIds=this.empSelectedList),""!=this.query.month&&void 0!=this.query.month&&(a.month=this.query.month),console.log(a),this.loading=!0,this.$util.ajax.post(this.apiGroup.list,u.default.stringify(a)).then(function(t){e.loading=!1,console.log("标准化打造目标：",t),200==t.data.code?(e.loading=!1,e.pager=t.data.result,e.entity=t.data.result.records):(e.entity=[],e.pager.page=1,e.pager.totalCount=0,t.data.message&&""!=t.data.message&&e.$Notice.warning({desc:t.data.message,duration:2}))}).catch(function(t){console.log(t),e.loading=!1,e.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})},lookup:function(){console.log("lookup"),this.jumpPageHandle(1)},remove:function(t){var e=this;this.$Modal.confirm({title:"确认删除吗？",content:"删除为不可恢复操作，确定要删除 "+t.empName+" "+t.month+" 月的数据吗？",onOk:function(){setTimeout(function(){var a={};a.id=t.id,e.loading=!0,e.$util.ajax.post(e.apiGroup.remove,u.default.stringify(a)).then(function(t){e.loading=!1,console.log("标准化打造删除目标：",t),1==t.data.success?e.$Modal.success({title:"删除操作成功",content:"已成功删除数据",onOk:function(){e.jumpPageHandle(1)}}):e.$Modal.error({title:"删除请求失败",content:t.data.message})}).catch(function(t){console.log(t),e.loading=!1,e.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})},500)}})},createTarget:function(){this.$router.push({name:"standardization-make-target-create"})}}}},2260:function(t,e,a){var n=a(2261);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(43)("2fe28cb4",n,!1,{})},2261:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\n.cmain[data-v-3d8e342a] {\n  background-color: white;\n  position: relative;\n  /* min-width: 1020px; */\n}\n.checkForm .ivu-col[data-v-3d8e342a] {\n  margin: 10px 0px;\n}\n.qianshouCol .ivu-col[data-v-3d8e342a] {\n  margin: 5px 0px;\n}\n.line[data-v-3d8e342a] {\n  border-bottom: 1px solid #dddee1;\n}\nbutton + button[data-v-3d8e342a] {\n  margin-left: 10px;\n}\n",""])},2262:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cmain"},[a("div",{staticStyle:{padding:"20px 50px"}},[a("br"),t._v(" "),a("Row",[a("Col",{attrs:{sm:12,md:10,lg:8}},[a("span",[t._v("业务员:")]),t._v(" "),a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",multiple:""},model:{value:t.empSelectedList,callback:function(e){t.empSelectedList=e},expression:"empSelectedList"}},t._l(t.empList,function(e){return a("Option",{key:e.empId,attrs:{value:e.empId}},[t._v(t._s(e.empName))])}))],1),t._v(" "),a("Col",{attrs:{sm:12,md:8,lg:6}},[a("span",[t._v("月份:")]),t._v(" "),a("date-picker",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{value:t.query.month,type:"month",placeholder:"请选择月份"},on:{"on-change":t.monthChangeHandle}})],1),t._v(" "),t._e(),t._v(" "),a("Col",{staticStyle:{float:"right"}},[a("i-button",{staticStyle:{width:"115px","margin-left":"15px"},attrs:{type:"primary",icon:"search"},on:{click:t.lookup}},[t._v("查询")])],1)],1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("div",{staticStyle:{"border-bottom":"1px rgba(204, 204, 204, 1) solid"}}),t._v(" "),a("br"),t._v(" "),a("Row",[a("Col",{staticStyle:{float:"right"}},[a("i-button",{staticStyle:{width:"115px","margin-left":"15px"},attrs:{type:"primary",icon:"plus"},on:{click:t.createTarget}},[t._v("新建")])],1)],1),t._v(" "),a("br"),t._v(" "),a("Table",{attrs:{stripe:"",columns:t.columns1,data:t.entity}}),t._v(" "),a("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",justify:"end"}},[a("page",{attrs:{current:t.pager.page,total:t.pager.totalCount,"page-size":t.pager.rows,"show-elevator":"","show-total":""},on:{"on-change":t.jumpPageHandle}})],1)],1),t._v(" "),t.loading?a("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},i=[];n._withStripped=!0;var r={render:n,staticRenderFns:i};e.default=r},782:function(t,e,a){"use strict";function n(t){u||a(2260)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(1665),r=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);var s=a(2262),l=a.n(s),u=!1,c=a(13),d=n,p=c(r.a,l.a,!1,d,"data-v-3d8e342a",null);p.options.__file="src/views/promotion-manage/war-programme/terminal-brand-managment/standardization-make-target/standardization-make-target.vue",e.default=p.exports},898:function(t,e,a){"use strict";function n(t,e){if(!e)var e="yyyy-MM-DD hh:mm:ss";var a={"M+":t.getMonth()+1,"D+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in a)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return e}function i(t,e){if(!e)var e="yyyy-MM-dd";(t=Number(t))<1e10&&(t*=1e3);var a=new Date(t),n={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in n)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[i]:("00"+n[i]).substr((""+n[i]).length)));return e}Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=n,e.timestampToDay=i}});