webpackJsonp([20,58,176,204,269,270,296,297],{1087:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(241),i=r(n),s=a(242),o=r(s),l=a(146),u=r(l),d=a(239);t.default={props:{visible:{type:Boolean,default:!1},storeCode:{type:String,default:""}},data:function(){var e=this;return{dialogVisible:!1,query:{empName:"",currentPage:1,row:10},empColumns:[{title:"选择",render:function(t,a){return t("input",{attrs:{type:"radio",checked:a.row.checked},on:{change:function(){e.handleEmpSelectChange(a.row)}}})}},{title:"工号",key:"empCode"},{title:"姓名",key:"empName"},{title:"门店数量",key:"storeCount"}],empList:[],total:0}},methods:{handleOk:function(){for(var e=void 0,t=0;t<this.empList.length;t++)this.empList[t].checked&&(e=(0,u.default)({},this.empList[t]));if(!e)return void this.$Message.error("未选择业务员");this.dialogVisible=!1,this.$emit("on-select",e),this.$emit("update:visible",!1)},handleCancel:function(){this.dialogVisible=!1,this.$emit("update:visible",!1)},reloadStoreSelect:function(){this.query={empName:"",currentPage:1,row:10},this.queryEmpList()},handleSearch:function(){this.query.currentPage=1,this.queryEmpList()},queryEmpList:function(){function e(){return t.apply(this,arguments)}var t=(0,o.default)(i.default.mark(function e(){var t,a,r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,u.default)({},this.query,{storeCode:this.storeCode}),delete t.row,a=this,e.prev=3,e.next=6,this.$ajax.post(a.$util.apiConfig.traderManage.flowManage.costManage.queryEmp,d.stringify(t));case 6:r=e.sent,n=r.data,200==r.status?null!=n.dto&&null!=n.page.records&&(this.empList=n.page.records.map(function(e,t){return(0,u.default)({},e,{storeCount:n.dto[t].storeCount,checked:!1})}),this.total=n.page.totalCount||0):this.$Message.error("业务员列表获取失败"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),this.$Message.error("业务员列表获取失败");case 14:case"end":return e.stop()}},e,this,[[3,11]])}));return e}(),handleEmpSelectChange:function(e){var t=this.empList.map(function(t){var a=(0,u.default)({},t);return a.empCode!=e.empCode?a.checked=!1:a.checked=!0,a});this.empList=t}},watch:{visible:function(e,t){1==e?(this.dialogVisible=!0,this.reloadStoreSelect()):this.dialogVisible=!1}}}},1088:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(241),i=r(n),s=a(242),o=r(s),l=a(146),u=r(l),d=a(239);t.default={props:{visible:{type:Boolean,default:!1}},data:function(){var e=this;return{dialogVisible:!1,query:{storeName:"",storeCode:"",currentPage:1,row:10},storeColumns:[{title:"选择",width:60,render:function(t,a){return t("input",{attrs:{type:"radio",checked:a.row.checked},on:{change:function(){e.handleStoreSelectChange(a.row)}}})}},{title:"门店名称",key:"storeName"},{title:"门店编号",key:"storeCode"},{title:"门店地址",key:"addressDetail"}],storeList:[],total:0}},methods:{handleOk:function(){for(var e=void 0,t=0;t<this.storeList.length;t++)this.storeList[t].checked&&(e=(0,u.default)({},this.storeList[t]));if(!e)return void this.$Message.error("未选择门店");this.dialogVisible=!1,this.$emit("on-select",e),this.$emit("update:visible",!1)},handleCancel:function(){this.$emit("update:visible",!1)},reloadStoreSelect:function(){this.query={storeName:"",storeCode:"",currentPage:1,row:10},this.queryStoreList()},handleSearch:function(){this.query.currentPage=1,this.queryStoreList()},queryStoreList:function(){function e(){return t.apply(this,arguments)}var t=(0,o.default)(i.default.mark(function e(){var t,a,r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,u.default)({},this.query),delete t.row,this.storeList=[],a=this,e.prev=4,e.next=7,this.$ajax({method:"POST",url:a.$util.apiConfig.traderManage.flowManage.costManage.queryStores,data:d.stringify(t)});case 7:r=e.sent,n=r.data,n.records instanceof Array&&(this.storeList=n.records,this.total=n.totalCount||0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),this.$Message.error("门店列表获取失败");case 15:case"end":return e.stop()}},e,this,[[4,12]])}));return e}(),handleStoreSelectChange:function(e){var t=this.storeList.map(function(t){var a=(0,u.default)({},t);return a.storeCode!=e.storeCode?a.checked=!1:a.checked=!0,a});this.storeList=t}},watch:{visible:function(e,t){1==e?(this.dialogVisible=!0,this.reloadStoreSelect()):this.dialogVisible=!1}}}},1110:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(239),n=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default={props:{visible:{default:!1,type:Boolean},orderId:{default:"2018092000007423",type:[String,Number]},orderDetail:{default:function(){return{}},type:Object}},data:function(){return{modalVisible:!1,orderMain:{},orderItems:[],warehouseList:[],outWarehouse:"",submiting:!1,toggleRender:!1}},mounted:function(){this.modalVisible=this.visible},methods:{outWarehouseChangeHandle:function(e){var t=this;if(""!=e){var a={};a.warehouseCode=e,a.materialCode79List=[],this.orderItems.forEach(function(e){a.materialCode79List.push(e.item79)}),this.$util.ajax.post("/omsCenter/logicStock/toWarehouseCode",a).then(function(e){if(console.log("仓库商品存量:",e),e.data.result){var a=e.data.result;t.orderItems.forEach(function(e){e.notEnoughStore=!0,e.sendCarNum=0,e.sendEaNum=0,a.forEach(function(t){e.item79==t.materialCode79&&(Number(e.needSendTotal)<=Number(t.totalNum)?(e.notEnoughStore=!1,e.sendCarNum=e.needSendCar,e.sendEaNum=e.needSendEa,t.totalNum-=e.needSendTotal):(e.sendCarNum=parseInt(Number(t.totalNum)/Number(e.packageNum)),e.sendCarNum<=0&&(e.sendCarNum=0),e.sendEaNum=Number(t.totalNum)%Number(e.packageNum),e.sendEaNum<=0&&(e.sendEaNum=0),t.totalNum=0))}),0==e.needSendTotal&&(e.notEnoughStore=!1)})}else t.orderItems.forEach(function(e){e.notEnoughStore=!0,e.sendCarNum=0,e.sendEaNum=0,0==e.needSendTotal&&(e.notEnoughStore=!1)});t.toggleRender=!t.toggleRender})}},cancel:function(){this.$emit("update:visible",!1)},submit:function(){var e=this,t=1;if(this.$store.state.app.statusInfo.promotionMode?t=this.$store.state.app.statusInfo.promotionMode:localStorage.promotionMode&&(t=localStorage.promotionMode),1==t){if(""==this.outWarehouse||void 0==this.outWarehouse||null==this.outWarehouse)return void this.$Modal.error({title:"请选择出库仓库",content:"出库仓库不存在"});var a={};a.orderId=this.orderId,a.warehouseCode=this.outWarehouse,a.orderState=this.orderMain.orderStatus,a.list=[];var r=!1,n=0;if(this.orderItems.forEach(function(e){var t=Number(e.sendCarNum)*Number(e.packageNum)+Number(e.sendEaNum);return t>Number(e.needSendTotal)?void(r=!0):(""===e.sendCarNum&&(e.sendCarNum=0),""===e.sendEaNum&&(e.sendEaNum=0),e.sendCarNum<=0&&e.sendEaNum<=0?void n++:void a.list.push({entryNo:e.id,code79:e.item79,carNum:e.needSendCar,eaNum:e.needSendEa,sendCarNum:e.sendCarNum,sendEaNum:e.sendEaNum,transformRule:e.packageNum,num:t}))}),r)return void this.$Modal.error({title:"出库数量填写错误",content:"填写的出库数量不能大于应发数"});if(n==this.orderItems.length)return void this.$Modal.error({title:"出库数量填写错误",content:"所有商品的出库数量不能全为0"});console.log("出库发送参数：",a),this.submiting=!0,this.$util.ajax.post("/trade/order/tcc/outToOrder",a).then(function(t){e.submiting=!1,console.log("出库返回结果",t),200==t.data.code?e.$Modal.success({title:"操作成功",content:t.data.message,onOk:function(){e.$emit("successCallback"),e.cancel()}}):e.$Modal.error({title:"操作失败",content:t.data.message})}).catch(function(t){console.error(t),e.$Modal.error({title:"http请求失败",content:"出库请求失败"})})}else 2==t&&(this.submiting=!0,this.$util.ajax.post("/trade/order/tcc/outToOrderV2",{orderId:this.orderId}).then(function(t){e.submiting=!1,console.log("出库返回结果",t),200==t.data.code?e.$Modal.success({title:"操作成功",content:t.data.message,onOk:function(){e.$emit("successCallback"),e.cancel()}}):e.$Modal.error({title:"操作失败",content:t.data.message})}).catch(function(t){e.$Modal.error({title:"http请求失败",content:"出库请求失败"})}))},formatNum:function(e){e.target.value=e.target.value.replace(/[^\d]/g,"")}},watch:{visible:function(e){var t=this;1==e?(this.outWarehouse="",this.warehouseList=this.$store.state.app.statusInfo.ware,this.$util.ajax.post("/trade/order/getDetail/json",n.default.stringify({orderId:this.orderId})).then(function(a){if(console.log("订单详情数据：",a),200==a.status){t.modalVisible=e,t.orderMain=a.data.result.tradeOrder.orderMain,t.orderItems=a.data.result.tradeOrder.orderItems;for(var r=0;r<t.orderItems.length;r++)t.orderItems[r].itemName+=" * "+t.orderItems[r].packageNum,t.orderItems[r].auditEaNum=t.orderItems[r].auditEaNum?Number(t.orderItems[r].auditEaNum):0,t.orderItems[r].outEaNum=t.orderItems[r].outEaNum?Number(t.orderItems[r].outEaNum):0,t.orderItems[r].auditEaNum>t.orderItems[r].outEaNum?(t.orderItems[r].needSendTotal=t.orderItems[r].auditEaNum-t.orderItems[r].outEaNum,t.orderItems[r].needSendCar=parseInt(t.orderItems[r].needSendTotal/t.orderItems[r].packageNum),t.orderItems[r].needSendEa=t.orderItems[r].needSendTotal%t.orderItems[r].packageNum,t.orderItems[r].sendCarNum=0,t.orderItems[r].sendEaNum=0,t.orderItems[r].notEnoughStore=!0):(t.orderItems[r].needSendTotal=0,t.orderItems[r].needSendCar=0,t.orderItems[r].needSendEa=0,t.orderItems[r].sendCarNum=0,t.orderItems[r].sendEaNum=0,t.orderItems[r].notEnoughStore=!1)}else t.$Modal.error({title:"HTTP请求错误",content:a.statusText})}).catch(function(e){console.log(e),t.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})):this.modalVisible=e}}}},1111:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(239),n=function(e){return e&&e.__esModule?e:{default:e}}(r),i=a(898);t.default={props:{visible:{default:!1,type:Boolean},orderId:{default:"2018092000007423",type:[String,Number]},orderDetail:{default:function(){return{}},type:Object}},data:function(){return{modalVisible:!1,remark:"",signTime:"",isCreateReceipt:!1,orderItems:[],orderMain:{},submiting:!1,voucherInfo:""}},mounted:function(){this.modalVisible=this.visible},methods:{cancel:function(){this.$emit("update:visible",!1)},submit:function(){var e=this;if(""==this.signTime)return void this.$Modal.error({title:"签收信息有误",content:"签收时间不能为空"});var t={};t.orderId=this.orderId,t.storeCode=this.orderMain.storeCode,t.receiptBy=this.orderMain.receiverName,t.receiptTime=this.signTime,t.receiptNote=this.remark,t.orderReceiptProductDTOList=[],t.isCreateReceipt=this.isCreateReceipt?1:0;var a=!1,r=0;if(this.orderItems.forEach(function(e){var n=Number(e.signCar)*Number(e.packageNum)+Number(e.signEa);if(n>Number(e.outEaNum))return void(a=!0);""===e.signCar&&(e.signCar=0),""===e.signEa&&(e.signEa=0),0==e.signCar&&0==e.signEa&&r++,t.orderReceiptProductDTOList.push({originalEntryNo:e.id,code79:e.item79,transformRule:e.packageNum,carNum:e.chuKuCar,eaNum:e.chuKuEA,deliveryByEa:e.outEaNum,receiptCarNum:e.signCar,receiptEaNum:e.signEa,totalNum:n,itemType:e.itemType})}),a)return void this.$Modal.error({title:"签收数量填写错误",content:"填写的签收数量不能大于发货数"});if(r==this.orderItems.length)return void this.$Modal.error({title:"签收数量填写错误",content:"所有商品的签收数量不能全为0"});var n=1;this.$store.state.app.statusInfo.promotionMode?n=this.$store.state.app.statusInfo.promotionMode:localStorage.promotionMode&&(n=localStorage.promotionMode);var i="/trade/order/updateOrderReceiptDTOSignIn";2==n&&(i="/trade/order/updateOrderReceiptDTOSignInV2"),console.log("签收发送数据：",t),this.submiting=!0,this.$util.ajax.post(i,t).then(function(t){e.submiting=!1,t.data.success?e.$Modal.success({title:"操作成功",content:t.data.message,onOk:function(){e.$emit("successCallback"),e.cancel()}}):e.$Modal.error({title:"操作失败",content:t.data.message})}).catch(function(t){e.submiting=!1,e.$Modal.error({title:"http请求失败",content:"签收请求失败"})})},signTimeChangeHandle:function(e){this.signTime=e},formatNum:function(e){event.target.value=event.target.value.replace(/[^\d]/g,"")}},watch:{visible:function(e){var t=this;1==e?(this.voucherInfo="",this.$util.ajax.post("/trade/order/getDetail/json",n.default.stringify({orderId:this.orderId})).then(function(a){if(console.log("订单详情数据：",a),200==a.status){t.modalVisible=e;var r=(new Date).getTime();t.signTime=(0,i.timestampToDay)(r,"yyyy-MM-dd hh:mm:ss"),t.orderMain=a.data.result.tradeOrder.orderMain,t.orderItems=a.data.result.tradeOrder.orderItems;for(var n=0;n<t.orderItems.length;n++)t.orderItems[n].itemName+=" * "+t.orderItems[n].packageNum,t.orderItems[n].outEaNum=t.orderItems[n].outEaNum?Number(t.orderItems[n].outEaNum):0,0!=t.orderItems[n].outEaNum?(t.orderItems[n].chuKuCar=Math.floor(t.orderItems[n].outEaNum/t.orderItems[n].packageNum),t.orderItems[n].chuKuEA=t.orderItems[n].outEaNum%t.orderItems[n].packageNum,t.orderItems[n].signCar=t.orderItems[n].chuKuCar,t.orderItems[n].signEa=t.orderItems[n].chuKuEA):(t.orderItems[n].chuKuEA=0,t.orderItems[n].chuKuCar=0,t.orderItems[n].signEaNum=0,t.orderItems[n].signCar=0,t.orderItems[n].signEa=0);var s=1;if(t.$store.state.app.statusInfo.promotionMode?s=t.$store.state.app.statusInfo.promotionMode:localStorage.promotionMode&&(s=localStorage.promotionMode),"O2O"==t.orderMain.tradeSourcePlatform&&2==s){var o={};o.orderMain={orderCode:t.orderMain.sourceOrderNo,orderPlatform:t.orderMain.tradeSourcePlatform,salesmanCode:t.orderMain.createPerson,storeCode:t.orderMain.storeCode,totalAmount:t.orderMain.itemToalAmount},o.orderItemList=[],t.orderItems.forEach(function(e){o.orderItemList.push({code79:e.code79,itemCnt:e.auditEaNum,itemUnit:0})}),t.$util.ajax.post("/trade/order/previewRealTimeIssueVoucher",o).then(function(e){if(200==e.data.code){var a=e.data.result.result.rows;if(a instanceof Array&&a.length>0){var r="";a.forEach(function(e){r+="【"+e.voucherTypeName+"】,【"+e.voucherPrice+"元】|"}),r=r.replace(/\|*$/g,""),t.voucherInfo="签收后，将发放如下代金券："+r+"（最终发券以实际发放为准）"}}})}}else t.$Modal.error({title:"HTTP请求错误",content:a.statusText})}).catch(function(e){console.log(e),t.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})):this.modalVisible=e}}}},1405:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{"mask-closable":!1,title:"选择业务员"},on:{"on-ok":e.handleOk,"on-cancel":e.handleCancel},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("Row",[a("span",[e._v("业务员")]),e._v(" "),a("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.query.empName,callback:function(t){e.$set(e.query,"empName",t)},expression:"query.empName"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSearch()}}},[e._v("查询")])],1),e._v(" "),a("Row",{staticStyle:{"margin-top":"20px"}},[a("Table",{attrs:{height:"280",columns:e.empColumns,data:e.empList}})],1),e._v(" "),a("Row",[a("Page",{staticStyle:{float:"right","margin-top":"20px"},attrs:{current:e.query.currentPage,total:e.total},on:{"update:current":function(t){e.$set(e.query,"currentPage",t)},"on-change":e.queryEmpList}})],1),e._v(" "),a("div",{staticStyle:{overflow:"hidden"},attrs:{slot:"footer"},slot:"footer"},[a("span",{staticStyle:{float:"right"}},[a("Button",{attrs:{size:"large"},on:{click:function(t){e.handleCancel()}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){e.handleOk()}}},[e._v("确定")])],1)])],1)},n=[];r._withStripped=!0;var i={render:r,staticRenderFns:n};t.default=i},1406:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{"mask-closable":!1,title:"选择门店"},on:{"on-ok":e.handleOk,"on-cancel":e.handleCancel},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("Row",[a("span",[e._v("门店名称")]),e._v(" "),a("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.query.storeName,callback:function(t){e.$set(e.query,"storeName",t)},expression:"query.storeName"}}),e._v(" "),a("span",[e._v("门店编码")]),e._v(" "),a("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.query.storeCode,callback:function(t){e.$set(e.query,"storeCode",t)},expression:"query.storeCode"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSearch()}}},[e._v("查询")])],1),e._v(" "),a("Row",{staticStyle:{"margin-top":"20px"}},[a("Table",{attrs:{height:"280",columns:e.storeColumns,data:e.storeList}})],1),e._v(" "),a("Row",[a("Page",{staticStyle:{float:"right","margin-top":"20px"},attrs:{current:e.query.currentPage,total:e.total},on:{"update:current":function(t){e.$set(e.query,"currentPage",t)},"on-change":e.queryStoreList}})],1),e._v(" "),a("div",{staticStyle:{overflow:"hidden"},attrs:{slot:"footer"},slot:"footer"},[a("span",{staticStyle:{float:"right"}},[a("Button",{attrs:{size:"large"},on:{click:function(t){e.handleCancel()}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){e.handleOk()}}},[e._v("确定")])],1)])],1)},n=[];r._withStripped=!0;var i={render:r,staticRenderFns:n};t.default=i},1407:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(241),i=r(n),s=a(146),o=r(s),l=a(242),u=r(l),d=a(239);t.default={props:{storeCode:"",visible:!1,edit:!1},data:function(){return{dialogVisible:!1,total:0,apiGroup:this.$util.apiConfig.traderManage.orderManage,query:{queryItemName:"",queryItem69:"",queryItem79:"",page:1},dataSource:[],dataSourceSelected:[],dataColumns:function(){var e=this,t=[{type:this.edit?"html":"selection",width:this.edit?0:60,align:"center"},{title:"商品名称",align:"center",width:200,key:"itemName"},{title:"商品类型",align:"center",key:"itemType",render:function(e,t){var a="-";if(t.row.itemType)switch(parseInt(t.row.itemType)){case 1:a="常规装";break;case 2:a="促销装";break;case 3:a="赠品/非单卖品";break;case 4:a="广宣品";break;default:a="-"}return e("span",a)}},{title:"商品标识",align:"center",key:"promotionType",render:function(e,t){var a="商品";if(t.row.promotionType)switch(parseInt(t.row.promotionType)){case 1:a="赠品";break;case 2:a="返利";break;case 3:a="特价";break;case 4:a="组合";break;default:a="-"}return e("span",a)}},{title:"条形码",align:"center",key:"code69",width:120},{title:"销售编码",align:"center",key:"code79",width:120},{title:"转化系数",align:"center",key:"changeUnitRate"},{title:"原价",align:"center",key:"marketPrice"},{title:"实际价格CAR",align:"center",key:"realMarketPrice",width:80,render:function(t,a){return t("input",{domProps:{value:a.row.realMarketPrice},on:{input:function(t){var r=t.target.value;r=r.replace(/[^\d.]/g,""),r=r.replace(/^\./g,""),r=r.replace(/\.{2,}/g,"."),r=r.replace(".","$#$").replace(/\./g,"").replace("$#$","."),r=r.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3"),a.row.realMarketPrice=r,t.target.value=r,e.dataSource[a.index]=a.row}},class:{"ivu-input":!0}})}},{title:"库存",align:"center",key:"validNum"},{title:"CAR数量",align:"center",key:"carNum",width:80,render:function(t,a){return t("input",{domProps:{value:a.row.carNum},class:"ivu-input",on:{input:function(t){var r=t.target.value;r=r.replace(/[^\d]/g,""),""!==r&&(r=parseInt(r)),a.row.carNum=r,t.target.value=r,e.dataSource[a.index]=a.row}}})}},{title:"EA数量",align:"center",key:"eaNum",width:80,render:function(t,a){return t("input",{domProps:{value:a.row.eaNum},class:"ivu-input",on:{input:function(t){var r=t.target.value;r=r.replace(/[^\d]/g,""),""!==r&&(r=parseInt(r)),a.row.eaNum=r,t.target.value=r,e.dataSource[a.index]=a.row}}})}}];return this.edit&&t.splice(0,1),t},currentRow:null}},methods:{add:function(){this.returnSelectedGoods()},handleCancel:function(){this.$emit("update:visible",!1)},addAndClose:function(){this.returnSelectedGoods(),this.$emit("update:visible",!1)},returnSelectedGoods:function(){var e=this.$refs.goodsTable.getSelection();this.$emit("on-selected",e)},search:function(){this.query.page=1,this.queryList()},resetQuery:function(){this.query={queryItemName:"",queryItem69:"",queryItem79:"",page:1},this.queryList()},queryList:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a,r,n,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.dataSource=[],this.dataSourceSelected=[],t=[],a=[],e.prev=4,e.next=7,this.$ajax.post(this.apiGroup.orderItemssurUrl+"?number="+Math.random(),d.stringify((0,o.default)({},this.query,{storecode:this.storeCode})));case 7:r=e.sent,n=r.data,200==n.code?(s=n.result.pager,s.records instanceof Array&&(this.dataSource=s.records.map(function(e){a.push(e.code79);var t=parseFloat(e.marketPrice).toFixed(2),r=0;isNaN(t)&&(t="0.00");var n=e.inventory,i=e.changeUnitRate,s="0/0";if(0!=n&&0!=i&&null!=i){s=(parseInt(n/i)||0)+"/"+(n%i||0)}return r=t,(0,o.default)({},e,{validNum:s,marketPrice:t,realMarketPrice:r,carNum:0,eaNum:0,itemComments:"",promotionType:""})})),isNaN(Number(s.totalCount))||(this.total=parseInt(s.totalCount))):t.push("商品数据获取失败"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),t.push("商品数据获取失败");case 16:t.length>0&&this.$Message.error(t.join(",")),this.setStock();case 18:case"end":return e.stop()}},e,this,[[4,12]])}));return e}(),handleInput:function(e,t,a){var r=t.target.value,n=e.column.key;r=r.replace(/[^\-?\d.]/g,""),e.row[n]=r,r.length>1&&"0"==r[0]&&"."!=r[1]&&(e.row[n]=r.substr(1)),""==t.target.value&&(e.row[n]=0),this.dataSource[e.index]=(0,o.default)({},this.dataSource[e.index],e.row),setTimeout(function(a){return t.target.value=e.row[n]})},setStock:function(){var e=this;this.dataSource.map(function(){var t=(0,u.default)(i.default.mark(function t(a){var r,n,s,o,l,u,d;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$ajax(e.apiGroup.warehouseStock+"?materialCode79="+a.code79);case 3:r=t.sent,n=r.data,200==n.code&&n.result.resultList instanceof Array&&n.result.resultList.length>0&&(s=0,o=n.result.resultList[0].validBoxNum,l=n.result.resultList[0].validNum,u=n.result.resultList[0].validSingleNum,isNaN(l)&&(l=0),isNaN(o)&&(o=0),isNaN(u)&&(u=0),s=l,d="0/0",0!=s&&(d=o+"/"+u),a.inventory=s,a.validNum=d),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}},t,e,[[0,8]])}));return function(e){return t.apply(this,arguments)}}())},handleCurrentChange:function(e){this.currentRow=e},editGoods:function(){var e=this,t=[];this.dataSource.forEach(function(a){a.code79==e.currentRow.code79&&(t=[a])}),this.$emit("on-selected",t),this.$emit("update:visible",!1)}},watch:{visible:function(e,t){1==e?(this.dialogVisible=!0,this.resetQuery()):this.dialogVisible=!1}}}},1412:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(241),i=r(n),s=a(242),o=r(s),l=a(239),u=r(l),d=a(984);t.default={name:"AddrSel",model:{prop:"addrValue",event:"addr-change"},props:{inputStyles:{type:Object,default:function(){return{height:"32px",width:"150px"}}},addrValue:{type:Object,default:function(){return{shengNum:"",shiNum:"",quNum:"",shengValue:"",shiValue:"",quValue:""}}},shengDisable:{type:Boolean,default:!1},shiDisable:{type:Boolean,default:!1},quDisable:{type:Boolean,default:!1}},data:function(){return{initAddrCode:Number((0,d.createUniqueRandomNum24)()),sheng:[],shengValue:"",shengNum:0,shi:[],shiValue:"",shiNum:0,qu:[],quValue:"",quNum:0,shengLoading:!1,shiLoading:!1,quLoading:!1}},created:function(){var e=this;this.shengNum=this.initAddrCode,this.shiNum=this.initAddrCode,this.quNum=this.initAddrCode,this.shengLoading=!0,this.sheng=[];var t=this;this.$util.ajax.post(t.$util.apiConfig.traderManage.infoManage.storeManage.addrSelUrl,u.default.stringify({parentCode:0})).then(function(t){e.shengLoading=!1,200==t.status?e.sheng=t.data:console.warn("获取省选择列表数据失败")}).catch(function(e){console.log(e)})},mounted:function(){this.init()},methods:{init:function(){function e(){return t.apply(this,arguments)}var t=(0,o.default)(i.default.mark(function e(){var t,a,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this,this.shengNum!=this.initAddrCode||this.shiNum!=this.initAddrCode||this.quNum!=this.initAddrCode||""!=this.shengValue||""!=this.shiValue||""!=this.quValue){e.next=3;break}return e.abrupt("return");case 3:if(this.shengNum==this.initAddrCode){e.next=13;break}return this.shiLoading=!0,this.shi=[],e.next=8,this.$util.ajax.post(t.$util.apiConfig.traderManage.infoManage.storeManage.addrSelUrl,u.default.stringify({parentCode:this.shengNum}));case 8:a=e.sent,console.log(a),200==a.status?(this.shiLoading=!1,this.shi=a.data):console.warn("获取市选择列表数据失败"),e.next=19;break;case 13:this.shengValue="",this.shengNum=this.initAddrCode,this.shiValue="",this.shiNum=this.initAddrCode,this.quValue="",this.quNum=this.initAddrCode;case 19:if(this.shiNum==this.initAddrCode){e.next=28;break}return this.quLoading=!0,this.qu=[],e.next=24,this.$util.ajax.post(t.$util.apiConfig.traderManage.infoManage.storeManage.addrSelUrl,u.default.stringify({parentCode:this.shiNum}));case 24:r=e.sent,200==r.status?(this.quLoading=!1,this.qu=r.data):console.warn("获取区选择列表数据失败"),e.next=31;break;case 28:this.shiValue="",this.quValue="",this.quNum=this.initAddrCode;case 31:case"end":return e.stop()}},e,this)}));return e}(),selectShengHandle:function(e){var t=this;if(this.shengValue=e.label,this.shengNum=e.value,this.shiValue="",this.quValue="",this.shiNum=this.initAddrCode,this.quNum=this.initAddrCode,this.$emit("addr-change",{shengValue:"请选择省份"==this.shengValue?"":this.shengValue,shiValue:"请选择市"==this.shiValue?"":this.shiValue,quValue:"请选择区"==this.quValue?"":this.quValue,shengNum:this.shengNum==this.initAddrCode?"":this.shengNum,shiNum:this.shiNum==this.initAddrCode?"":this.shiNum,quNum:this.quNum==this.initAddrCode?"":this.quNum}),this.shengNum!=this.initAddrCode){this.shiLoading=!0,this.shi=[],this.qu=[];var a=this;this.$util.ajax.post(a.$util.apiConfig.traderManage.infoManage.storeManage.addrSelUrl,u.default.stringify({parentCode:this.shengNum})).then(function(e){200==e.status?(t.shiLoading=!1,t.shi=e.data):console.warn("获取市选择列表数据失败")}).catch(function(e){console.log(e)})}},selectShiHandle:function(e){var t=this;if(this.shiValue=e.label,this.shiNum=e.value,this.quValue="",this.quNum=this.initAddrCode,this.$emit("addr-change",{shengValue:"请选择省份"==this.shengValue?"":this.shengValue,shiValue:"请选择市"==this.shiValue?"":this.shiValue,quValue:"请选择区"==this.quValue?"":this.quValue,shengNum:this.shengNum==this.initAddrCode?"":this.shengNum,shiNum:this.shiNum==this.initAddrCode?"":this.shiNum,quNum:this.quNum==this.initAddrCode?"":this.quNum}),this.shiNum!=this.initAddrCode){this.quLoading=!0,this.qu=[];var a=this;this.$util.ajax.post(a.$util.apiConfig.traderManage.infoManage.storeManage.addrSelUrl,u.default.stringify({parentCode:this.shiNum})).then(function(e){200==e.status?(t.quLoading=!1,t.qu=e.data):console.warn("获取区选择列表数据失败")}).catch(function(e){console.log(e)})}},selectQuHandle:function(e){this.quValue=e.label,this.quNum=e.value,this.$emit("addr-change",{shengValue:"请选择省份"==this.shengValue?"":this.shengValue,shiValue:"请选择市"==this.shiValue?"":this.shiValue,quValue:"请选择区"==this.quValue?"":this.quValue,shengNum:this.shengNum==this.initAddrCode?"":this.shengNum,shiNum:this.shiNum==this.initAddrCode?"":this.shiNum,quNum:this.quNum==this.initAddrCode?"":this.quNum})}},watch:{addrValue:{handler:function(){function e(e,a){return t.apply(this,arguments)}var t=(0,o.default)(i.default.mark(function e(t,a){var r,n,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this,e.prev=1,t.shengNum==a.shengNum){e.next=10;break}if(t.shengNum==this.shengNum||""==t.shengNum){e.next=10;break}return this.shi=[],this.qu=[],e.next=8,this.$util.ajax.post(r.$util.apiConfig.traderManage.infoManage.storeManage.addrSelUrl,u.default.stringify({parentCode:t.shengNum}));case 8:n=e.sent,200==n.status?(this.shiLoading=!1,this.shi=n.data):console.warn("获取市选择列表数据失败");case 10:if(t.shiNum==a.shiNum){e.next=17;break}if(t.shiNum==this.shiNum||""==t.shiNum){e.next=17;break}return this.qu=[],e.next=15,this.$util.ajax.post(r.$util.apiConfig.traderManage.infoManage.storeManage.addrSelUrl,u.default.stringify({parentCode:t.shiNum}));case 15:s=e.sent,200==s.status?(this.quLoading=!1,this.qu=s.data):console.warn("获取区选择列表数据失败");case 17:this.shengValue=t.shengValue,this.shengNum=""==t.shengNum?this.initAddrCode:t.shengNum,this.shiValue=t.shiValue,this.shiNum=""==t.shiNum?this.initAddrCode:t.shiNum,this.quValue=t.quValue,this.quNum=""==t.quNum?this.initAddrCode:t.quNum,e.next=28;break;case 25:e.prev=25,e.t0=e.catch(1),console.warn("获取地址选择列表数据失败");case 28:case"end":return e.stop()}},e,this,[[1,25]])}));return e}(),deep:!0}}}},1424:function(e,t,a){var r=a(1425);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(43)("3ebb759f",r,!1,{})},1425:function(e,t,a){t=e.exports=a(42)(!1),t.push([e.i,"\n.red[data-v-0b21ec50] {\n  color: red;\n}\n.custom-table[data-v-0b21ec50] {\n  width: 100%;\n  text-align: center;\n  line-height: 48px;\n  border: 1px solid #ddd;\n}\n.custom-table th[data-v-0b21ec50] {\n  color: #666;\n  background-color: #eee;\n  font-weight: normal;\n  font-size: 14px;\n  line-height: 30px;\n}\n.custom-table tr th[data-v-0b21ec50],\n.custom-table tr td[data-v-0b21ec50] {\n  border-right: 1px solid #ddd;\n  border-bottom: 1px solid #ddd;\n  box-sizing: border-box;\n  padding: 5px;\n}\n.custom-table tr td[data-v-0b21ec50] {\n  line-height: 30px;\n  font-size: 12px;\n}\n.custom-table tbody tr[data-v-0b21ec50]:nth-of-type(2n) {\n  background: #f5f5f5;\n}\n.custom-table tbody tr:last-of-type td[data-v-0b21ec50] {\n  border-bottom: none;\n}\n.base[data-v-0b21ec50] {\n  border: 1px solid #aaa;\n  margin-bottom: 20px;\n}\n.base-row[data-v-0b21ec50] {\n  border-bottom: 1px solid #aaa;\n}\n.base-row[data-v-0b21ec50]:last-of-type {\n  border-bottom: 0;\n}\n.base-row > div[data-v-0b21ec50] {\n  line-height: 36px;\n}\n.base-row > div.label[data-v-0b21ec50] {\n  background: #eee;\n  text-align: right;\n  padding-right: 20px;\n}\n.base-row > div.content[data-v-0b21ec50] {\n  border-left: 1px solid #aaa;\n  padding: 0 20px;\n}\n.tipsFont[data-v-0b21ec50] {\n  font-family: 'Microsoft YaHei Bold', 'Microsoft YaHei';\n  font-weight: 700;\n  font-style: normal;\n  font-size: 18px;\n  color: #666666;\n  line-height: 200px;\n  text-align: center;\n  height: 200px;\n}\n",""])},1426:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{title:"订单出库",width:"550"},on:{"on-cancel":e.cancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[2!=e.$store.state.app.statusInfo.promotionMode?a("div",[a("div",{staticClass:"base"},[a("Row",{staticClass:"base-row"},[a("Col",{staticClass:"label",attrs:{span:"8"}},[e._v("出库仓库")]),e._v(" "),a("Col",{staticClass:"content",attrs:{span:"16"}},[a("Select",{on:{"on-change":e.outWarehouseChangeHandle},model:{value:e.outWarehouse,callback:function(t){e.outWarehouse=t},expression:"outWarehouse"}},e._l(e.warehouseList,function(t){return a("Option",{key:t.id,attrs:{value:t.warehouseCode}},[e._v(e._s(t.warehouseName))])}))],1)],1),e._v(" "),a("Row",{staticClass:"base-row"},[a("Col",{staticClass:"label",attrs:{span:"8"}},[e._v("门店名称")]),e._v(" "),a("Col",{staticClass:"content",attrs:{span:"16"}},[e._v(e._s(e.orderMain.storeName))])],1),e._v(" "),a("Row",{staticClass:"base-row"},[a("Col",{staticClass:"label",attrs:{span:"8"}},[e._v("所在区域")]),e._v(" "),a("Col",{staticClass:"content",attrs:{span:"16"}},[e._v(e._s(e.orderMain.provinceName)+e._s(e.orderMain.cityName)+e._s(e.orderMain.areaName))])],1),e._v(" "),a("Row",{staticClass:"base-row"},[a("Col",{staticClass:"label",attrs:{span:"8"}},[e._v("详细地址")]),e._v(" "),a("Col",{staticClass:"content",attrs:{span:"16"}},[a("p",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",width:"320px"}},[e._v(e._s(e.orderMain.detailAddress))])])],1),e._v(" "),a("Row",{staticClass:"base-row"},[a("Col",{staticClass:"label",attrs:{span:"8"}},[e._v("联系电话")]),e._v(" "),a("Col",{staticClass:"content",attrs:{span:"16"}},[e._v(e._s(e.orderMain.receiverMobile))])],1)],1),e._v(" "),a("div",{staticClass:"table"},[a("table",{staticClass:"custom-table",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[a("colgroup",[a("col",{attrs:{width:"200"}})]),e._v(" "),a("thead",[a("tr",[a("th",{staticStyle:{width:"300px"}},[e._v("商品名称")]),e._v(" "),a("th",[a("span",[e._v("应发数")]),e._v(" "),a("span",[e._v("CAR/EA")])]),e._v(" "),a("th",[a("span",[e._v("实发数")]),e._v(" "),a("span",[e._v("CAR/EA")])])])]),e._v(" "),a("tbody",e._l(e.orderItems,function(t){return t.needSendTotal>0?a("tr",{key:t.id,class:e.toggleRender},[a("td",[e._v(e._s(t.itemName))]),e._v(" "),a("td",{class:{red:t.notEnoughStore}},[e._v(e._s(t.needSendCar||0)+"/"+e._s(t.needSendEa||0))]),e._v(" "),a("td",{staticStyle:{width:"150px"}},[a("Row",{attrs:{gutter:5}},[a("Col",{attrs:{span:"12"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sendCarNum,expression:"item.sendCarNum"}],staticClass:"ivu-input",attrs:{disabled:t.auditEaNum<=t.outEaNum,placeholder:"CAR"},domProps:{value:t.sendCarNum},on:{input:[function(a){a.target.composing||e.$set(t,"sendCarNum",a.target.value)},e.formatNum]}})]),e._v(" "),a("Col",{attrs:{span:"12"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.sendEaNum,expression:"item.sendEaNum"}],staticClass:"ivu-input",attrs:{disabled:t.auditEaNum<=t.outEaNum,placeholder:"EA"},domProps:{value:t.sendEaNum},on:{input:[function(a){a.target.composing||e.$set(t,"sendEaNum",a.target.value)},e.formatNum]}})])],1)],1)]):e._e()}))])])]):e._e(),e._v(" "),2==e.$store.state.app.statusInfo.promotionMode?a("div",{staticClass:"tipsFont"},[a("span",[e._v("此订单即将出库，确认吗？")])]):e._e(),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{loading:e.submiting,type:"primary"},on:{click:e.submit}},[e._v("确认")])],1)])},n=[];r._withStripped=!0;var i={render:r,staticRenderFns:n};t.default=i},1427:function(e,t,a){var r=a(1428);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(43)("eb351b5c",r,!1,{})},1428:function(e,t,a){t=e.exports=a(42)(!1),t.push([e.i,"\n.row .grid[data-v-47bc7625]{\r\n    height: 50px;\r\n    border-top: 1px #e5e5e5 solid;\r\n    border-left: 1px #e5e5e5 solid;\r\n    line-height: 50px;\r\n    padding:0 10px;\n}\n.row .grid[data-v-47bc7625]:last-child{\r\n    border-right: 1px #e5e5e5 solid;\n}\n.row .grid[data-v-47bc7625]:nth-child(odd){\r\n    background-color: #eee;\r\n    text-align: right;\n}\n.last-row .grid[data-v-47bc7625]{\r\n    border-bottom: 1px #e5e5e5 solid;\n}\n.goods-table[data-v-47bc7625],\r\n.goods-table th[data-v-47bc7625], \r\n.goods-table td[data-v-47bc7625] {\r\n    border: 1px #e5e5e5 solid;\r\n    padding: 5px;\n}\n.goods-table td + td[data-v-47bc7625]{\r\n    text-align: center;\n}\n.goods-table th[data-v-47bc7625] {\r\n    background-color: #eee;\n}\n.itemContenter[data-v-47bc7625]{\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    width: 155px;\n}\n.goods-quantity-input *[data-v-47bc7625]{\r\n    display: inline-block;\r\n    width: 50px;\n}\r\n\r\n\r\n\r\n",""])},1429:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("modal",{attrs:{width:"600",title:"订单签收"},on:{"on-cancel":e.cancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[a("div",[a("Row",{staticClass:"row"},[a("Col",{staticClass:"grid",attrs:{span:"4"}},[a("span",[e._v("订单单号")])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"8"}},[a("span",[e._v(e._s(e.orderMain.orderNo))])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"4"}},[a("span",[e._v("门店名称")])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"8"}},[a("p",[e._v(e._s(e.orderMain.storeName))])])],1),e._v(" "),a("Row",{staticClass:"row"},[a("Col",{staticClass:"grid",attrs:{span:"4"}},[a("span",[e._v("所在区域")])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"8"}},[a("p",{staticClass:"itemContenter"},[e._v(e._s(e.orderMain.provinceName)+e._s(e.orderMain.cityName)+e._s(e.orderMain.areaName))])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"4"}},[a("span",[e._v("详细地址")])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"8"}},[a("p",{staticClass:"itemContenter"},[e._v(e._s(e.orderMain.detailAddress))])])],1),e._v(" "),a("Row",{staticClass:"row"},[a("Col",{staticClass:"grid",attrs:{span:"4"}},[a("span",[e._v("联系电话")])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"8"}},[a("span",[e._v(e._s(e.orderMain.receiverMobile))])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"4"}},[a("span",[e._v("签收人")])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"8"}},[a("Input",{attrs:{type:"text",placeholder:"请输入签收人",maxlength:100},model:{value:e.orderMain.receiverName,callback:function(t){e.$set(e.orderMain,"receiverName","string"==typeof t?t.trim():t)},expression:"orderMain.receiverName"}})],1)],1),e._v(" "),a("Row",{staticClass:"row"},[a("Col",{staticClass:"grid",attrs:{span:"4"}},[a("span",[e._v("签收时间")])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"8"}},[a("date-picker",{attrs:{value:e.signTime,format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"请选择时间"},on:{"on-change":e.signTimeChangeHandle}})],1),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"4"}},[a("span",[e._v("是现金单")])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"8"}},[a("Checkbox",{model:{value:e.isCreateReceipt,callback:function(t){e.isCreateReceipt=t},expression:"isCreateReceipt"}})],1)],1),e._v(" "),a("Row",{staticClass:"row last-row"},[a("Col",{staticClass:"grid",attrs:{span:"4"}},[a("span",[e._v("签收备注")])]),e._v(" "),a("Col",{staticClass:"grid",attrs:{span:"20"}},[a("Input",{attrs:{type:"text",placeholder:"请输入签收备注",maxlength:200},model:{value:e.remark,callback:function(t){e.remark="string"==typeof t?t.trim():t},expression:"remark"}})],1)],1),e._v(" "),a("br"),e._v(" "),a("Row",[e._v("\n            商品明细\n        ")]),e._v(" "),a("br"),e._v(" "),a("table",{staticClass:"goods-table",staticStyle:{width:"100%","border-collapse":"collapse"}},[a("thead",[a("tr",[a("th",{staticStyle:{width:"360px"}},[e._v("\n                        商品名称\n                    ")]),e._v(" "),a("th",[a("div",[e._v("发货数")]),e._v(" "),a("div",[e._v("CAR/EA")])]),e._v(" "),a("th",[a("div",[e._v("签收数")]),e._v(" "),a("div",[e._v("CAR/EA")])])])]),e._v(" "),a("tbody",e._l(e.orderItems,function(t){return 0!=t.outEaNum?a("tr",{key:t.id},[a("td",[e._v(e._s(t.itemName))]),e._v(" "),a("td",[e._v(e._s(t.chuKuCar||0)+"/"+e._s(t.chuKuEA||0))]),e._v(" "),a("td",{staticClass:"goods-quantity-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.signCar,expression:"item.signCar"}],staticClass:"ivu-input",attrs:{type:"text",placeholder:"CAR"},domProps:{value:t.signCar},on:{input:[function(a){a.target.composing||e.$set(t,"signCar",a.target.value)},e.formatNum]}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.signEa,expression:"item.signEa"}],staticClass:"ivu-input",attrs:{type:"text",placeholder:"EA"},domProps:{value:t.signEa},on:{input:[function(a){a.target.composing||e.$set(t,"signEa",a.target.value)},e.formatNum]}})])]):e._e()}))]),e._v(" "),a("br"),e._v(" "),e.voucherInfo?a("p",[e._v(e._s(e.voucherInfo))]):e._e()],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{staticStyle:{width:"92px"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),a("i-button",{staticStyle:{width:"92px"},attrs:{loading:e.submiting,type:"primary"},on:{click:e.submit}},[e._v("确认")])],1)])},n=[];r._withStripped=!0;var i={render:r,staticRenderFns:n};t.default=i},1444:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(241),i=r(n),s=a(146),o=r(s),l=a(242),u=r(l),d=a(239);t.default={props:{storeCode:"",visible:!1,edit:!1},data:function(){return{dialogVisible:!1,total:0,apiGroup:this.$util.apiConfig.traderManage.orderManage,query:{itemName:"",code69:"",code79:"",page:1},dataSource:[],dataSourceSelected:[],dataColumns:function(){var e=this,t=[{type:this.edit?"html":"selection",width:this.edit?0:60,align:"center"},{title:"商品名称",align:"center",width:200,key:"itemName"},{title:"商品标识",align:"center",key:"promotionType",render:function(e,t){var a="商品";if(t.row.promotionType)switch(parseInt(t.row.promotionType)){case 1:a="赠品";break;case 2:a="返利";break;case 3:a="特价";break;case 4:a="组合";break;default:a="-"}return e("span",a)}},{title:"条形码",align:"center",key:"code69",width:120},{title:"销售编码",align:"center",key:"code79",width:120},{title:"转化系数",align:"center",key:"changeUnitRate"},{title:"库存",align:"center",key:"validNum"},{title:"CAR数量",align:"center",key:"carNum",width:80,render:function(t,a){return t("input",{domProps:{value:a.row.carNum},class:"ivu-input",on:{input:function(t){var r=t.target.value;r=r.replace(/[^\d]/g,""),""!==r&&(r=parseInt(r)),a.row.carNum=r,t.target.value=r,e.dataSource[a.index]=a.row}}})}},{title:"EA数量",align:"center",key:"eaNum",width:80,render:function(t,a){return t("input",{domProps:{value:a.row.eaNum},class:"ivu-input",on:{input:function(t){var r=t.target.value;r=r.replace(/[^\d]/g,""),""!==r&&(r=parseInt(r)),a.row.eaNum=r,t.target.value=r,e.dataSource[a.index]=a.row}}})}}];return this.edit&&t.splice(0,1),t},currentRow:null}},methods:{add:function(){this.returnSelectedGoods()},handleCancel:function(){this.$emit("update:visible",!1)},addAndClose:function(){this.returnSelectedGoods(),this.$emit("update:visible",!1)},returnSelectedGoods:function(){var e=this.$refs.giftTable.getSelection();this.$emit("on-selected",e)},search:function(){this.query.page=1,this.queryList()},resetQuery:function(){this.query={itemName:"",code69:"",code79:"",page:1},this.queryList()},queryList:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a,r,n,s;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.dataSource=[],this.dataSourceSelected=[],t=[],a=[],e.prev=4,e.next=7,this.$ajax.post(this.apiGroup.ordergiftJson+"?number="+Math.random(),d.stringify((0,o.default)({},this.query,{storecode:this.storeCode})));case 7:r=e.sent,n=r.data,200==n.code?(s=n.result.pager,s.records instanceof Array&&(this.dataSource=s.records.map(function(e){a.push(e.code79);var t=parseFloat(e.marketPrice).toFixed(2);isNaN(t)&&(t="0.00"),e.inventory=0;return(0,o.default)({},e,{validNum:"0/0",marketPrice:t,realMarketPrice:0,carNum:0,eaNum:0,itemComments:"",promotionType:1})})),isNaN(Number(s.totalCount))||(this.total=parseInt(s.totalCount))):t.push("赠品数据获取失败"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),t.push("赠品数据获取失败");case 16:t.length>0&&this.$Message.error(t.join(",")),this.setStock();case 18:case"end":return e.stop()}},e,this,[[4,12]])}));return e}(),setStock:function(){var e=this;this.dataSource.map(function(){var t=(0,u.default)(i.default.mark(function t(a){var r,n,s,o,l,u,d;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$ajax(e.apiGroup.warehouseStock+"?materialCode79="+a.code79);case 3:r=t.sent,n=r.data,200==n.code&&n.result.resultList instanceof Array&&n.result.resultList.length>0&&(s=0,o=n.result.resultList[0].validBoxNum,l=n.result.resultList[0].validNum,u=n.result.resultList[0].validSingleNum,isNaN(l)&&(l=0),isNaN(o)&&(o=0),isNaN(u)&&(u=0),s=l,d="0/0",0!=s&&(d=o+"/"+u),a.inventory=s,a.validNum=d),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}},t,e,[[0,8]])}));return function(e){return t.apply(this,arguments)}}())},handleCurrentChange:function(e){this.currentRow=e},editGoods:function(){var e=this,t=[];this.dataSource.forEach(function(a){a.code79==e.currentRow.code79&&(t=[a])}),this.$emit("on-selected",t),this.$emit("update:visible",!1)}},watch:{visible:function(e,t){1==e?(this.dialogVisible=!0,this.resetQuery()):this.dialogVisible=!1}}}},1446:function(e,t,a){var r=a(1447);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(43)("88aff544",r,!1,{})},1447:function(e,t,a){t=e.exports=a(42)(!1),t.push([e.i,"\n.custom-row[data-v-b1c97b98] {\n  margin-bottom: 15px;\n}\n",""])},1448:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{width:1200,title:"商品选择"},on:{"on-cancel":e.handleCancel},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("Row",{staticClass:"custom-row",attrs:{gutter:16}},[a("Col",{attrs:{span:"5"}},[a("div",[e._v("商品名称:")]),e._v(" "),a("div",[a("Input",{model:{value:e.query.queryItemName,callback:function(t){e.$set(e.query,"queryItemName",t)},expression:"query.queryItemName"}})],1)]),e._v(" "),a("Col",{attrs:{span:"5"}},[a("div",[e._v("条形码:")]),e._v(" "),a("div",[a("Input",{model:{value:e.query.queryItem69,callback:function(t){e.$set(e.query,"queryItem69",t)},expression:"query.queryItem69"}})],1)]),e._v(" "),a("Col",{attrs:{span:"5"}},[a("div",[e._v("销售编码:")]),e._v(" "),a("div",[a("Input",{model:{value:e.query.queryItem79,callback:function(t){e.$set(e.query,"queryItem79",t)},expression:"query.queryItem79"}})],1)]),e._v(" "),a("Col",{attrs:{span:"5"}},[a("div",[e._v("商品类型:")]),e._v(" "),a("div",[a("Select",{model:{value:e.query.itemType,callback:function(t){e.$set(e.query,"itemType",t)},expression:"query.itemType"}},[a("Option",{attrs:{value:""}},[e._v("请选择")]),e._v(" "),a("Option",{attrs:{value:"1"}},[e._v("常规装")]),e._v(" "),a("Option",{attrs:{value:"2"}},[e._v("促销装")]),e._v(" "),a("Option",{attrs:{value:"3"}},[e._v("赠品/非单卖品")]),e._v(" "),a("Option",{attrs:{value:"4"}},[e._v("广宣品")])],1)],1)]),e._v(" "),a("Col",{attrs:{span:"4"}},[a("div",[e._v(" ")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.search()}}},[e._v("查询")])],1)],1),e._v(" "),a("Row",[a("Table",{ref:"goodsTable",attrs:{columns:e.dataColumns(),data:e.dataSource,"highlight-row":e.edit},on:{"on-current-change":e.handleCurrentChange}})],1),e._v(" "),a("Row",[a("Page",{staticStyle:{float:"right","margin-top":"20px"},attrs:{"page-size":5,current:e.query.page,total:e.total},on:{"update:current":function(t){e.$set(e.query,"page",t)},"on-change":e.queryList}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[0==e.edit?a("Button",{attrs:{type:"primary"},on:{click:function(t){e.add()}}},[e._v("添加")]):e._e(),e._v(" "),0==e.edit?a("Button",{on:{click:function(t){e.addAndClose()}}},[e._v("添加并关闭")]):e._e(),e._v(" "),e.edit?a("Button",{on:{click:function(t){e.editGoods()}}},[e._v("确认")]):e._e()],1)],1)},n=[];r._withStripped=!0;var i={render:r,staticRenderFns:n};t.default=i},1468:function(e,t,a){var r=a(1469);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(43)("f3f85fb2",r,!1,{})},1469:function(e,t,a){t=e.exports=a(42)(!1),t.push([e.i,"\n.item[data-v-43ed94aa]{\r\n    line-height: 24px;\r\n    margin-top: 10px;\n}\n.label[data-v-43ed94aa]{\r\n    display: inline-block;\r\n    width: 80px;\r\n    text-align: left;\n}\r\n",""])},1470:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"absolute"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("收货人地址")]),e._v(" "),a("i-select",{style:e.inputStyles,attrs:{loading:e.shengLoading,disabled:e.shengDisable,"label-in-value":!0},on:{"on-change":e.selectShengHandle},model:{value:e.shengNum,callback:function(t){e.shengNum=t},expression:"shengNum"}},[a("i-option",{attrs:{value:e.initAddrCode,label:"请选择省份"}}),e._v(" "),e._l(e.sheng,function(t){return a("i-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.name))])})],2)],1),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"}),e._v(" "),a("i-select",{style:e.inputStyles,attrs:{loading:e.shiLoading,disabled:e.shiDisable,"label-in-value":!0},on:{"on-change":e.selectShiHandle},model:{value:e.shiNum,callback:function(t){e.shiNum=t},expression:"shiNum"}},[a("i-option",{attrs:{value:e.initAddrCode,label:"请选择市"}}),e._v(" "),e._l(e.shi,function(t){return a("i-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.name))])})],2)],1),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"}),e._v(" "),a("i-select",{style:e.inputStyles,attrs:{loading:e.quLoading,disabled:e.quDisable,"label-in-value":!0},on:{"on-change":e.selectQuHandle},model:{value:e.quNum,callback:function(t){e.quNum=t},expression:"quNum"}},[a("i-option",{attrs:{value:e.initAddrCode,label:"请选择区"}}),e._v(" "),e._l(e.qu,function(t){return a("i-option",{key:t.code,attrs:{value:t.code}},[e._v(e._s(t.name))])})],2)],1)])},n=[];r._withStripped=!0;var i={render:r,staticRenderFns:n};t.default=i},1493:function(e,t,a){var r=a(1494);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(43)("17fc3aaa",r,!1,{})},1494:function(e,t,a){t=e.exports=a(42)(!1),t.push([e.i,"\n.custom-row[data-v-64f814a4] {\n  margin-bottom: 15px;\n}\n",""])},1495:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{width:1200,title:"赠品选择"},on:{"on-cancel":e.handleCancel},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("Row",{staticClass:"custom-row",attrs:{gutter:16}},[a("Col",{attrs:{span:"5"}},[a("div",[e._v("商品名称:")]),e._v(" "),a("div",[a("Input",{model:{value:e.query.itemName,callback:function(t){e.$set(e.query,"itemName",t)},expression:"query.itemName"}})],1)]),e._v(" "),a("Col",{attrs:{span:"5"}},[a("div",[e._v("条形码:")]),e._v(" "),a("div",[a("Input",{model:{value:e.query.code69,callback:function(t){e.$set(e.query,"code69",t)},expression:"query.code69"}})],1)]),e._v(" "),a("Col",{attrs:{span:"5"}},[a("div",[e._v("销售编码:")]),e._v(" "),a("div",[a("Input",{model:{value:e.query.code79,callback:function(t){e.$set(e.query,"code79",t)},expression:"query.code79"}})],1)]),e._v(" "),a("Col",{attrs:{span:"4"}},[a("div",[e._v(" ")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.search()}}},[e._v("查询")])],1)],1),e._v(" "),a("Row",[a("Table",{ref:"giftTable",attrs:{columns:e.dataColumns(),data:e.dataSource,"highlight-row":e.edit},on:{"on-current-change":e.handleCurrentChange}})],1),e._v(" "),a("Row",[a("Page",{staticStyle:{float:"right","margin-top":"20px"},attrs:{"page-size":5,current:e.query.page,total:e.total},on:{"update:current":function(t){e.$set(e.query,"page",t)},"on-change":e.queryList}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[0==e.edit?a("Button",{attrs:{type:"primary"},on:{click:function(t){e.add()}}},[e._v("添加")]):e._e(),e._v(" "),0==e.edit?a("Button",{on:{click:function(t){e.addAndClose()}}},[e._v("添加并关闭")]):e._e(),e._v(" "),e.edit?a("Button",{on:{click:function(t){e.editGoods()}}},[e._v("确认")]):e._e()],1)],1)},n=[];r._withStripped=!0;var i={render:r,staticRenderFns:n};t.default=i},1762:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(241),i=r(n),s=a(146),o=r(s),l=a(242),u=r(l),d=a(65),c=r(d),p=a(898),m=a(610),h=r(m),v=a(609),f=r(v),g=a(617),_=r(g),b=a(631),N=r(b),y=a(615),C=r(y),x=a(616),w=r(x),k=a(622),S=r(k),M=a(239);t.default={components:{storeSelectModal:h.default,operatorSelectModal:f.default,goodsSelectModal:_.default,orderOutbound:C.default,orderSign:w.default,addrSel:S.default,giftSelectModal:N.default},data:function(){return{apiGroup:this.$util.apiConfig.traderManage.orderManage,step:-1,btnGroupVisible:!1,editType:"new",amountType:!1,params:{sourceOrderNo:"",sourceChannel:"",deliverTime:"",remark:"",updateTime:"",storeName:"",storeCode:"",operatePerson:"",operateCode:"",receiverMobile:"",receiverName:"",detailAddress:"",provinceName:"",cityName:"",areaName:"",fullAddress:"",carNo:"",carCode:"",driverName:"",driverCode:"",driverContact:"",carLoad:"",carCapacity:"",orderNo:"",couponAmount:"",shouldPayAmount:"",itemToalAmount:""},storeNameAto:"",carNoAto:"",storeModalVisible:!1,storeOptions:[],empModalVisible:!1,empOptions:[],empNameSelected:"",goodsData:[],goodsModalVisible:!1,giftModalVisible:!1,editRow:{rowType:"edit",queryText:""},totalActualAmountSum:"0.00",totalCarNum:0,totalEaNum:0,goodsInfoAto:"",goodsOptions:[],carOptions:[],checkOrderModalVisible:!1,orderCheck:1,cancelOrderVisible:!1,cancelOrderText:"",btnDisable:!1,tickList:[],orderTimeline:[],outboundModalVisible:!1,orderSignModalVisible:!1,saveBtnDisabled:!1,orderMain:{},hideExtra:!1,orderTemplate:!1,editGoods:!1,editGoodsIdx:0,goodsSelectAtoTime:0,receiverAddr:{shengNum:"",shiNum:"",quNum:"",shengValue:"",shiValue:"",quValue:""},eaCarNumChange:!1,couponCodeStr:"",couponNameStr:"",couponAmountStr:""}},computed:{eaCarNum:function(){var e=this,t=0,a=0;this.eaCarNumChange;return this.goodsData.forEach(function(r){var n=0,i=0,s="";2==e.orderMain.orderStatus?s=e.formatEaNum(r.auditEaNum,r.packageNum,!0):5==e.orderMain.orderStatus||9==e.orderMain.orderStatus?s=e.formatEaNum(r.outEaNum,r.packageNum,!0):7==e.orderMain.orderStatus?s=e.formatEaNum(r.signEaNum,r.packageNum,!0):(n=Number(r.CRTItemNum)||0,i=Number(r.EAItemNum)||0),s&&(n=Number(s.split("/")[0]),i=Number(s.split("/")[1])),isNaN(n)&&(n=0),isNaN(i)&&(i=0),t+=n,a+=i}),t+"/"+a},createDate:function(){return"view"==this.editType?this.orderMain.orderTime?this.orderMain.orderTime:"":"edit"==this.editType&&this.$route.query.orderId?this.orderMain.orderTime?this.orderMain.orderTime:"":(0,p.formatDate)(new Date,"yyyy-MM-DD")},cancelBtnVisible:function(){return 1==this.orderMain.orderStatus},formatOrderTimeline:function(){for(var e=[],t=0;t<this.orderTimeline.length;t++){var a=this.orderTimeline[t],r=new Date(a.timeset),n=(0,p.formatDate)(r,"yyyy-MM-DD hh:mm:ss"),i=n.split(" ")[0],s=n.split(" ")[1],o="周";switch(r.getDay()){case 0:o+="日";break;case 1:o+="一";break;case 2:o+="二";break;case 3:o+="三";break;case 4:o+="四";break;case 5:o+="五";break;case 6:o+="六"}var l={timeset:a.timeset,dateStr:i,timeStr:s,dayStr:o,text:a.text};e.push(l)}return e.sort(function(e,t){return t.timeset-e.timeset})},receiverTotalAddress:function(){return[this.params.provinceName||"",this.params.cityName||"",this.params.areaName||"",this.params.detailAddress||""].join(" ")},showO2OsignUpCouponInfo:function(){return 2==this.$store.state.app.statusInfo.promotionMode&&7==this.orderMain.orderStatus&&"O2O"==this.orderMain.tradeSourcePlatform}},mounted:function(){this.inited(this.$route)},watch:{$route:function(e,t){this.inited(e),setTimeout(function(e){return window.location.reload()})}},methods:{checkPreviewTemplate:function(){var e=this,t={page:1,rows:10,order:"status desc, create_date desc"};e.$util.ajax({method:"post",url:e.$util.apiConfig.traderManage.productManage.printTemplateListUrl,data:t}).then(function(t){200===t.data.code?(e.totalCount=t.data.result.totalCount,t.data.result.records.forEach(function(t){1===t.printType&&1===t.status&&(e.orderTemplate=!0)})):console.log("失败信息：",t)}).catch(function(e){console.log("失败信息：",e)})},checkPreview:function(){var e=this;if(!1===e.orderTemplate)return void e.$Message.warning("请先设置打印模板")},preview:function(){for(var e=this,t=null,a=[],r=0;r<this.goodsData.length;r++)a.push(this.goodsData[r].remark);if(!1===e.orderTemplate)return document.getElementById("order-print-id").removeAttribute("href"),void document.getElementById("order-print-id").removeAttribute("target");t={printType:1,orderIds:[e.$route.query.orderId],remark:a},sessionStorage.setItem("printOrder",(0,c.default)(t));var n=window.location.href,i=n.split("#");document.getElementById("order-print-id").setAttribute("href",i[0]+"#/print-preview"),document.getElementById("order-print-id").setAttribute("target","_blank")},inited:function(e){this.checkPreviewTemplate(),this.step=-1;for(var t in this.params)this.params[t]="";switch(this.totalActualAmountSum="0.00",this.totalCarNum=0,this.totalEaNum=0,this.hideExtra=!1,this.goodsData=[],this.amountType=!1,this.$route.name){case"order-detail-edit":this.$route.query.orderId?(this.step=2,this.editType="edit"):(this.step=0,this.editType="new",this.params.sourceChannel="1"),this.saveBtnDisabled=!1,this.btnGroupVisible=!1;break;case"order-detail-new":this.editType="view",this.btnGroupVisible=!0,this.saveBtnDisabled=!0;break;case"order-detail-copy":this.step=0,this.editType="copy",this.saveBtnDisabled=!1,this.btnGroupVisible=!1}e.query.orderId&&this.getOrderDeail(e.query.orderId)},getOrderDeail:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(t){var a,r,n,s,l,d,c,m,h,v=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.saveBtnDisabled=!0,e.prev=1,e.next=4,this.$ajax(this.apiGroup.getDetailUrl+"?orderId="+t);case 4:if(a=e.sent,r=a.data,200!=r.code||!r.result||null===r.result){e.next=56;break}if(this.saveBtnDisabled=!1,n=r.result.tradeOrder,r.result.deliveryCarBill&&r.result.deliveryCarBill instanceof Object&&(s=r.result.deliveryCarBill,this.carNoAto=this.null2EmptyString(s.carPlateNo),this.params.carCode=this.null2EmptyString(s.carCode),this.params.driverName=this.null2EmptyString(s.driverName),this.params.driverCode=this.null2EmptyString(s.driverCode),this.params.driverContact=this.null2EmptyString(s.driverContact),setTimeout(function(e){v.params.carNo=v.carNoAto,v.params.carLoad=v.null2EmptyString(s.totalWeight),v.params.carCapacity=v.null2EmptyString(s.totalVolume)})),r.result.coupons&&r.result.coupons instanceof Array&&(l=r.result.coupons,this.tickList=l.map(function(e){return{name:e.couponname,code:e.couponcode}})),r.result.getCoupons&&r.result.getCoupons instanceof Array&&(d=r.result.getCoupons,this.couponCodeStr="",this.couponNameStr="",this.couponAmountStr="",d.forEach(function(e){null!==v.couponCodeStr&&void 0!==v.couponCodeStr&&(v.couponCodeStr+=e.couponcode+","),null!==v.couponNameStr&&void 0!==v.couponNameStr&&(v.couponNameStr+=e.couponname+","),null!==e.couponamount&&void 0!==e.couponamount&&(v.couponAmountStr+=e.couponamount+",")}),this.couponCodeStr=this.couponCodeStr.replace(/,*$/g,""),this.couponNameStr=this.couponNameStr.replace(/,*$/g,""),this.couponAmountStr=this.couponAmountStr.replace(/,*$/g,"")),r.result.tradeOrderLogList&&r.result.tradeOrderLogList instanceof Array&&(c=r.result.tradeOrderLogList,this.orderTimeline=c.map(function(e){var t="";switch(e.cityName&&(t+="【"+e.cityName+"】"),Number(e.type)){case 1:t+="订单创建/修改";break;case 2:t+="订单审核（拣货）";break;case 3:t+="订单出库（发货）";break;case 4:t+="订单签收";break;case 5:t+="订单取消";break;case 6:t+="已完成";break;case 7:t+="已关闭";break;case 8:t+="订单撤单";break;default:t+="未知订单状态"}return{timeset:e.createDate,text:t}})),!n||null===n){e.next=56;break}if(this.totalCarNum=0,this.totalEaNum=0,n.orderItems instanceof Array&&(this.goodsData=n.orderItems.map(function(e){v.totalCarNum+=Number(e.crtitemNum),v.totalEaNum+=Number(e.eaitemNum);var t=v.null2EmptyString(e.itemActualAmount,0),a=v.null2EmptyString(e.itemAmount,0);return 11==e.promotionType&&!isNaN(e.packageNum)&&e.packageNum>0&&(t=e.itemActualAmount*e.packageNum),(0,o.default)({},e,{remark:e.remark,EAItemNum:v.null2EmptyString(e.eaitemNum,0),CRTItemNum:v.null2EmptyString(e.crtitemNum,0),itemActualAmount:t,itemAmount:a,promotionCode:e.promotionCode||"",promotionId:e.promotionId||"",promotionTitle:e.promotionTitle||"",itemType:e.itemType||"",itemTypeFlag:e.itemTypeFlag||0,inventory:0})}),this.goodsData.forEach(function(){var e=(0,u.default)(i.default.mark(function e(t){var a,r,n,s,o,l;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.$ajax(v.apiGroup.warehouseStock+"?materialCode79="+t.item79);case 3:a=e.sent,r=a.data,200==r.code&&r.result.resultList instanceof Array&&r.result.resultList.length>0&&(n=0,s=r.result.resultList[0].validNum,o=r.result.resultList[0].validBoxNum,l=r.result.resultList[0].validSingleNum,isNaN(s)&&(s=0),isNaN(o)&&(o=0),isNaN(l)&&(l=0),n=s,t.inventory=n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}},e,v,[[0,8]])}));return function(t){return e.apply(this,arguments)}}())),!(n.orderMain instanceof Object)){e.next=56;break}m=n.orderMain,m.deliverTime&&null!==m.deliverTime&&(m.deliverTime=(0,p.formatDate)(new Date(m.deliverTime),"yyyy-MM-DD")),m.updateTime&&null!==m.updateTime&&(m.updateTime=(0,p.formatDate)(new Date(m.updateTime),"yyyy-MM-DD")),m.orderTime&&null!==m.orderTime&&(m.orderTime=(0,p.formatDate)(new Date(m.orderTime),"yyyy-MM-DD")),this.orderMain=(0,o.default)({},m),isNaN(Number(m.itemToalAmount))||(this.totalActualAmountSum=Number(m.itemToalAmount).toFixed(2));for(h in this.params)(m[h]||0===Number(m[h]))&&(this.params[h]=m[h]);if(this.params.carNo=m.carPlateNo,this.params.carLoad=m.totalWeight,this.params.carCapacity=m.totalVolume,this.params.operatePerson=m.createPersonName,this.params.operateCode=m.createPerson,this.empNameSelected=m.createPersonName,this.params.sourceOrderNo=m.sourceOrderNo,this.params.sourceChannel=this.null2EmptyString(this.params.sourceChannel).toString(),this.storeNameAto=m.storeName,"copy"!=this.editType){e.next=41;break}return this.params.orderNo="",this.orderMain.orderStatus=-1,this.tickList=[],this.orderTimeline=[],e.abrupt("return");case 41:e.t0=Number(m.orderStatus),e.next=1===e.t0?44:2===e.t0?46:5===e.t0?48:7===e.t0?50:9===e.t0?52:54;break;case 44:return this.step=2,e.abrupt("break",55);case 46:return this.step=3,e.abrupt("break",55);case 48:return this.step=4,e.abrupt("break",55);case 50:return this.step=5,e.abrupt("break",55);case 52:return this.step=4,e.abrupt("break",55);case 54:this.step=-1;case 55:this.initAddr();case 56:e.next=61;break;case 58:e.prev=58,e.t1=e.catch(1),console.error(e.t1);case 61:case"end":return e.stop()}},e,this,[[1,58]])}));return e}(),orderOrigin:function(e){if("copy"!==this.editType&&this.orderMain.tradeSourcePlatform&&null!==this.orderMain.tradeSourcePlatform)return this.orderMain.tradeSourcePlatform;switch(Number(e)){case 1:return"DMS";case 2:return"SFA";case 3:return"O2O";case 4:return"SFA";case 6:return"PDA";default:return""}},orderStatusText:function(e){switch(Number(e)){case 1:return"待审核";case 2:return"待发货";case 5:return"待收货(部分出库)";case 6:return"已取消";case 7:return"已签收";case 9:return"待收货(全部出库)";case 8:return"已关闭";default:return""}},handleBuyerClick:function(){"view"!=this.editType&&(this.storeModalVisible=!0)},handleStoreSelected:function(e){this.params.storeCode=e.storeCode,this.params.storeName=e.storeName,this.storeNameAto=e.storeName,this.params.provinceName=e.provinceName,this.params.cityName=e.cityName,this.params.areaName=e.countyName,this.params.detailAddress=e.addressDetail,this.params.receiverName=e.storeOwnerName,this.params.receiverMobile=e.phone,this.setOperatePerson(e.storeCode),this.initAddr()},setOperatePerson:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(t){var a,r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.params.operatePerson="",this.params.operateCode="",e.prev=2,e.next=5,this.$ajax.post(this.apiGroup.queryEmpUrl,M.stringify({storeCode:t,currentPage:1}));case 5:a=e.sent,r=a.data,r.page&&(n=r.page.records)instanceof Array&&n.length>0&&(this.params.operateCode=n[0].empCode,this.params.operatePerson=n[0].empName,this.empNameSelected=n[0].empName),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[2,10]])}));return e}(),handleEmpClick:function(){"view"!=this.editType&&(this.empModalVisible=!0)},handleEmpSelected:function(e){var t=e.empName,a=e.empCode;this.params.operatePerson=t,this.empNameSelected=t,this.params.operateCode=a},handleGoodsClick:function(e,t){if("view"!=this.editType){if(!this.params.storeCode&&1!=t)return this.$Message.warning("未选择买家");"number"==typeof e?(this.editGoods=!0,this.editGoodsIdx=e):this.editGoods=!1,1==t?this.giftModalVisible=!0:this.goodsModalVisible=!0}},handleGoodsSelected:function(e,t){var a=this;if(e.length<=0)return this.$Modal.warning({content:"未选择商品"});for(var r=!1,n=[],i=e.concat(),s=[],o=0;o<i.length;o++)!function(e){0!=i[e].changeUnitRate&&null!=i[e].changeUnitRate&&i[e].changeUnitRate||(n.push(i[e].itemName),r=!0),a.goodsData.filter(function(t){return 1!=i[e].promotionType&&(t.item79==i[e].code79&&1!=t.promotionType)}).length>0&&(s.push("商品 "+i[e].itemName+" 不允许重复添加"),i.splice(e,1),e--),o=e}(o);if(r)return this.$Modal.error({content:"商品 "+n.join(" ")+" 转化系数异常或未设置"});if(s.length>0){var l=s.join("<br/>");return void this.$Modal.warning({content:l,width:600})}this.editGoods?(this.goodsData[this.editGoodsIdx]=this.formatGoodsSelected(i)[0],this.editGoods=!1):this.goodsData=this.goodsData.concat(this.formatGoodsSelected(i)),t&&this.$Message.success("商品添加成功"),this.sumUp()},handleGiftSelected:function(e){var t=this;if(e.length<=0)return this.editGoods=!1,this.$Modal.warning({content:"未选择赠品"});for(var a=e.concat(),r=[],n=!1,i=[],s=0;s<a.length;s++)!function(e){a[e].promotionCode="",a[e].promotionTitle="",0!=a[e].changeUnitRate&&null!=a[e].changeUnitRate&&a[e].changeUnitRate||(i.push(a[e].itemName),n=!0),t.goodsData.filter(function(t){return 1==a[e].promotionType&&(t.item79==a[e].code79&&1==t.promotionType)}).length>0&&(r.push("赠品 "+a[e].itemName+" 不允许重复添加"),a.splice(e,1),e--),s=e}(s);if(n)return this.editGoods=!1,this.$Modal.error({content:"赠品 "+i.join(" ")+" 转化系数异常或未设置"});if(r.length>0){var o=r.join("<br/>");return void this.$Modal.warning({content:o,width:600})}this.editGoods?(this.$Message.success("赠品修改成功"),this.goodsData[this.editGoodsIdx]=this.formatGoodsSelected(a)[0]):(this.$Message.success("赠品添加成功"),this.goodsData=this.goodsData.concat(this.formatGoodsSelected(a))),this.editGoods=!1,this.sumUp()},handleStoreNameSearch:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.storeNameAto&&!(this.storeNameAto.length<1)){e.next=2;break}return e.abrupt("return",this.storeOptions=[]);case 2:return e.prev=2,e.next=5,this.$ajax.post(this.apiGroup.queryStoresUrl,M.stringify({storeName:this.storeNameAto,currentPage:1}));case 5:t=e.sent,a=t.data,a.records instanceof Array&&(this.storeOptions=a.records),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}},e,this,[[2,10]])}));return e}(),handleStoreNameSelect:function(e){var t=this;if(e){var a=e.split(" && ")[1];if(a){var r=e.split(" && ")[0];this.storeOptions.forEach(function(e){e.storeCode==a&&t.handleStoreSelected((0,o.default)({},e)),setTimeout(function(e){return t.storeNameAto=r})})}}},handleEmpNameSearch:function(e){var t=this;setTimeout(function(){var e=(0,u.default)(i.default.mark(function e(a){var r,n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$ajax.post(t.apiGroup.queryEmpUrl,M.stringify({empName:t.params.operatePerson,storeCode:t.params.storeCode,currentPage:1}));case 3:r=e.sent,n=r.data,n.page.records instanceof Array&&(t.empOptions=n.page.records),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,t,[[0,8]])}));return function(t){return e.apply(this,arguments)}}())},handleEmpAtoSelect:function(e){this.handleEmpSelected(e)},handleGoodsAtoSearch:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a,r,n,s,l;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.goodsInfoAto&&!(this.goodsInfoAto.trim().length<2)){e.next=2;break}return e.abrupt("return");case 2:if(this.params.storeCode){e.next=4;break}return e.abrupt("return",this.$Message.warning("请先选择买家信息"));case 4:return t=[],a=[],e.prev=6,this.goodsSelectAtoTime++,r=this.goodsSelectAtoTime,e.next=11,this.$ajax.post(this.apiGroup.orderItemssurUrl+"?number="+Math.random(),M.stringify({rows:999,key:this.goodsInfoAto,storecode:this.params.storeCode}));case 11:if(n=e.sent,s=n.data,200!=s.code){e.next=18;break}if(r===this.goodsSelectAtoTime){e.next=16;break}return e.abrupt("return");case 16:l=s.result.pager,l.records instanceof Array&&(t=l.records.map(function(e){a.push(e.code79);var t=parseFloat(e.marketPrice).toFixed(2);isNaN(t)&&(t="0.00");var r=e.inventory,n=e.changeUnitRate,i="0/0";return 0!=r&&0!=n&&(i=parseInt(r/n)+"/"+r%n),(0,o.default)({},e,{validNum:i,marketPrice:t,realMarketPrice:t,carNum:0,eaNum:0,itemComments:"",promotionList:{}})}));case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(6),console.error(e.t0);case 23:this.goodsOptions=t.concat();case 24:case"end":return e.stop()}},e,this,[[6,20]])}));return e}(),handleGoodsAtoSelect:function(e){if(e){var t=e.split(" ")[0];t--;var a=(0,o.default)({},this.goodsOptions[Number(t)]);this.editGoods=!1,this.setStock(a)}},setStock:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(t){var a,r,n,s,o,l;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$ajax(this.apiGroup.warehouseStock+"?materialCode79="+t.code79);case 3:a=e.sent,r=a.data,200==r.code&&r.result.resultList instanceof Array&&r.result.resultList.length>0&&(n=0,s=r.result.resultList[0].validNum,o=r.result.resultList[0].validBoxNum,l=r.result.resultList[0].validSingleNum,isNaN(s)&&(s=0),isNaN(o)&&(o=0),isNaN(l)&&(l=0),n=s,t.inventory=n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:this.goodsInfoAto="",this.handleGoodsSelected([t]);case 13:case"end":return e.stop()}},e,this,[[0,8]])}));return e}(),promotionText:function(e){if(e.giftItemId)return"赠品";switch(e.promotionType){case 1:return"买赠";case 2:return"返利";case 3:return"特价";case 4:return"组合";default:return"商品"}},formatGoodsSelected:function(e){var t=this;return e.map(function(e){var a=null==e.spuShortName?"":e.spuShortName,r=null==e.changeUnit?"":e.changeUnit,n="0.00",i="0.00",s=e.promotionType||"";return n=e.realMarketPrice,i=t.totalActualAmount(e.carNum,e.eaNum,e.realMarketPrice,e.changeUnitRate),{skuDesc:a,EAItemUnit:r,CRTItemUnit:e.baseUnit,itemId:e.itemId,itemName:e.itemName,shortName:a,item69:e.code69,item79:e.code79,item80:e.code80,promotionType:s,promotionCode:e.promotionCode||"",promotionId:e.promotionId||"",promotionTitle:e.promotionTitle||"",itemType:e.itemType||"",itemTypeFlag:e.itemPromotionFlag||0,packageNum:e.changeUnitRate,itemAmount:e.marketPrice,itemActualAmount:n,CRTItemNum:e.carNum,EAItemNum:e.eaNum,itemTotalActualAmount:i,itemComments:e.itemComments,itemCapacity:e.volume,itemWeight:e.suttleWeight,itemCrossWeight:e.grossWeight,inventory:e.inventory}})},eaItemActualAmount:function(e){var t=e.itemActualAmount/e.packageNum;return t.toString().split(".").length>1&&t.toString().split(".")[1].length>2&&(t=t.toFixed(2)),t},inputNumChange:function(e,t,a,r){var n=e.target.value;n=n.replace(/[^\d.]/g,""),n=n.replace(/^\./g,""),n=n.replace(/\.{2,}/g,"."),n=n.replace(".","$#$").replace(/\./g,"").replace("$#$","."),n=n.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");var i=n;setTimeout(function(t){return e.target.value=i}),r&&(n*=a.packageNum),"CRTItemNum"==t||"EAItemNum"==t?(parseInt(n).toString().length!==n.toString().length&&(n=parseInt(n),isNaN(n)&&(n=0),setTimeout(function(t){return e.target.value=n})),a[t]=parseInt(n)):a[t]=n,a.itemTotalActualAmount=this.totalActualAmount(a.CRTItemNum,a.EAItemNum,a.itemActualAmount,a.packageNum),this.sumUp()},totalActualAmount:function(e,t,a,r){return null==r||0==r?"0.00":(parseInt(e)*Number(a).toFixed(2)+parseInt(t)*a/r).toFixed(2)},deleteGoods:function(e){this.goodsData.splice(e,1),this.sumUp()},sumUp:function(){var e=this,t=0;this.totalCarNum=0,this.totalEaNum=0,this.goodsData.forEach(function(a){t+=Number(a.itemTotalActualAmount),e.totalCarNum+=Number(a.CRTItemNum),e.totalEaNum+=Number(a.EAItemNum)}),this.totalActualAmountSum=t.toFixed(2),this.params.shouldPayAmount=this.totalActualAmountSum-this.params.couponAmount,this.eaCarNumChange=!this.eaCarNumChange},inventory:function(e){var t=0,a=0,r=e.packageNum,n=Number(e.inventory);return isNaN(n)||(t=parseInt(n/r)||0,a=n%r||0),r&&null!=r?t+"/"+a:"0/0"},formatEaNum:function(e,t,a){var r=0,n=0;return isNaN(e)||(r=parseInt(e/t)||0,n=e%t||0),t&&null!=t?r+"/"+n=="0/0"?a?"0/0":"":r+"/"+n:a?"0/0":""},overLimit:function(e){return e.CRTItemNum*e.packageNum+e.EAItemNum>e.inventory?"red":""},openCheckOrder:function(){this.checkOrderModalVisible=!0},checkOrder:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a,r,n,s,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.btnDisable){e.next=2;break}return e.abrupt("return");case 2:if(t=this.$route.query.orderId){e.next=5;break}return e.abrupt("return",this.$Modal.warning({content:"未知订单id"}));case 5:return a=2,this.orderCheck||(a=8),this.btnDisable=!0,this.checkOrderModalVisible=!1,r=1,this.$store.state.app.statusInfo.promotionMode?r=this.$store.state.app.statusInfo.promotionMode:localStorage.promotionMode&&(r=localStorage.promotionMode),n=this.apiGroup.examineToOrder,2==r&&(n="/trade/order/examineToOrderV2"),e.prev=13,e.next=16,this.$ajax.post(n,M.stringify({orderId:t,orderstatus:a}));case 16:s=e.sent,o=s.data,o.success?this.$Modal.success({content:"审核操作成功",onOk:function(e){window.location.reload()}}):this.$Modal.error({content:o.errorMessages.join(",")}),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(13),console.error(e.t0),this.$Modal.error({content:"审核操作请求发送失败"});case 25:this.btnDisable=!1;case 26:case"end":return e.stop()}},e,this,[[13,21]])}));return e}(),cancelOrder:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a,r,n,s=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.btnDisable){e.next=2;break}return e.abrupt("return");case 2:if(t=this.$route.query.orderId){e.next=5;break}return e.abrupt("return",this.$Modal.warning({content:"未知订单id"}));case 5:if(a=this.cancelOrderText,!(a.replace(/[ ]/g,"").length<=0)){e.next=8;break}return e.abrupt("return",this.$Modal.warning({content:"备注不能为空"}));case 8:return this.btnDisable=!0,e.prev=9,e.next=12,this.$ajax.post(this.apiGroup.cancelUrl,{orderId:t,cancelMemo:a});case 12:r=e.sent,r.data.code&&200==r.data.code?this.$Modal.success({content:"订单取消成功",onOk:function(e){s.$router.replace({name:"order-list",query:{status:6}})}}):(n="订单取消失败",r.data.message&&(n=r.data.message),this.$Modal.error({content:n})),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),console.error(e.t0),this.$Modal.error({content:"订单取消失败"});case 20:this.btnDisable=!1;case 21:case"end":return e.stop()}},e,this,[[9,16]])}));return e}(),handleCarNoSearch:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$ajax.post(this.apiGroup.carNoList,M.stringify({carNo:this.carNoAto}));case 3:t=e.sent,a=t.data,200==a.code&&a.result instanceof Array&&(this.carOptions=a.result),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),this.$Message.error("车牌号列表获取失败"),console.error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return e}(),handleCarNoSelect:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(t){var a,r,n,s,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.params.carNo=t,void 0!=t&&null!=t){e.next=10;break}return this.params.driverName="",this.params.carLoad="",this.params.driverCode="",this.params.driverContact="",this.params.carCode="",this.params.carCapacity="",this.params.carNo="",e.abrupt("return");case 10:return e.prev=10,e.next=13,this.$ajax.post(this.apiGroup.getCarByCarNo,M.stringify({page:1,carPNo:t}));case 13:a=e.sent,r=a.data,200==r.code&&(n=r.result)&&null!==n&&n.cars&&null!==n.cars&&(s=n.cars,s.records instanceof Array&&s.records[0]&&(o=s.records[0],this.params.driverName=o.driverName,this.params.carLoad=o.carLoad,this.params.driverCode=o.driverCode,this.params.driverContact=o.driverContact,this.params.carCode=o.carCode,this.params.carCapacity=o.carCapacity)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),console.error(e.t0);case 21:case"end":return e.stop()}},e,this,[[10,18]])}));return e}(),saveOrder:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a,r,n,s,l,u,d,c,p,m,h,v,f,g,_,b,N,y,C,x,w,k,S,M,A,T,I=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.params,a=t.sourceOrderNo,r=t.provinceName,n=t.cityName,s=t.areaName,l=t.couponAmount,u=t.detailAddress,d=t.receiverMobile,c=t.receiverName,p=t.remark,m=t.sourceChannel,h=t.storeCode,v=t.storeName,f=t.operateCode,g=t.operatePerson,_=t.deliverTime,b=t.carNo,N=t.driverCode,y=t.driverName,C=t.carCode,x=t.driverContact,w=t.carLoad,k=t.carCapacity,null==l&&(l=0),this.empNameSelected!=g&&(f=""),S={sourceOrderNo:a,provinceName:r,cityName:n,areaName:s,couponAmount:l,detailAddress:u,fullAddress:[r,n,s,u].join("--"),itemToalAmount:this.totalActualAmountSum||"0.00",actualPayAmount:this.totalActualAmountSum||"0.00",receiverMobile:d,receiverName:c,remark:p||"",shouldPayAmount:(this.totalActualAmountSum-l).toFixed(2),sourceChannel:m,storeCode:h,storeName:v,operatePerson:g,operateCode:f,deliverTime:_,carCode:C,driverCode:N,driverName:y,driverContact:x,carPlateNo:b,totalWeight:w,totalVolume:k,tradeSourcePlatform:this.orderOrigin(m),itemsReqList:[],totalEAItemNum:0,totalCRTItemNum:0},M=!1,"edit"!=this.editType){e.next=9;break}if(S.orderId=this.$route.query.orderId,"o2o"!=this.orderOrigin(m).toLowerCase()){e.next=9;break}return e.abrupt("return",this.$Modal.error({content:"O2O订单不能修改"}));case 9:if(""!=this.params.receiverName){e.next=11;break}return e.abrupt("return",this.$Modal.error({content:"填写收货人"}));case 11:if(""!=this.params.receiverMobile){e.next=13;break}return e.abrupt("return",this.$Modal.error({content:"填写收货电话"}));case 13:if(""!=this.params.provinceName){e.next=15;break}return e.abrupt("return",this.$Modal.error({content:"请选择收货地址省份"}));case 15:if(""!=this.params.cityName){e.next=17;break}return e.abrupt("return",this.$Modal.error({content:"请选择收货地址市"}));case 17:if(""!=this.params.areaName){e.next=19;break}return e.abrupt("return",this.$Modal.error({content:"请选择收货地址区/镇"}));case 19:if(""!=this.params.detailAddress){e.next=21;break}return e.abrupt("return",this.$Modal.error({content:"请填写详细地址"}));case 21:if(S.storeCode){e.next=23;break}return e.abrupt("return",this.$Modal.warning({content:"未选择买家!"}));case 23:if(S.itemsReqList=this.goodsData.map(function(e){var t=e.itemId,a=e.itemName,r=e.skuDesc,n=e.itemType,i=e.itemTypeFlag,s=e.item69,o=e.item79,l=e.item80,u=e.EAItemUnit,d=e.CRTItemUnit,c=e.packageNum,p=e.itemAmount,m=e.itemActualAmount,h=e.EAItemNum,v=e.CRTItemNum,f=e.itemTotalActualAmount,g=e.promotionId,_=e.promotionCode,b=e.promotionType,N=e.promotionTitle,y=e.remark,C=e.itemCapacity,x=e.itemWeight,w=e.itemCrossWeight,k=(e.inventory,e.itemComments);return!isNaN(Number(h))&&h>0&&(S.totalEAItemNum+=Number(h)),!isNaN(Number(v))&&v>0&&(S.totalCRTItemNum+=Number(v)),v<=0&&h<=0&&(M=!0),11==b&&!isNaN(c)&&c>0&&(m=(m/c).toFixed(2)),{itemId:t,itemName:a,skuDesc:r,itemType:n,itemTypeFlag:i,item69:s,item79:o,item80:l,eaItemUnitCopy:u,crtItemUnitCopy:d,packageNum:c,itemAmount:p,itemActualAmount:m,eaItemNumCopy:h,crtItemNumCopy:v,itemTotalActualAmount:f,promotionId:g,promotionCode:_,promotionType:b,promotionTitle:N,itemComments:k,remark:y,itemCapacity:C,itemWeight:x,itemCrossWeight:w}}),!(S.itemsReqList.length<1)){e.next=26;break}return e.abrupt("return",this.$Modal.warning({content:"未选择商品！"}));case 26:if(!(S.totalCRTItemNum<=0&&S.totalEAItemNum<=0||M)){e.next=28;break}return e.abrupt("return",this.$Modal.warning({content:"商品数量不能为0"}));case 28:return S.itemsReqList.forEach(function(e){11===e.itemComments&&(e.promotionId="")}),this.saveBtnDisabled=!0,e.prev=30,e.next=33,this.$ajax.post(this.apiGroup.handelSubmitJson,S);case 33:if(A=e.sent,T=A.data,!T.success){e.next=38;break}return this.$Modal.success({content:"订单"+T.result+"保存成功",onOk:function(e){if("edit"===I.editType)return I.$router.replace({name:"order-detail-new",query:(0,o.default)({},I.$route.query)}),void setTimeout(function(e){return window.location.reload()});I.$router.replace({name:"order-list",query:{status:1}})}}),e.abrupt("return");case 38:e.next=43;break;case 40:e.prev=40,e.t0=e.catch(30),console.error(e.t0);case 43:this.$Modal.error({content:"订单保存失败"}),this.saveBtnDisabled=!1;case 45:case"end":return e.stop()}},e,this,[[30,40]])}));return e}(),orderOutbound:function(){if(this.isCanOutbound())return this.$Modal.warning({content:"订单商品已全部出库"});this.outboundModalVisible=!0},null2EmptyString:function(e,t){var a="";return(t||0==t)&&(a=t),e||0===e?null==e?a:e:a},isCanOutbound:function(){var e=0;return this.goodsData.forEach(function(t){var a=Number(t.outEaNum),r=Number(t.auditEaNum);(isNaN(a)||isNaN(r)||a>=r)&&e++}),e==this.goodsData.length},reloadPage:function(){window.location.reload()},orderDetailPreview:function(){var e=window.location.href;e=e.replace(this.$route.fullPath,"/print/order-detail-print-preview?orderId="+this.$route.query.orderId),window.open(e,"_blank")},openGiftSelect:function(){this.giftModalVisible=!0,this.editGoods=!1},addrChangeHandle:function(e){this.params.provinceName=e.shengValue,this.params.cityName=e.shiValue,this.params.areaName=e.quValue},initAddr:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a,r,n,s,o,l,u=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={},e.next=4,this.$util.ajax.post(this.$util.apiConfig.traderManage.infoManage.storeManage.addrSelUrl,M.stringify({parentCode:0}));case 4:if(a=e.sent,r=a.data,r.forEach(function(e){e.name==u.params.provinceName&&(t.shengNum=e.code,t.shengValue=e.name)}),isNaN(t.shengNum)){e.next=13;break}return e.next=10,this.$util.ajax.post(this.$util.apiConfig.traderManage.infoManage.storeManage.addrSelUrl,M.stringify({parentCode:t.shengNum}));case 10:n=e.sent,s=n.data,s.forEach(function(e){e.name==u.params.cityName&&(t.shiNum=e.code,t.shiValue=e.name)});case 13:if(isNaN(t.shiNum)){e.next=20;break}return e.next=16,this.$util.ajax.post(this.$util.apiConfig.traderManage.infoManage.storeManage.addrSelUrl,M.stringify({parentCode:t.shiNum}));case 16:o=e.sent,l=o.data,l.forEach(function(e){e.name==u.params.areaName&&(t.quNum=e.code,t.quValue=e.name)}),this.receiverAddr=t;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(0),this.$Message.error("初始化地址失败"),console.error(e.t0);case 26:case"end":return e.stop()}},e,this,[[0,22]])}));return e}()}}},2626:function(e,t,a){var r=a(2627);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(43)("1d61bd36",r,!1,{})},2627:function(e,t,a){t=e.exports=a(42)(!1),t.push([e.i,"\n.auto-select[data-v-275dd40e] {\n  position: relative;\n}\n.auto-select .extra-btn[data-v-275dd40e] {\n  position: absolute;\n  right: 5px;\n  top: 2px;\n  display: inline-block;\n  background: rgba(0, 0, 0, 0);\n  height: 80%;\n  width: 20px;\n  text-align: center;\n  cursor: pointer;\n}\n.auto-select .extra-btn.hide[data-v-275dd40e] {\n  cursor: default;\n}\n.operate-pannel[data-v-275dd40e] {\n  overflow: hidden;\n}\n.operate-pannel .btn-group[data-v-275dd40e] {\n  margin-bottom: 10px;\n  display: inline-block;\n  float: right;\n}\n.operate-pannel .btn-group > button[data-v-275dd40e] {\n  background: #fff;\n}\n.steps-pannel[data-v-275dd40e] {\n  background: #fff;\n  margin-bottom: 10px;\n  height: 66px;\n  overflow: hidden;\n}\n.steps-pannel .steps[data-v-275dd40e] {\n  overflow: hidden;\n  padding-top: 20px;\n}\n.steps-pannel .steps > div[data-v-275dd40e] {\n  width: 100%;\n}\n.steps-pannel .title[data-v-275dd40e] {\n  float: left;\n  font-size: 14px;\n  line-height: 40px;\n  width: 80px;\n  text-align: center;\n}\n.pannel[data-v-275dd40e] {\n  margin-bottom: 10px;\n  background: #fff;\n  padding: 10px 0;\n  line-height: 24px;\n}\n.pannel .item-row[data-v-275dd40e] {\n  margin-bottom: 10px;\n}\n.pannel .item[data-v-275dd40e] {\n  overflow: hidden;\n}\n.pannel .label[data-v-275dd40e] {\n  float: left;\n  width: 80px;\n  text-align: left;\n}\n.pannel .content[data-v-275dd40e] {\n  display: block;\n  overflow: hidden;\n  word-break: break-all;\n}\n.base-info-pannel[data-v-275dd40e] {\n  padding-left: 80px;\n  padding-right: 20px;\n  padding-bottom: 5px;\n}\n.goods-pannel .title[data-v-275dd40e] {\n  line-height: 24px;\n  font-size: 14px;\n  padding-left: 8px;\n  margin-bottom: 10px;\n}\n.goods-pannel .title .amount-switch[data-v-275dd40e] {\n  font-size: 12px;\n  margin-left: 300px;\n}\n.goods-pannel .table-content[data-v-275dd40e] {\n  padding: 0 20px;\n}\n.third-pannel[data-v-275dd40e] {\n  overflow: hidden;\n}\n.third-pannel .title[data-v-275dd40e] {\n  font-size: 14px;\n  padding-left: 5px;\n  line-height: 24px;\n}\n.third-pannel .reciever-car-info[data-v-275dd40e] {\n  float: left;\n  width: 400px;\n  padding: 0 20px;\n  border-right: 1px solid #ddd;\n}\n.third-pannel .pay-info[data-v-275dd40e] {\n  padding-left: 20px;\n  overflow: hidden;\n}\n.third-pannel .item-list[data-v-275dd40e] {\n  margin-left: 50px;\n}\n.third-pannel .item-list .item[data-v-275dd40e] {\n  line-height: 24px;\n  margin-top: 10px;\n}\n.wuliu[data-v-275dd40e] {\n  overflow: hidden;\n}\n.wuliu .title[data-v-275dd40e] {\n  font-size: 14px;\n  padding-left: 5px;\n  line-height: 24px;\n}\n.wuliu .wuliu-info[data-v-275dd40e] {\n  float: left;\n  width: 400px;\n  padding: 0 20px;\n}\n.wuliu .time-line[data-v-275dd40e] {\n  border-left: 1px solid #ddd;\n  padding-left: 20px;\n  overflow: hidden;\n  height: 250px;\n  overflow-y: auto;\n  margin-right: 20px;\n}\n.wuliu .item-list[data-v-275dd40e] {\n  margin-left: 50px;\n}\n.wuliu .item-list .item[data-v-275dd40e] {\n  line-height: 24px;\n  margin-top: 10px;\n}\n.require[data-v-275dd40e] {\n  color: red;\n}\n.custom-table[data-v-275dd40e] {\n  width: 100%;\n  text-align: center;\n  line-height: 48px;\n  border: 1px solid #ddd;\n}\n.custom-table th[data-v-275dd40e] {\n  color: #666;\n  background-color: #eee;\n  font-weight: normal;\n  font-size: 14px;\n  line-height: 30px;\n}\n.custom-table tr th[data-v-275dd40e],\n.custom-table tr td[data-v-275dd40e] {\n  border-right: 1px solid #ddd;\n  border-bottom: 1px solid #ddd;\n  box-sizing: border-box;\n  padding: 0 5px;\n}\n.custom-table tr td[data-v-275dd40e] {\n  line-height: 30px;\n  font-size: 12px;\n}\n.custom-table tbody tr[data-v-275dd40e]:nth-of-type(2n) {\n  background: #f5f5f5;\n}\n.custom-table tbody tr:last-of-type td[data-v-275dd40e] {\n  border-bottom: none;\n}\n.goods-table .base-info[data-v-275dd40e] {\n  position: relative;\n}\n.goods-table .base-info > span[data-v-275dd40e] {\n  width: 100%;\n  font-size: 12px;\n  margin: 0;\n  padding: 0;\n  display: inline-block;\n  text-align: left;\n}\n.goods-table .base-info > span.title[data-v-275dd40e] {\n  padding-right: 20px;\n}\n.goods-table .base-info > span.title .icon[data-v-275dd40e] {\n  position: absolute;\n  right: 3px;\n  top: 3px;\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  line-height: 20px;\n  color: #fff;\n  background: #f00;\n  border-radius: 50%;\n  text-align: center;\n}\n.goods-table .base-info > span .price[data-v-275dd40e] {\n  float: right;\n}\n.goods-table .append-row td[data-v-275dd40e] {\n  line-height: 45px;\n}\n",""])},2628:function(e,t,a){var r=a(2629);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(43)("1e4f1fec",r,!1,{})},2629:function(e,t,a){t=e.exports=a(42)(!1),t.push([e.i,"\n.ivu-tooltip {\n  width: 100%;\n}\n.ivu-tooltip .ivu-tooltip-rel {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 100%;\n}\n.ivu-select-dropdown-list {\n  max-height: 300px;\n}\n.red {\n  color: red;\n}\n.red input {\n  color: red;\n  border-color: red;\n}\n.red .ivu-input[disabled] {\n  color: red;\n  border-color: red;\n}\n.order-detail-goods-option {\n  text-align: left;\n}\n.order-detail-goods-option > span {\n  display: inline-block;\n}\n.order-detail-goods-option > span.idx {\n  width: 30px;\n}\n.order-detail-goods-option > span.promotionType {\n  width: 40px;\n  text-align: center;\n}\n.order-detail-goods-option > span.code69 {\n  width: 90px;\n}\ndiv.order-detail-goods-option {\n  font-size: 12px;\n  padding: 0 16px;\n  padding-bottom: 5px;\n  border-bottom: 1px solid #ddd;\n}\n#auto-order-edit-goods-select .ivu-select-dropdown.ivu-auto-complete {\n  width: auto!important;\n  left: 0!important;\n}\n.ivu-select--readonly .ivu-select-selection {\n  border: none;\n  background: #fff;\n  color: #495060;\n}\n.ivu-select--readonly .ivu-select-selection .ivu-select-arrow {\n  display: none;\n}\n.ivu-select--readonly .ivu-select-selection .ivu-select-selected-value {\n  padding-left: 0;\n}\n",""])},2630:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.btnGroupVisible,expression:"btnGroupVisible"}],staticClass:"operate-pannel"},[a("div",{staticClass:"btn-group"},[a("Button",{attrs:{title:"订单详情数据打印留底"},on:{click:e.orderDetailPreview}},[e._v("页面打印")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:1==e.orderMain.orderStatus&&null!==e.orderMain.tradeSourcePlatform&&"o2o"!==e.orderMain.tradeSourcePlatform.toLowerCase()&&3!=e.params.sourceChannel,expression:"orderMain.orderStatus==1&&(orderMain.tradeSourcePlatform!==null&&orderMain.tradeSourcePlatform.toLowerCase()!=='o2o')&&params.sourceChannel!=3"}],attrs:{disabled:e.btnDisable},on:{click:function(t){e.$router.push({name:"order-detail-edit",query:{orderId:e.$route.query.orderId}})}}},[e._v("\n                订单修改\n            ")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:1==e.orderMain.orderStatus,expression:"orderMain.orderStatus==1"}],attrs:{disabled:e.btnDisable},on:{click:e.openCheckOrder}},[e._v("\n                订单审核\n            ")]),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:2==e.orderMain.orderStatus||5==e.orderMain.orderStatus||9==e.orderMain.orderStatus,expression:"orderMain.orderStatus==2||orderMain.orderStatus==5||orderMain.orderStatus==9"}],staticClass:"ivu-btn",staticStyle:{"background-color":"#fff"},attrs:{id:"order-print-id",title:"订单打印",disabled:e.btnDisable},on:{mouseover:e.preview,click:e.checkPreview}},[e.orderMain.alPrintNum&&null!==e.orderMain.alPrintNum?a("span",[e._v(e._s("已打印("+e.orderMain.alPrintNum+")"))]):a("span",[e._v("未打印")])]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:2==e.orderMain.orderStatus||5==e.orderMain.orderStatus&&0==e.isCanOutbound(),expression:"orderMain.orderStatus==2 || (orderMain.orderStatus==5 && isCanOutbound() == false)"}],attrs:{disabled:e.btnDisable},on:{click:e.orderOutbound}},[e._v("\n                订单出库\n            ")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:5==e.orderMain.orderStatus||9==e.orderMain.orderStatus,expression:"orderMain.orderStatus==5||orderMain.orderStatus==9"}],attrs:{disabled:e.btnDisable},on:{click:function(t){e.orderSignModalVisible=!0}}},[e._v("\n                订单签收\n            ")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:e.cancelBtnVisible,expression:"cancelBtnVisible"}],attrs:{disabled:e.btnDisable},on:{click:function(t){e.cancelOrderVisible=!0}}},[e._v("\n                订单取消\n            ")])],1)]),e._v(" "),a("div",{staticClass:"steps-pannel"},[a("div",{staticClass:"title"},[e._v("流程")]),e._v(" "),a("div",{staticClass:"steps"},[a("Steps",{attrs:{current:e.step}},[a("Step",{attrs:{title:"订单提交"}}),e._v(" "),a("Step",{attrs:{title:"订单支付"}}),e._v(" "),a("Step",{attrs:{title:"订单审核"}}),e._v(" "),a("Step",{attrs:{title:"订单配送"}}),e._v(" "),a("Step",{attrs:{title:"订单签收"}})],1)],1)]),e._v(" "),a("div",{staticClass:"base-info-pannel pannel"},[a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.editType,expression:"editType==false"}],staticStyle:{position:"absolute",left:"30px",cursor:"pointer","letter-spacing":"1px"},on:{click:function(t){e.hideExtra=!e.hideExtra}}},[a("Icon",{attrs:{type:e.hideExtra?"arrow-right-b":"arrow-down-b"}}),e._v(" "),a("span",{staticStyle:{color:"blue"}},[e._v("更多")])],1),e._v(" "),a("Row",{staticClass:"item-row",attrs:{gutter:24}},[a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("买家信息"),a("span",{staticClass:"require"},[e._v("*")])]),e._v(" "),a("span",{staticClass:"content"},["view"!==e.editType?a("div",{staticClass:"auto-select"},[a("AutoComplete",{attrs:{size:"small",transfer:""},on:{"on-focus":e.handleStoreNameSearch,"on-change":e.handleStoreNameSearch,"on-select":e.handleStoreNameSelect},model:{value:e.storeNameAto,callback:function(t){e.storeNameAto=t},expression:"storeNameAto"}},e._l(e.storeOptions,function(t,r){return a("Option",{key:r,attrs:{value:t.storeName+" && "+t.storeCode}},[e._v("\n                                    "+e._s(t.storeName)+"\n                                ")])})),e._v(" "),a("span",{staticClass:"extra-btn",on:{click:e.handleBuyerClick}},[a("Icon",{attrs:{type:"ios-more"}})],1)],1):a("span",[e._v(e._s(e.params.storeName))])])])]),e._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("业务员")]),e._v(" "),a("span",{staticClass:"content"},["view"!==e.editType?a("div",{staticClass:"auto-select"},[a("AutoComplete",{attrs:{size:"small",transfer:""},on:{"on-focus":e.handleEmpNameSearch,"on-change":e.handleEmpNameSearch},model:{value:e.params.operatePerson,callback:function(t){e.$set(e.params,"operatePerson",t)},expression:"params.operatePerson"}},e._l(e.empOptions,function(t,r){return a("Option",{key:r,attrs:{value:t.empName},nativeOn:{click:function(a){return function(a){return e.handleEmpAtoSelect(t)}()}}},[e._v("\n                                    "+e._s(t.empName)+"\n                                ")])})),e._v(" "),a("span",{staticClass:"extra-btn",on:{click:e.handleEmpClick}},[a("Icon",{attrs:{type:"ios-more"}})],1)],1):a("span",[e._v(e._s(e.params.operatePerson))])])])]),e._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("订单金额")]),e._v(" "),a("span",{staticClass:"content"},[e._v("￥"+e._s(e.totalActualAmountSum))])])])],1),e._v(" "),a("div",{staticClass:"extra",style:{display:"view"===e.editType&&e.hideExtra?"none":"block"}},[a("Row",{staticClass:"item-row",attrs:{gutter:24}},[a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("来源")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orderOrigin(e.params.sourceChannel)))])])]),e._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("来源订单号")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.params.sourceOrderNo))])])]),e._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("订单类型"),a("span",{staticClass:"require"},[e._v("*")])]),e._v(" "),a("span",{staticClass:"content"},[a("Select",{class:{"ivu-select--readonly":"view"==e.editType},attrs:{size:"small",placeholder:"未知订单类型",disabled:"view"==e.editType||"edit"==e.editType},model:{value:e.params.sourceChannel,callback:function(t){e.$set(e.params,"sourceChannel",t)},expression:"params.sourceChannel"}},[a("Option",{attrs:{value:"1"}},[e._v("手工做单预订单")]),e._v(" "),a("Option",{attrs:{value:"2"}},[e._v("SFA预订单")]),e._v(" "),a("Option",{attrs:{value:"3"}},[e._v("O2O预订单")]),e._v(" "),a("Option",{attrs:{value:"4"}},[e._v("SFA车销订单")]),e._v(" "),a("Option",{attrs:{value:"5"}},[e._v("代配送订单")]),e._v(" "),a("Option",{attrs:{value:"6"}},[e._v("PDA车销订单")])],1)],1)])])],1),e._v(" "),a("Row",{staticClass:"item-row",attrs:{gutter:24}},[a("Col",{attrs:{span:"8"}},[a("span",{staticClass:"label"},[e._v("订单单号")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.params.orderNo))])]),e._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("订单状态")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.orderStatusText(e.orderMain.orderStatus)))])])]),e._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("买家手机")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.params.receiverMobile))])])])],1),e._v(" "),a("Row",{staticClass:"item-row",attrs:{gutter:24}},[a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("创建日期")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.createDate))])])]),e._v(" "),a("Col",{attrs:{span:"16"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("买家备注")]),e._v(" "),a("span",{staticClass:"content"},["view"!==e.editType?a("Input",{attrs:{size:"small",maxlength:200},model:{value:e.params.remark,callback:function(t){e.$set(e.params,"remark",t)},expression:"params.remark"}}):a("Tooltip",{attrs:{placement:"bottom",content:e.params.remark}},[e._v("\n                                "+e._s(e.params.remark)+"\n                                "),a("div",{staticStyle:{"white-space":"normal"},attrs:{slot:"content"},slot:"content"},[e._v("\n                                    "+e._s(e.params.remark)+"\n                                ")])])],1)])])],1),e._v(" "),a("Row",{staticClass:"item-row",attrs:{gutter:24}},[a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("应付金额")]),e._v(" "),a("span",{staticClass:"content"},[e._v("\n                            ￥"+e._s(e.params.shouldPayAmount?Number(e.params.shouldPayAmount).toFixed(2):"0.00")+"\n                        ")])])]),e._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("商品总金额")]),e._v(" "),a("span",{staticClass:"content"},[e._v("￥"+e._s(e.totalActualAmountSum||"0.00"))])])]),e._v(" "),a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("优惠金额")]),e._v(" "),a("span",{staticClass:"content"},[e._v("\n                            ￥"+e._s(e.params.couponAmount||"0.00")+"\n                        ")])])])],1),e._v(" "),a("Row",{staticClass:"item-row",attrs:{gutter:24}},[a("Col",{attrs:{span:"8"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("优惠券")]),e._v(" "),a("span",{staticClass:"content"},e._l(e.tickList,function(t,r){return a("span",{key:r,staticStyle:{float:"left"}},[a("Tag",{attrs:{color:"red"}},[e._v(e._s(t.name))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v(e._s(t.code))])],1)}))])])],1)],1)],1),e._v(" "),a("div",{staticClass:"goods-pannel pannel"},[a("div",{staticClass:"title"},[a("span",[e._v("商品明细")]),e._v(" "),a("Button",{directives:[{name:"show",rawName:"v-show",value:"view"!==e.editType,expression:"editType!=='view'"}],staticStyle:{"margin-left":"12px"},attrs:{type:"primary",size:"small"},on:{click:e.openGiftSelect}},[e._v("赠品选择")]),e._v(" "),a("span",{staticClass:"amount-switch"},[a("span",[e._v("单价")]),e._v(" "),a("i-switch",{attrs:{size:"large"},model:{value:e.amountType,callback:function(t){e.amountType=t},expression:"amountType"}},[a("span",{attrs:{slot:"open"},slot:"open"},[e._v("EA")]),e._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[e._v("CAR")])])],1)],1),e._v(" "),a("div",{staticClass:"table-content"},[a("table",{staticClass:"custom-table goods-table",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[e._m(0),e._v(" "),a("thead",[a("tr",[a("th",[e._v("序号")]),e._v(" "),a("th",[e._v("商品")]),e._v(" "),a("th",[e._v("实际价格")]),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),a("th",[e._v("卖进政策")]),e._v(" "),a("th",[e._v("备注")]),e._v(" "),a("th",[e._v("小计")]),e._v(" "),a("th",{directives:[{name:"show",rawName:"v-show",value:"view"!==e.editType,expression:"editType!=='view'"}]},[e._v("操作")])])]),e._v(" "),a("tbody",[e._l(e.goodsData,function(t,r){return a("tr",{key:r},[a("td",[e._v(e._s(r+1))]),e._v(" "),a("td",{staticClass:"base-info",on:{click:function(a){e.handleGoodsClick(r,t.promotionType)}}},[a("span",{staticClass:"title"},[a("span",[e._v(e._s(t.itemName+" * "+t.packageNum))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==t.promotionType,expression:"item.promotionType == 1"}],staticClass:"icon",attrs:{title:"赠品"}},[e._v("赠")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:3==t.promotionType,expression:"item.promotionType == 3"}],staticClass:"icon",attrs:{title:"特价"}},[e._v("特")]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:11==t.promotionType,expression:"item.promotionType == 11"}],staticClass:"icon",attrs:{title:"组合商品"}},[e._v("组")])]),e._v(" "),a("br"),e._v(" "),a("span",[a("span",[e._v(e._s(t.item69))]),e._v(" "),a("span",{staticClass:"price"},[a("span",[e._v("￥")]),e._v(" "),e.amountType?a("span",[e._v(e._s((t.itemAmount/t.packageNum).toFixed(2)))]):a("span",[e._v(e._s(t.itemAmount))])])])]),e._v(" "),a("td",[e._v("\n                            ￥"),"view"!==e.editType?a("span",{class:{red:Number(t.itemActualAmount)!=Number(t.itemAmount)}},[e.amountType?a("Input",{staticStyle:{width:"60px","margin-left":"5px"},attrs:{value:e.eaItemActualAmount(t),size:"small",disabled:1==t.promotionType},on:{"on-change":function(a){return e.inputNumChange(a,"itemActualAmount",t,!0)}}}):a("Input",{staticStyle:{width:"60px","margin-left":"5px"},attrs:{value:t.itemActualAmount,size:"small",disabled:1==t.promotionType},on:{"on-change":function(a){return e.inputNumChange(a,"itemActualAmount",t)}}})],1):a("span",{class:{red:Number(t.itemActualAmount)!=Number(t.itemAmount)}},[e.amountType?a("span",[e._v(e._s((t.itemActualAmount/t.packageNum).toFixed(2)))]):a("span",[e._v(e._s(t.itemActualAmount))])])]),e._v(" "),a("td",[e._v(e._s(e.inventory(t)))]),e._v(" "),a("td",["view"!==e.editType?a("span",{class:e.overLimit(t)},[a("Input",{staticStyle:{width:"60px"},attrs:{size:"small",placeholder:"CAR",value:t.CRTItemNum},on:{"on-change":function(a){return e.inputNumChange(a,"CRTItemNum",t)}}}),e._v(" "),a("br"),e._v(" "),a("Input",{staticStyle:{width:"60px","margin-left":"-4px"},attrs:{size:"small",placeholder:"EA",value:t.EAItemNum},on:{"on-change":function(a){return e.inputNumChange(a,"EAItemNum",t)}}})],1):a("span",{staticStyle:{position:"relative"}},[a("Poptip",{attrs:{trigger:"hover",title:"Title",content:"content",placement:"right-start"}},[e.orderMain.orderStatus<=1?a("span",{class:e.overLimit(t),staticStyle:{cursor:"pointer"}},[e._v("\n                                        "+e._s(t.CRTItemNum+"/"+t.EAItemNum)+"\n                                    ")]):2==e.orderMain.orderStatus?a("span",{staticStyle:{cursor:"pointer"}},[e._v("\n                                        "+e._s(e.formatEaNum(t.auditEaNum,t.packageNum,!0))+"\n                                    ")]):5==e.orderMain.orderStatus?a("span",{staticStyle:{cursor:"pointer"}},[e._v("\n                                        "+e._s(e.formatEaNum(t.outEaNum,t.packageNum,!0))+"\n                                    ")]):9==e.orderMain.orderStatus?a("span",{staticStyle:{cursor:"pointer"}},[e._v("\n                                        "+e._s(e.formatEaNum(t.outEaNum,t.packageNum,!0))+"\n                                    ")]):7==e.orderMain.orderStatus?a("span",{staticStyle:{cursor:"pointer"}},[e._v("\n                                        "+e._s(e.formatEaNum(t.signEaNum,t.packageNum,!0))+"\n                                    ")]):a("span",{staticStyle:{cursor:"pointer"}},[e._v("\n                                        "+e._s(t.CRTItemNum+"/"+t.EAItemNum)+"\n                                    ")]),e._v(" "),a("div",{staticStyle:{"text-align":"left"},attrs:{slot:"title"},slot:"title"},[a("span",[a("span",[e._v("状态")]),e._v(" "),a("span",{staticStyle:{float:"right"}},[e._v("数量 CAR/EA")])])]),e._v(" "),a("div",{staticStyle:{"text-align":"left"},attrs:{slot:"content"},slot:"content"},[a("span",[a("span",[e._v("提交")]),e._v(" "),a("span",{staticStyle:{float:"right",color:"blue"}},[e._v(e._s(t.CRTItemNum+"/"+t.EAItemNum))])]),e._v(" "),a("br"),e._v(" "),a("span",[a("span",[e._v("审核")]),e._v(" "),a("span",{staticStyle:{float:"right",color:"blue"}},[e.orderMain.orderStatus<=1?a("span"):a("span",[e._v(e._s(e.formatEaNum(t.auditEaNum,t.packageNum)))])])]),e._v(" "),a("br"),e._v(" "),a("span",[a("span",[e._v("出库")]),e._v(" "),a("span",{staticStyle:{float:"right",color:"blue"}},[e._v(e._s(e.formatEaNum(t.outEaNum,t.packageNum)))])]),e._v(" "),a("br"),e._v(" "),a("span",[a("span",[e._v("签收")]),e._v(" "),a("span",{staticStyle:{float:"right",color:"blue"}},[e._v(e._s(e.formatEaNum(t.signEaNum,t.packageNum)))])])])])],1)]),e._v(" "),a("td",[a("span",[e._v(e._s(t.promotionCode))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v(e._s(t.promotionTitle))])]),e._v(" "),a("td",["view"!==e.editType?a("Input",{attrs:{placeholder:"备注不能超过128字",maxlength:128},model:{value:t.remark,callback:function(a){e.$set(t,"remark",a)},expression:"item.remark"}}):a("Tooltip",{style:{width:"300px"},attrs:{transfer:!0,"max-width":"300",placement:"top",content:t.remark}},[e._v("\n                                "+e._s(t.remark)+"\n                                "),a("div",{staticStyle:{"white-space":"normal"},attrs:{slot:"content"},slot:"content"},[e._v("\n                                    "+e._s(t.remark)+"\n                                ")])])],1),e._v(" "),a("td",[e._v(e._s(t.itemTotalActualAmount))]),e._v(" "),"view"!==e.editType?a("td",[a("Icon",{staticStyle:{"font-size":"16px",cursor:"pointer"},attrs:{type:"android-delete"},on:{click:function(t){e.deleteGoods(r)}}})],1):e._e()])}),e._v(" "),"view"!==e.editType?a("tr",{staticClass:"append-row"},[a("td",[e._v(e._s(e.goodsData.length+1))]),e._v(" "),a("td",[a("div",{staticClass:"auto-select",attrs:{id:"auto-order-edit-goods-select"}},[a("AutoComplete",{attrs:{size:"small",placeholder:"请输入至少两个关键字"},on:{"on-focus":e.handleGoodsAtoSearch,"on-change":e.handleGoodsAtoSearch,"on-select":e.handleGoodsAtoSelect},model:{value:e.goodsInfoAto,callback:function(t){e.goodsInfoAto=t},expression:"goodsInfoAto"}},[a("div",{staticClass:"order-detail-goods-option"},[a("span",{staticClass:"idx"},[e._v("序号")]),e._v(" "),a("span",{staticClass:"promotionType"},[e._v("标识")]),e._v(" "),a("span",{staticClass:"code69"},[e._v("条码")]),e._v(" "),a("span",[e._v("商品名称")])]),e._v(" "),e._l(e.goodsOptions,function(t,r){return a("Option",{key:r,staticClass:"order-detail-goods-option",attrs:{value:r+1+" "+t.itemName}},[a("span",{staticClass:"idx"},[e._v(e._s(r+1))]),e._v(" "),a("span",{staticClass:"promotionType"},[e._v("商品")]),e._v(" "),a("span",{staticClass:"code69"},[e._v(e._s(t.code69))]),e._v(" "),a("span",[e._v(e._s(t.itemName))])])})],2),e._v(" "),a("span",{staticClass:"extra-btn",on:{click:e.handleGoodsClick}},[a("Icon",{attrs:{type:"ios-more"}})],1)],1)]),e._v(" "),a("td",{attrs:{colspan:"7"}})]):e._e(),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left","text-indent":"12px"},attrs:{colspan:"4"}},[e._v("合计")]),e._v(" "),"view"==e.editType?a("td",[e._v(e._s(e.eaCarNum))]):a("td",[e._v(e._s(e.totalCarNum)+"/"+e._s(e.totalEaNum))]),e._v(" "),a("td",{attrs:{colspan:"2"}}),e._v(" "),a("td",["view"==e.editType?a("span",[e._v(e._s(e.params.itemToalAmount))]):a("span",[e._v(e._s(e.totalActualAmountSum))])]),e._v(" "),"view"!==e.editType?a("td"):e._e()])],2)])])]),e._v(" "),a("div",{staticClass:"pannel third-pannel"},[a("div",{staticClass:"reciever-car-info"},[a("div",{staticClass:"title"},[e._v("收货人/车辆信息")]),e._v(" "),a("div",{staticClass:"item-list"},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("收货人名称")]),e._v(" "),"view"==e.editType?a("span",{staticClass:"content"},[e._v(e._s(e.params.receiverName))]):a("Input",{staticStyle:{width:"100px"},attrs:{maxlength:20,type:"text"},model:{value:e.params.receiverName,callback:function(t){e.$set(e.params,"receiverName","string"==typeof t?t.trim():t)},expression:"params.receiverName"}})],1),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("收货人电话")]),e._v(" "),"view"==e.editType?a("span",{staticClass:"content"},[e._v(e._s(e.params.receiverMobile))]):a("Input",{staticStyle:{width:"100px"},attrs:{maxlength:20,type:"text"},model:{value:e.params.receiverMobile,callback:function(t){e.$set(e.params,"receiverMobile","string"==typeof t?t.trim():t)},expression:"params.receiverMobile"}})],1),e._v(" "),"view"==e.editType?a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("收货人地址")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.receiverTotalAddress))])]):e._e(),e._v(" "),"view"!=e.editType?a("div",{staticStyle:{height:"128px"}},[a("addrSel",{on:{"addr-change":e.addrChangeHandle},model:{value:e.receiverAddr,callback:function(t){e.receiverAddr=t},expression:"receiverAddr"}})],1):e._e(),e._v(" "),"view"!=e.editType?a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("地址详细")]),e._v(" "),a("Input",{staticStyle:{width:"200px"},attrs:{maxlength:50,type:"text"},model:{value:e.params.detailAddress,callback:function(t){e.$set(e.params,"detailAddress","string"==typeof t?t.trim():t)},expression:"params.detailAddress"}})],1):e._e(),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("车牌号")]),e._v(" "),a("span",{staticClass:"content"},["view"!==e.editType?a("AutoComplete",{attrs:{size:"small",icon:"ios-more",transfer:""},on:{"on-focus":e.handleCarNoSearch,"on-change":e.handleCarNoSearch,"on-select":e.handleCarNoSelect},model:{value:e.carNoAto,callback:function(t){e.carNoAto=t},expression:"carNoAto"}},e._l(e.carOptions,function(t,r){return a("Option",{key:r,attrs:{value:t.carPlateNo}},[e._v("\n                                "+e._s(t.carPlateNo)+"\n                            ")])})):a("span",[e._v(e._s(e.params.carNo))])],1)]),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("司机")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.params.driverName))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("载重")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.params.carLoad))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("容积")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.params.carCapacity))])])])]),e._v(" "),a("div",{staticClass:"pay-info"},[e.showO2OsignUpCouponInfo?a("div",{staticClass:"title"},[e._v("发放代金券")]):e._e(),e._v(" "),e.showO2OsignUpCouponInfo?a("div",{staticClass:"item-list",staticStyle:{"margin-right":"20px"}},[a("div",{staticClass:"item"},[a("span",{staticClass:"label",staticStyle:{width:"50px"}},[e._v("券号:")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.couponCodeStr))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label",staticStyle:{width:"50px"}},[e._v("名称:")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.couponNameStr))])]),e._v(" "),a("div",{staticClass:"item"},[a("span",{staticClass:"label",staticStyle:{width:"50px"}},[e._v("面值:")]),e._v(" "),a("span",{staticClass:"content"},[e._v(e._s(e.couponAmountStr))])])]):e._e()])]),e._v(" "),a("div",{staticClass:"pannel wuliu"},[a("div",{staticClass:"wuliu-info"},[a("div",{staticClass:"title"},[e._v("物流信息")]),e._v(" "),a("div",{staticClass:"item-list"},[a("div",{staticClass:"item"},[a("span",{staticClass:"label"},[e._v("送货日期")]),e._v(" "),a("span",{staticClass:"content"},["view"!==e.editType?a("DatePicker",{attrs:{value:e.params.deliverTime,transfer:"",size:"small"},on:{"on-change":function(t){return e.params.deliverTime=t}}}):a("span",[e._v("\n                            "+e._s(e.params.deliverTime)+"\n                        ")])],1)])])]),e._v(" "),a("div",{staticClass:"time-line"},[a("Timeline",e._l(e.formatOrderTimeline,function(t,r){return a("TimelineItem",{key:r,staticStyle:{"line-height":"18px"},attrs:{color:0==r?"red":"blue"}},[a("span",[a("span",[e._v(e._s(t.dateStr))]),e._v(" "),a("span",[e._v(e._s(t.dayStr))]),e._v(" "),a("span",[e._v(e._s(t.timeStr))]),e._v(" "),a("span",[e._v(e._s(t.text))])])])}))],1)]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"view"!==e.editType,expression:"editType!=='view'"}],staticClass:"save-btn-group",staticStyle:{"text-align":"center"}},[a("Button",{staticStyle:{"margin-right":"50px",width:"80px"},attrs:{disabled:e.saveBtnDisabled},on:{click:function(t){e.$router.go(-1)}}},[e._v("\n            取消\n        ")]),e._v(" "),a("Button",{staticStyle:{width:"80px"},attrs:{type:"primary",disabled:e.saveBtnDisabled},on:{click:e.saveOrder}},[e._v("\n            保存\n        ")])],1),e._v(" "),a("Modal",{attrs:{title:"订单审核"},model:{value:e.checkOrderModalVisible,callback:function(t){e.checkOrderModalVisible=t},expression:"checkOrderModalVisible"}},[a("div",{staticStyle:{"text-align":"center"}},[a("RadioGroup",{model:{value:e.orderCheck,callback:function(t){e.orderCheck=t},expression:"orderCheck"}},[a("Radio",{staticStyle:{"margin-right":"50px"},attrs:{label:1}},[e._v("审批通过")]),e._v(" "),a("Radio",{attrs:{label:0}},[e._v("审批不通过")])],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){e.checkOrderModalVisible=!1}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",disabled:e.btnDisable},on:{click:e.checkOrder}},[e._v("提交")])],1)]),e._v(" "),a("Modal",{attrs:{title:"取消订单"},on:{"on-ok":e.cancelOrder},model:{value:e.cancelOrderVisible,callback:function(t){e.cancelOrderVisible=t},expression:"cancelOrderVisible"}},[a("div",[a("span",[e._v("备注"),a("span",{staticClass:"require"},[e._v("*")])]),e._v(" "),a("Input",{attrs:{type:"textarea",placeholder:"备注不能超过500字",maxlength:500,rows:5},model:{value:e.cancelOrderText,callback:function(t){e.cancelOrderText=t},expression:"cancelOrderText"}})],1)]),e._v(" "),a("storeSelectModal",{attrs:{visible:e.storeModalVisible},on:{"update:visible":function(t){e.storeModalVisible=t},"on-select":e.handleStoreSelected}}),e._v(" "),a("operatorSelectModal",{attrs:{visible:e.empModalVisible,storeCode:e.params.storeCode},on:{"update:visible":function(t){e.empModalVisible=t},"on-select":e.handleEmpSelected}}),e._v(" "),a("goodsSelectModal",{attrs:{visible:e.goodsModalVisible,edit:e.editGoods,storeCode:e.params.storeCode},on:{"update:visible":function(t){e.goodsModalVisible=t},"update:edit":function(t){e.editGoods=t},"on-selected":e.handleGoodsSelected}}),e._v(" "),a("giftSelectModal",{attrs:{visible:e.giftModalVisible,edit:e.editGoods,storeCode:e.params.storeCode},on:{"update:visible":function(t){e.giftModalVisible=t},"update:edit":function(t){e.editGoods=t},"on-selected":e.handleGiftSelected}}),e._v(" "),a("orderOutbound",{attrs:{visible:e.outboundModalVisible,orderId:e.$route.query.orderId},on:{"update:visible":function(t){e.outboundModalVisible=t},successCallback:e.reloadPage}}),e._v(" "),a("orderSign",{attrs:{visible:e.orderSignModalVisible,orderId:e.$route.query.orderId},on:{"update:visible":function(t){e.orderSignModalVisible=t},successCallback:e.reloadPage}})],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("colgroup",[a("col",{attrs:{width:"60"}}),e._v(" "),a("col",{attrs:{width:"300"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",[a("span",[e._v("可用库存")]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("CAR/EA")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",[a("span",[e._v("数量")]),e._v(" "),a("br"),e._v(" "),a("span",[e._v("CAR/EA")])])}];r._withStripped=!0;var i={render:r,staticRenderFns:n};t.default=i},609:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(1087),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var s=a(1405),o=a.n(s),l=a(13),u=l(n.a,o.a,!1,null,null,null);u.options.__file="src/views/my-components/modal-selector/operator-select-modal.vue",t.default=u.exports},610:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(1088),n=a.n(r);for(var i in r)"default"!==i&&function(e){a.d(t,e,function(){return r[e]})}(i);var s=a(1406),o=a.n(s),l=a(13),u=l(n.a,o.a,!1,null,null,null);u.options.__file="src/views/my-components/modal-selector/store-select-modal.vue",t.default=u.exports},615:function(e,t,a){"use strict";function r(e){u||a(1424)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1110),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);var o=a(1426),l=a.n(o),u=!1,d=a(13),c=r,p=d(i.a,l.a,!1,c,"data-v-0b21ec50",null);p.options.__file="src/views/trader-manage/order-manage/orderOutbound.vue",t.default=p.exports},616:function(e,t,a){"use strict";function r(e){u||a(1427)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1111),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);var o=a(1429),l=a.n(o),u=!1,d=a(13),c=r,p=d(i.a,l.a,!1,c,"data-v-47bc7625",null);p.options.__file="src/views/trader-manage/order-manage/orderSign.vue",t.default=p.exports},617:function(e,t,a){"use strict";function r(e){u||a(1446)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1407),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);var o=a(1448),l=a.n(o),u=!1,d=a(13),c=r,p=d(i.a,l.a,!1,c,"data-v-b1c97b98",null);p.options.__file="src/views/my-components/modal-selector/goods-select-modal-new.vue",t.default=p.exports},622:function(e,t,a){"use strict";function r(e){u||a(1468)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1412),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);var o=a(1470),l=a.n(o),u=!1,d=a(13),c=r,p=d(i.a,l.a,!1,c,"data-v-43ed94aa",null);p.options.__file="src/views/trader-manage/order-manage/addrsel-order-detail.vue",t.default=p.exports},631:function(e,t,a){"use strict";function r(e){u||a(1493)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1444),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);var o=a(1495),l=a.n(o),u=!1,d=a(13),c=r,p=d(i.a,l.a,!1,c,"data-v-64f814a4",null);p.options.__file="src/views/my-components/modal-selector/gift-select-modal-new.vue",t.default=p.exports},872:function(e,t,a){"use strict";function r(e){u||(a(2626),a(2628))}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1762),i=a.n(n);for(var s in n)"default"!==s&&function(e){a.d(t,e,function(){return n[e]})}(s);var o=a(2630),l=a.n(o),u=!1,d=a(13),c=r,p=d(i.a,l.a,!1,c,"data-v-275dd40e",null);p.options.__file="src/views/trader-manage/order-manage/order-detail-new.vue",t.default=p.exports},897:function(e,t,a){var r=a(44);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},898:function(e,t,a){"use strict";function r(e,t){if(!t)var t="yyyy-MM-DD hh:mm:ss";var a={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in a)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?a[r]:("00"+a[r]).substr((""+a[r]).length)));return t}function n(e,t){if(!t)var t="yyyy-MM-dd";(e=Number(e))<1e10&&(e*=1e3);var a=new Date(e),r={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=r,t.timestampToDay=n},909:function(e,t,a){e.exports={default:a(910),__esModule:!0}},910:function(e,t,a){a(151),a(75),a(100),a(911),a(917),a(920),a(922),e.exports=a(11).Set},911:function(e,t,a){"use strict";var r=a(912),n=a(897);e.exports=a(913)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(n(this,"Set"),e=0===e?0:e,e)}},r)},912:function(e,t,a){"use strict";var r=a(32).f,n=a(148),i=a(245),s=a(64),o=a(244),l=a(240),u=a(147),d=a(246),c=a(248),p=a(37),m=a(243).fastKey,h=a(897),v=p?"_s":"size",f=function(e,t){var a,r=m(t);if("F"!==r)return e._i[r];for(a=e._f;a;a=a.n)if(a.k==t)return a};e.exports={getConstructor:function(e,t,a,u){var d=e(function(e,r){o(e,d,t,"_i"),e._t=t,e._i=n(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&l(r,a,e[u],e)});return i(d.prototype,{clear:function(){for(var e=h(this,t),a=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete a[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var a=h(this,t),r=f(a,e);if(r){var n=r.n,i=r.p;delete a._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),a._f==r&&(a._f=n),a._l==r&&(a._l=i),a[v]--}return!!r},forEach:function(e){h(this,t);for(var a,r=s(e,arguments.length>1?arguments[1]:void 0,3);a=a?a.n:this._f;)for(r(a.v,a.k,this);a&&a.r;)a=a.p},has:function(e){return!!f(h(this,t),e)}}),p&&r(d.prototype,"size",{get:function(){return h(this,t)[v]}}),d},def:function(e,t,a){var r,n,i=f(e,t);return i?i.v=a:(e._l=i={i:n=m(t,!0),k:t,v:a,p:r=e._l,n:void 0,r:!1},e._f||(e._f=i),r&&(r.n=i),e[v]++,"F"!==n&&(e._i[n]=i)),e},getEntry:f,setStrong:function(e,t,a){u(e,t,function(e,a){this._t=h(e,t),this._k=a,this._l=void 0},function(){for(var e=this,t=e._k,a=e._l;a&&a.r;)a=a.p;return e._t&&(e._l=a=a?a.n:e._t._f)?"keys"==t?d(0,a.k):"values"==t?d(0,a.v):d(0,[a.k,a.v]):(e._t=void 0,d(1))},a?"entries":"values",!a,!0),c(t)}}},913:function(e,t,a){"use strict";var r=a(12),n=a(36),i=a(243),s=a(66),o=a(45),l=a(245),u=a(240),d=a(244),c=a(44),p=a(77),m=a(32).f,h=a(914)(0),v=a(37);e.exports=function(e,t,a,f,g,_){var b=r[e],N=b,y=g?"set":"add",C=N&&N.prototype,x={};return v&&"function"==typeof N&&(_||C.forEach&&!s(function(){(new N).entries().next()}))?(N=t(function(t,a){d(t,N,e,"_c"),t._c=new b,void 0!=a&&u(a,g,t[y],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in C&&(!_||"clear"!=e)&&o(N.prototype,e,function(a,r){if(d(this,N,e),!t&&_&&!c(a))return"get"==e&&void 0;var n=this._c[e](0===a?0:a,r);return t?this:n})}),_||m(N.prototype,"size",{get:function(){return this._c.size}})):(N=f.getConstructor(t,e,g,y),l(N.prototype,a),i.NEED=!0),p(N,e),x[e]=N,n(n.G+n.W+n.F,x),_||f.setStrong(N,e,g),N}},914:function(e,t,a){var r=a(64),n=a(149),i=a(98),s=a(99),o=a(915);e.exports=function(e,t){var a=1==e,l=2==e,u=3==e,d=4==e,c=6==e,p=5==e||c,m=t||o;return function(t,o,h){for(var v,f,g=i(t),_=n(g),b=r(o,h,3),N=s(_.length),y=0,C=a?m(t,N):l?m(t,0):void 0;N>y;y++)if((p||y in _)&&(v=_[y],f=b(v,y,g),e))if(a)C[y]=f;else if(f)switch(e){case 3:return!0;case 5:return v;case 6:return y;case 2:C.push(v)}else if(d)return!1;return c?-1:u||d?d:C}}},915:function(e,t,a){var r=a(916);e.exports=function(e,t){return new(r(e))(t)}},916:function(e,t,a){var r=a(44),n=a(247),i=a(14)("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!n(t.prototype)||(t=void 0),r(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},917:function(e,t,a){var r=a(36);r(r.P+r.R,"Set",{toJSON:a(918)("Set")})},918:function(e,t,a){var r=a(150),n=a(919);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},919:function(e,t,a){var r=a(240);e.exports=function(e,t){var a=[];return r(e,!1,a.push,a,t),a}},920:function(e,t,a){a(921)("Set")},921:function(e,t,a){"use strict";var r=a(36);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},922:function(e,t,a){a(923)("Set")},923:function(e,t,a){"use strict";var r=a(36),n=a(76),i=a(64),s=a(240);e.exports=function(e){r(r.S,e,{from:function(e){var t,a,r,o,l=arguments[1];return n(this),t=void 0!==l,t&&n(l),void 0==e?new this:(a=[],t?(r=0,o=i(l,arguments[2],2),s(e,!1,function(e){a.push(o(e,r++))})):s(e,!1,a.push,a),new this(a))}})}},984:function(e,t,a){"use strict";function r(){for(var e=void 0,t=s.size;t==s.size;){for(var a=(new Date).getTime()%1e5,r=Math.floor(1e8*Math.random()),n=Math.floor(1e9*Math.random());a<1e4;)a*=10;for(;r<1e8;)r*=10;for(;n<1e9;)n*=10;e=a.toString()+r.toString()+n.toString(),s.add(e)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.createUniqueRandomNum24=void 0;var n=a(909),i=function(e){return e&&e.__esModule?e:{default:e}}(n),s=new i.default;t.createUniqueRandomNum24=r}});