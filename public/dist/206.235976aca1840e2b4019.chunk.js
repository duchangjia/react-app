webpackJsonp([206],{1740:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(65),o=a(r),i=n(239),l=a(i);t.default={data:function(){var e=this;return{loading:!1,totalCount:0,columns:[{title:"序号",key:"xuhao",align:"center",render:function(e,t){return"小计"==t.row.xuhao||"总计"==t.row.xuhao?e("div",t.row.xuhao):e("div",t.index+1)}},{title:"开票名称",key:"openTicketName",align:"center"},{title:"门店编号",key:"storeCode",align:"center"},{title:"门店名称",align:"center",key:"storeName"},{title:"应收金额",align:"center",key:"receiptPrice",render:function(t,n){return t("div",{props:{},attrs:{class:"mouse-on"},style:{cursor:"pointer"},on:{click:function(){"小计"==n.row.xuhao||"总计"==n.row.xuhao||e.$router.push({name:"should-receipt-account-listDetail",query:{data:(0,o.default)({startTime:String(e.value.startTime),endTime:String(e.value.endTime),storeName:n.row.storeName,storeCode:n.row.storeCode,customizeClientId:n.row.customizeClientId,openTicketName:n.row.openTicketName}),type:"1"}})}}},n.row.receiptPrice?Number(n.row.receiptPrice).toFixed(2):0)}},{title:"实收金额",align:"center",key:"paymentPrice",render:function(t,n){return t("div",{props:{},attrs:{class:"mouse-on"},style:{cursor:"pointer"},on:{click:function(){"小计"==n.row.xuhao||"总计"==n.row.xuhao||e.$router.push({name:"should-receipt-account-listDetail",query:{data:(0,o.default)({startTime:e.value.startTime,endTime:e.value.endTime,storeName:n.row.storeName,storeCode:n.row.storeCode,customizeClientId:n.row.customizeClientId,openTicketName:n.row.openTicketName}),type:"2"}})}}},n.row.paymentPrice?Number(n.row.paymentPrice).toFixed(2):0)}},{title:"核销金额",align:"center",key:"chargeOffAmount",render:function(t,n){return t("div",{props:{},attrs:{class:"mouse-on"},style:{cursor:"pointer"},on:{click:function(){"小计"==n.row.xuhao||"总计"==n.row.xuhao||e.$router.push({name:"should-receipt-account-listDetail",query:{data:(0,o.default)({startTime:e.value.startTime,endTime:e.value.endTime,storeName:n.row.storeName,storeCode:n.row.storeCode,customizeClientId:n.row.customizeClientId,openTicketName:n.row.openTicketName}),type:"2"}})}}},n.row.chargeOffAmount?Number(n.row.chargeOffAmount).toFixed(2):0)}},{title:"余额",align:"center",key:"restAmount",render:function(e,t){return e("div",t.row.restAmount?Number(t.row.restAmount).toFixed(2):0)}},{title:"操作",align:"center",key:"handle",render:function(t,n){return"小计"==n.row.xuhao||"总计"==n.row.xuhao?"":t("div",[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){e.$router.push({name:"should-receipt-account-view",query:{data:(0,o.default)({startTime:e.value.startTime,endTime:e.value.endTime,customizeClientId:n.row.customizeClientId,openTicketName:n.row.openTicketName})}})}}},"创建对款单")])}}],data:[],value:{startTime:"",endTime:"",storeName:"",originalOrderNo:"",operateAccount:"",receiptOrderNo:"",storeCode:"",openTicketName:"",page:1},res:""}},mounted:function(){var e=(new Date).valueOf();this.value.endTime=this.timestampToTime(e,"yy-mm-dd");var t=new Date;t.setMonth(t.getMonth()-1);var n=t.getFullYear(),a=t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,r=t.getDate(),o=n+"-"+a+"-"+r;this.value.startTime=o,this.query(1)},methods:{timestampToTime:function(e,t){var t=new Date(e),n=t.getFullYear()+"-",a=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",r=t.getDate()+" ",o=t.getHours()+":",i=t.getMinutes()+":",l=t.getSeconds();return t?n+a+r:n+a+r+o+i+l},query:function(e){var t=this;t.timeSlide(),t.loading=!0,this.value.page=e,this.$util.ajax({method:"post",url:t.$util.apiConfig.traderManage.flowManage.shouldReceiptAccount.list,data:l.default.stringify(this.value)}).then(function(e){if(t.loading=!1,200==e.data.code){if(t.data=[],t.totalCount=0,""==e.data.result.pager.records)return;t.data=e.data.result.pager.records,t.totalCount=e.data.result.pager.totalCount;for(var n in t.data)t.data[n].restAmount=Number(t.data[n].receiptPrice)-Number(t.data[n].chargeOffAmount);var a=0,r=0,o=0,i=0;for(var l in t.data)a+=t.data[l].receiptPrice?Number(Number(t.data[l].receiptPrice).toFixed(2)):0,r+=t.data[l].paymentPrice?Number(Number(t.data[l].paymentPrice).toFixed(2)):0,o+=t.data[l].chargeOffAmount?Number(Number(t.data[l].chargeOffAmount).toFixed(2)):0,i+=t.data[l].restAmount?Number(Number(t.data[l].restAmount).toFixed(2)):0;t.data.push({xuhao:"小计",receiptPrice:a,paymentPrice:r,chargeOffAmount:o,restAmount:i}),t.data.push({xuhao:"总计",receiptPrice:e.data.result.vo.receiptPrice,paymentPrice:e.data.result.vo.paymentPrice,chargeOffAmount:e.data.result.vo.chargeOffAmount,restAmount:Number(Number(e.data.result.vo.receiptPrice).toFixed(2))-Number(Number(e.data.result.vo.chargeOffAmount).toFixed(2))})}else t.$Modal.error({title:"提示",content:e.data.message})}).catch(function(e){console.log("失败信息：",e)})},timeSlide:function(){var e=new Date(this.value.startTime);this.value.startTime=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();var t=new Date(this.value.endTime);this.value.endTime=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}},components:{}}},2534:function(e,t,n){var a=n(2535);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(43)("33f05a0f",a,!1,{})},2535:function(e,t,n){t=e.exports=n(42)(!1),t.push([e.i,"\n.width-100 {\n  width: 100%;\n}\n.lb-left {\n  float: left;\n}\n.lb-right {\n  float: right;\n}\n.lb-center {\n  text-align: center;\n}\n.lb-promotion-main {\n  height: auto;\n  background-color: #fff;\n}\n.lb-promotion-main .lb-promotion-search {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row {\n  margin-bottom: 14px;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row .ListName {\n  text-align: right;\n  line-height: 32px;\n  color: #747474;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.promotion-page {\n  margin: 1rem 0 0 0;\n}\n.container {\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  padding: 1% 1% 3%;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-12 {\n  margin-bottom: 12px;\n}\n.margin-bottom-14 {\n  margin-bottom: 14px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.mb--12 {\n  margin-bottom: 12px;\n}\n.mb--14 {\n  margin-bottom: 14px;\n}\n.border-b--dashed {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.pd--20 {\n  padding: 20px;\n}\n.ml--50 {\n  margin-left: 50px;\n}\n.fr {\n  float: right;\n}\n.fl {\n  float: left;\n}\n.bg--white {\n  background: #fff;\n}\n.clearfix:after {\n  content: '';\n  display: block;\n  height: 0;\n  clear: both;\n}\n.text-center {\n  text-align: center;\n}\n.white {\n  background-color: white;\n}\n.select_box {\n  padding: 20px;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.ling_height {\n  padding-top: 15px;\n}\n.text_align_right {\n  text-align: right;\n}\n.text_align_center {\n  text-align: center;\n}\n.operation_box {\n  padding: 10px 20px;\n  text-align: right;\n}\n.page_right {\n  text-align: right;\n  padding: 10px 20px;\n}\n.input_width {\n  width: 120px;\n}\n.search_btn {\n  width: 100px;\n}\n.margin_bottom_0 {\n  margin-bottom: 0;\n}\n.ivu-breadcrumb a {\n  color: #999;\n}\n.ivu-breadcrumb {\n  font-size: 12px;\n}\n.ivu-breadcrumb > span:last-child {\n  color: #426196;\n}\n.box_shadow {\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-color: #eee;\n}\n.border_bottom_dashed {\n  border-bottom: 1px dashed #E8E8E8;\n}\n.problem_table .ivu-checkbox-wrapper {\n  margin-right: 0px;\n}\n.should-receipt-account {\n  width: 100%;\n  height: 100%;\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  text-align: center;\n  padding: 10px 0;\n}\n.should-receipt-account .head {\n  padding: 20px 0;\n}\n.should-receipt-account .head .head_left {\n  padding: 10px 0;\n  border-right: 1px dashed #E8E8E8;\n}\n.should-receipt-account .head .head_left #OrderID {\n  width: 50%;\n}\n.should-receipt-account .head .head_left #store {\n  width: 50%;\n}\n.should-receipt-account .head .head_left #OrderAccount {\n  width: 50%;\n}\n.should-receipt-account .head .head_left #ReceiptID {\n  width: 50%;\n}\n.should-receipt-account .head .head_left #StoresNumber {\n  width: 50%;\n}\n.should-receipt-account .head .head_left #billingName {\n  width: 50%;\n}\n.should-receipt-account .head .head_left .date {\n  width: 50%;\n}\n.should-receipt-account .head .head_left .hl2 {\n  margin-top: 10px;\n}\n.should-receipt-account .head .head_right .query {\n  margin-bottom: 10px;\n}\n.should-receipt-account .table {\n  margin: 1%;\n}\n.should-receipt-account .page {\n  text-align: right;\n  margin-right: 1%;\n}\n.should-receipt-account .mouse-on:hover {\n  color: #57a3f3;\n}\n.ivu-table-row-highlight td,\ntr.ivu-table-row-highlight.ivu-table-row-hover td {\n  background: red;\n  color: #fff;\n}\n",""])},2536:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"should-receipt-account"},[n("Row",{staticClass:"head"},[n("Col",{staticClass:"head_left",attrs:{span:"21"}},[n("Row",[n("Col",{attrs:{span:"6"}},[e._v("\n                    开始时间 : \n                    "),n("DatePicker",{staticClass:"date",attrs:{type:"date"},model:{value:e.value.startTime,callback:function(t){e.$set(e.value,"startTime",t)},expression:"value.startTime"}})],1),e._v(" "),n("Col",{attrs:{span:"6"}},[e._v("\n                    截止时间 : \n                    "),n("DatePicker",{staticClass:"date",attrs:{type:"date"},model:{value:e.value.endTime,callback:function(t){e.$set(e.value,"endTime",t)},expression:"value.endTime"}})],1),e._v(" "),n("Col",{attrs:{span:"6"}},[n("label",{attrs:{for:"store"}},[e._v("门店 :  ")]),n("Input",{attrs:{id:"store"},model:{value:e.value.storeName,callback:function(t){e.$set(e.value,"storeName",t)},expression:"value.storeName"}})],1),e._v(" "),n("Col",{attrs:{span:"6"}},[n("label",{attrs:{for:"OrderID"}},[e._v("订单号 :  ")]),n("Input",{attrs:{id:"OrderID"},model:{value:e.value.originalOrderNo,callback:function(t){e.$set(e.value,"originalOrderNo",t)},expression:"value.originalOrderNo"}})],1)],1),e._v(" "),n("Row",{staticClass:"hl2"},[n("Col",{attrs:{span:"6"}},[n("label",{attrs:{for:"OrderAccount"}},[e._v("下单账号 :  ")]),n("Input",{attrs:{id:"OrderAccount"},model:{value:e.value.operateAccount,callback:function(t){e.$set(e.value,"operateAccount",t)},expression:"value.operateAccount"}})],1),e._v(" "),n("Col",{attrs:{span:"6"}},[n("label",{attrs:{for:"ReceiptID"}},[e._v("收货单号 :  ")]),n("Input",{attrs:{id:"ReceiptID"},model:{value:e.value.receiptOrderNo,callback:function(t){e.$set(e.value,"receiptOrderNo",t)},expression:"value.receiptOrderNo"}})],1),e._v(" "),n("Col",{attrs:{span:"6"}},[n("label",{attrs:{for:"StoresNumber"}},[e._v("门店编号 :  ")]),n("Input",{attrs:{id:"StoresNumber"},model:{value:e.value.storeCode,callback:function(t){e.$set(e.value,"storeCode",t)},expression:"value.storeCode"}})],1),e._v(" "),n("Col",{attrs:{span:"6"}},[n("label",{attrs:{for:"billingName"}},[e._v("开票名称 :  ")]),n("Input",{attrs:{id:"billingName"},model:{value:e.value.openTicketName,callback:function(t){e.$set(e.value,"openTicketName",t)},expression:"value.openTicketName"}})],1)],1)],1),e._v(" "),n("Col",{staticClass:"head_right",attrs:{span:"3"}},[n("br"),n("br"),e._v(" "),n("Button",{staticClass:"query",on:{click:function(t){e.query(1)}}},[e._v("查询 ")])],1)],1),e._v(" "),n("Table",{staticClass:"table",attrs:{columns:e.columns,data:e.data,loading:e.loading}}),e._v(" "),n("div",{staticClass:"page-bar",staticStyle:{overflow:"hidden"}},[n("Page",{staticStyle:{float:"right"},attrs:{total:e.totalCount,current:e.value.page,"show-total":"","show-elevator":""},on:{"on-change":e.query}})],1)],1)},r=[];a._withStripped=!0;var o={render:a,staticRenderFns:r};t.default=o},854:function(e,t,n){"use strict";function a(e){u||n(2534)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1740),o=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);var l=n(2536),d=n.n(l),u=!1,c=n(13),s=a,p=c(o.a,d.a,!1,s,null,null);p.options.__file="src/views/trader-manage/flow-manage/should-receipt-account/should-receipt-account.vue",t.default=p.exports}});