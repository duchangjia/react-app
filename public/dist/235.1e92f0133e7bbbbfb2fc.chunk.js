webpackJsonp([235],{1664:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(239),i=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={data:function(){var t=this;return{apiGroup:this.$util.apiConfig.traderManage.infoManage.standardizationTarget,query:{month:"",attendanceDays:""},pager:{},loading:!1,empList:[],empSelectedList:[],columns1:[{title:"业务员",key:"empName",minWidth:150},{title:"预打造目标",key:"geoponicsCount",minWidth:150,render:function(e,n){return e("div",[e("input",{domProps:{value:n.row.geoponicsCount},on:{input:function(e){var a=e.target.value;a=a.replace(/[^\d]/g,""),e.target.value=a;var i=n.row;i.geoponicsCount=a,t.entity[n.index]=i}},class:{"ivu-input":!0},style:{width:"100px"},attrs:{maxlength:6}})])}},{title:"精耕打造目标",key:"prebuildCount",minWidth:150,render:function(e,n){return e("div",[e("input",{domProps:{value:n.row.prebuildCount},on:{input:function(e){var a=e.target.value;a=a.replace(/[^\d]/g,""),e.target.value=a;var i=n.row;i.prebuildCount=a,t.entity[n.index]=i}},class:{"ivu-input":!0},style:{width:"100px"},attrs:{maxlength:6}})])}},{title:"扫盲",key:"eliminateIlliteracy",minWidth:150,render:function(e,n){return e("div",[e("input",{domProps:{value:n.row.eliminateIlliteracy},on:{input:function(e){var a=e.target.value;a=a.replace(/[^\d]/g,""),e.target.value=a;var i=n.row;i.eliminateIlliteracy=a,t.entity[n.index]=i}},class:{"ivu-input":!0},style:{width:"100px"},attrs:{maxlength:6}})])}},{title:"O2O推广",key:"storeCount",minWidth:150,render:function(e,n){return e("div",[e("input",{domProps:{value:n.row.storeCount},on:{input:function(e){var a=e.target.value;a=a.replace(/[^\d]/g,""),e.target.value=a;var i=n.row;i.storeCount=a,t.entity[n.index]=i}},class:{"ivu-input":!0},style:{width:"100px"},attrs:{maxlength:6}})])}}],entity:[]}},created:function(){var t=this,e={};e.id=this.$route.query.id,this.loading=!0,this.$util.ajax.post(this.apiGroup.detail,i.default.stringify(e)).then(function(e){t.loading=!1,console.log("标准化打造编辑目标：",e),200==e.data.code?(t.entity.push(e.data.result),t.query.month=e.data.result.month,t.query.attendanceDays=e.data.result.attendanceDays):t.$Modal.error({title:"请求获取数据失败",content:e.data.message})}).catch(function(e){console.log(e),t.loading=!1,t.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})},methods:{attendDayInputFormat:function(t){t.target.value=t.target.value.replace(/[^\d]/g,"");var e=this.query.month.split("-")[0],n=this.query.month.split("-")[1],a=new Date(e,n,0),i=Number(a.getDate());Number(t.target.value)>Number(i)&&(t.target.value=i,this.$Notice.warning({desc:"本月只有"+i+"天",duration:2})),this.query.attendanceDays=t.target.value},monthChangeHandle:function(t){this.query.month=t;var e=this.query.month.split("-")[0],n=this.query.month.split("-")[1],a=new Date(e,n,0),i=Number(a.getDate());Number(this.query.attendanceDays)>i&&(this.query.attendanceDays=i,this.$Notice.warning({desc:"本月只有"+i+"天",duration:2}))},goback:function(){this.$router.replace({name:"standardization-make-target"})},editEmpSubmit:function(){var t=this;if(""==this.query.month)return void this.$Modal.error({title:"月份不能为空",content:"请选择月份"});if(""==this.query.attendanceDays)return void this.$Modal.error({title:"出勤天数不能为空",content:"请输入出勤天数"});if(0==this.entity.length)return void this.$Modal.error({title:"业务员不能为空",content:"请选择业务员"});var e=!1;if(this.entity.forEach(function(t){""!=t.geoponicsCount&&""!=t.prebuildCount&&""!=t.eliminateIlliteracy&&""!=t.storeCount||(e=!0)}),e)return void this.$Modal.error({title:"业务员打造次数不能为空",content:"请输入业务员打造次数"});var n={};n.id=this.entity[0].id,n.month=this.query.month,n.attendanceDays=this.query.attendanceDays,n.geoponicsCount=this.entity[0].geoponicsCount,n.prebuildCount=this.entity[0].prebuildCount,n.eliminateIlliteracy=this.entity[0].eliminateIlliteracy,n.storeCount=this.entity[0].storeCount,this.loading=!0,this.$util.ajax.post(this.apiGroup.update,i.default.stringify(n)).then(function(e){t.loading=!1,1==e.data.success?t.$Modal.success({title:"保存操作成功",content:"已成功修改数据",onOk:function(){t.goback()}}):t.$Modal.error({title:"修改请求失败",content:e.data.message})}).catch(function(e){console.log(e),t.loading=!1,t.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})}}}},2257:function(t,e,n){var a=n(2258);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(43)("e02b6ab4",a,!1,{})},2258:function(t,e,n){e=t.exports=n(42)(!1),e.push([t.i,"\n.cmain[data-v-ef491148] {\n  background-color: white;\n  position: relative;\n  /* min-width: 1020px; */\n}\n.checkForm .ivu-col[data-v-ef491148] {\n  margin: 10px 0px;\n}\n.qianshouCol .ivu-col[data-v-ef491148] {\n  margin: 5px 0px;\n}\n.line[data-v-ef491148] {\n  border-bottom: 1px solid #dddee1;\n}\nbutton + button[data-v-ef491148] {\n  margin-left: 10px;\n}\n",""])},2259:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cmain"},[n("div",{staticStyle:{padding:"20px 50px"}},[n("br"),t._v(" "),n("Row",[n("Col",{attrs:{sm:12,md:8,lg:6}},[n("span",[t._v("月份:")]),t._v(" "),n("date-picker",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{readonly:!0,disabled:!0,value:t.query.month,type:"month",placeholder:"请选择月份"},on:{"on-change":t.monthChangeHandle}})],1),t._v(" "),n("Col",{attrs:{sm:12,md:8,lg:6}},[n("span",[t._v("出勤天数：")]),t._v(" "),n("Input",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{disabled:""==t.query.month,type:"text"},on:{"on-keyup":t.attendDayInputFormat},model:{value:t.query.attendanceDays,callback:function(e){t.$set(t.query,"attendanceDays","string"==typeof e?e.trim():e)},expression:"query.attendanceDays"}})],1)],1),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("div",{staticStyle:{"border-bottom":"1px rgba(204, 204, 204, 1) solid"}}),t._v(" "),n("br"),t._v(" "),n("Table",{ref:"selection",attrs:{stripe:"",columns:t.columns1,data:t.entity}}),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("Row",{attrs:{type:"flex",justify:"center"}},[n("i-button",{staticStyle:{width:"115px","margin-left":"15px"},attrs:{type:"primary"},on:{click:t.editEmpSubmit}},[t._v("保存")]),t._v(" "),n("i-button",{staticStyle:{width:"115px","margin-left":"15px"},on:{click:t.goback}},[t._v("返回")])],1),t._v(" "),n("br"),t._v(" "),n("br")],1),t._v(" "),t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},i=[];a._withStripped=!0;var r={render:a,staticRenderFns:i};e.default=r},781:function(t,e,n){"use strict";function a(t){s||n(2257)}Object.defineProperty(e,"__esModule",{value:!0});var i=n(1664),r=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);var u=n(2259),l=n.n(u),s=!1,d=n(13),c=a,p=d(r.a,l.a,!1,c,"data-v-ef491148",null);p.options.__file="src/views/promotion-manage/war-programme/terminal-brand-managment/standardization-make-target/standardization-make-target-edit.vue",e.default=p.exports}});