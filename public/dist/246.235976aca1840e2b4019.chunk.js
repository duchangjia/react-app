webpackJsonp([246],{1589:function(n,t,e){"use strict";function o(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(t,"__esModule",{value:!0});var a=e(38),r=(o(a),e(239));o(r);t.default={data:function(){var n=this;return{totalCount:1,current:1,loading:!1,getDetailRouter:2==this.$route.query.type?"log-month-detail":"log-year-detail",getLogListRouter:2==this.$route.query.type?"log-monthlist":"log-yearlist",columns:[{title:"业务员编号",key:"salesmanId",align:"center"},{title:"业务员",align:"center",key:"salesmanName"},{title:2==this.$route.query.type?"月度":"年度",align:"center",key:"yearMonth",width:90,render:function(t,e){var o="";return o=2==n.$route.query.type?e.row.year+"-"+e.row.month:e.row.year,t("div",o)}},{title:"目标总销量",align:"center",key:"salesTarget"},{title:"操作",align:"center",key:"handle",render:function(t,e){return t("div",[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){n.$router.push({name:n.getDetailRouter,query:{id:e.row.id,targetId:e.row.targetId,type:n.$route.query.type,delType:"1"}})}}},"详细"),t("Button",{props:{type:"primary",size:"small"},style:{margin:"0 5px 0 5px"},on:{click:function(){n.$router.push({name:n.getLogListRouter,query:{targetId:e.row.targetId,type:n.$route.query.type,delType:"2"}})}}},"日志"),t("Button",{props:{type:"primary",size:"small"},style:{margin:"0 5px 0 0"},on:{click:function(){n.recove(e.row.id,e.row.targetId)}}},"恢复"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){n.remove(e.row.id,e.row.targetId)}}},"删除")])}}],data:[],value:{seek:[],month:""},formItem:{salesman:[]},type:this.$route.query.type}},mounted:function(){},methods:{getFormItem:function(){var n=this;this.$ajax({method:"post",url:this.$util.apiConfig.promotionManage.warAdviser.targetConfig.querySalesman}).then(function(t){t.data.result.map(function(t){var e={userid:t.empId,username:t.empName};n.formItem.salesman.push(e)})}).catch(function(n){console.log("失败信息：",n)})},remove:function(n,t){var e=this;this.$Modal.confirm({title:"提示",content:"<p>彻底删除是不可恢复的，您确认要删除吗？</p>",onOk:function(){e.$ajax({method:"post",url:e.$util.apiConfig.promotionManage.warAdviser.targetConfig.delClear,data:{targetId:t,id:n}}).then(function(n){200==n.data.code?(e.$Message.success("删除成功！"),e.delLogList(1)):e.$Message.error("删除失败！")}).catch(function(n){console.log("失败信息：",n)})}})},recove:function(n,t){var e=this;this.$Modal.confirm({title:"提示",content:"<p>您确认要恢复吗？</p>",onOk:function(){e.$ajax({method:"post",url:e.$util.apiConfig.promotionManage.warAdviser.targetConfig.delRecoverRecord,data:{id:n,targetId:t}}).then(function(n){200==n.data.code?(e.$Message.success("恢复成功！"),e.delLogList(1)):e.$Message.error(n.data.result)}).catch(function(n){console.log("失败信息：",n)})}})},delLogList:function(n){var t=this,e=void 0,o=void 0;if(this.value.month){var a=new Date(this.value.month);e=a.getFullYear()+"",o=a.getMonth()+1+"",1==o.length&&(o="0"+o)}var r=void 0;r=2==this.$route.query.type?{pager:{page:n,rows:10},type:this.$route.query.type,logType:2,year:e,month:o,salesmanList:this.value.seek}:{pager:{page:n,rows:10},type:this.$route.query.type,logType:2,year:e,salesmanList:this.value.seek},this.loading=!0,this.$ajax({method:"post",url:this.$util.apiConfig.promotionManage.warAdviser.targetConfig.delLogList,data:r}).then(function(e){t.loading=!1,t.data=[],200==e.data.code&&(t.totalCount=e.data.result.total,t.data=e.data.result.rows),t.current=n}).catch(function(n){console.log("失败信息：",n)})}},components:{},created:function(){this.delLogList(1),this.getFormItem()}}},2024:function(n,t,e){var o=e(2025);"string"==typeof o&&(o=[[n.i,o,""]]),o.locals&&(n.exports=o.locals);e(43)("1f2338c9",o,!1,{})},2025:function(n,t,e){t=n.exports=e(42)(!1),t.push([n.i,"\n.width-100 {\n  width: 100%;\n}\n.lb-left {\n  float: left;\n}\n.lb-right {\n  float: right;\n}\n.lb-center {\n  text-align: center;\n}\n.lb-promotion-main {\n  height: auto;\n  background-color: #fff;\n}\n.lb-promotion-main .lb-promotion-search {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row {\n  margin-bottom: 14px;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row .ListName {\n  text-align: right;\n  line-height: 32px;\n  color: #747474;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.promotion-page {\n  margin: 1rem 0 0 0;\n}\n.container {\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  padding: 1% 1% 3%;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-12 {\n  margin-bottom: 12px;\n}\n.margin-bottom-14 {\n  margin-bottom: 14px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.mb--12 {\n  margin-bottom: 12px;\n}\n.mb--14 {\n  margin-bottom: 14px;\n}\n.border-b--dashed {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.pd--20 {\n  padding: 20px;\n}\n.ml--50 {\n  margin-left: 50px;\n}\n.fr {\n  float: right;\n}\n.fl {\n  float: left;\n}\n.bg--white {\n  background: #fff;\n}\n.clearfix:after {\n  content: '';\n  display: block;\n  height: 0;\n  clear: both;\n}\n.text-center {\n  text-align: center;\n}\n.white {\n  background-color: white;\n}\n.select_box {\n  padding: 20px;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.ling_height {\n  padding-top: 15px;\n}\n.text_align_right {\n  text-align: right;\n}\n.text_align_center {\n  text-align: center;\n}\n.operation_box {\n  padding: 10px 20px;\n  text-align: right;\n}\n.page_right {\n  text-align: right;\n  padding: 10px 20px;\n}\n.input_width {\n  width: 120px;\n}\n.search_btn {\n  width: 100px;\n}\n.margin_bottom_0 {\n  margin-bottom: 0;\n}\n.ivu-breadcrumb a {\n  color: #999;\n}\n.ivu-breadcrumb {\n  font-size: 12px;\n}\n.ivu-breadcrumb > span:last-child {\n  color: #426196;\n}\n.box_shadow {\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-color: #eee;\n}\n.border_bottom_dashed {\n  border-bottom: 1px dashed #E8E8E8;\n}\n.problem_table .ivu-checkbox-wrapper {\n  margin-right: 0px;\n}\n.annual-objectives {\n  width: 100%;\n  height: 100%;\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  text-align: center;\n}\n.annual-objectives .head1 {\n  padding: 10px 0;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.annual-objectives .head1 .xiala1 {\n  width: 66%;\n}\n.annual-objectives .head1 #yue {\n  width: 40%;\n  height: 34px;\n  border: 1px solid #E8E8E8;\n  border-radius: 5px;\n}\n.annual-objectives .newTarget {\n  padding: 10px 0;\n}\n.annual-objectives .tables {\n  margin: 0 1%;\n}\n.annual-objectives .page {\n  text-align: right;\n  margin-right: 1%;\n  margin-top: 10px;\n}\n",""])},2026:function(n,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("div",{staticClass:"annual-objectives"},[e("div",{staticClass:"head1",staticStyle:{padding:"20px 0"}},[e("Row",[e("Col",{attrs:{span:"6"}},[n._v("\n                业务员：\n                "),e("Select",{staticClass:"xiala1",attrs:{filterable:"",multiple:"",placeholder:"请选择或搜索名字"},model:{value:n.value.seek,callback:function(t){n.$set(n.value,"seek",t)},expression:"value.seek"}},n._l(n.formItem.salesman,function(t){return e("Option",{key:t.userid,attrs:{value:t.userid}},[n._v(n._s(t.username))])}))],1),n._v(" "),e("Col",{directives:[{name:"show",rawName:"v-show",value:1==n.type,expression:"type==1"}],attrs:{span:"6"}},[n._v("\n                年度：\n                "),e("DatePicker",{staticStyle:{width:"50%"},attrs:{type:"year"},model:{value:n.value.month,callback:function(t){n.$set(n.value,"month",t)},expression:"value.month"}})],1),n._v(" "),e("Col",{directives:[{name:"show",rawName:"v-show",value:2==n.type,expression:"type==2"}],attrs:{span:"6"}},[n._v("\n                月度：\n                "),e("DatePicker",{staticStyle:{width:"50%"},attrs:{type:"month"},model:{value:n.value.month,callback:function(t){n.$set(n.value,"month",t)},expression:"value.month"}})],1),n._v(" "),e("Col",{attrs:{span:"3",offset:"9"}},[e("Button",{on:{click:function(t){n.delLogList(1)}}},[n._v("查询")])],1)],1)],1),n._v(" "),e("Table",{staticClass:"tables",attrs:{loading:n.loading,columns:n.columns,data:n.data}}),n._v(" "),e("Page",{attrs:{total:n.totalCount,"page-size":10,"show-total":"","show-elevator":"","class-name":"page",current:n.current},on:{"on-change":n.delLogList}}),n._v(" "),e("br")],1)},a=[];o._withStripped=!0;var r={render:o,staticRenderFns:a};t.default=r},707:function(n,t,e){"use strict";function o(n){d||e(2024)}Object.defineProperty(t,"__esModule",{value:!0});var a=e(1589),r=e.n(a);for(var i in a)"default"!==i&&function(n){e.d(t,n,function(){return a[n]})}(i);var l=e(2026),s=e.n(l),d=!1,p=e(13),g=o,u=p(r.a,s.a,!1,g,null,null);u.options.__file="src/views/promotion-manage/war-adviser/target-config/log/del-log-list.vue",t.default=u.exports}});