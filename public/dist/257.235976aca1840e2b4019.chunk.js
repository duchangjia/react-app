webpackJsonp([257],{1565:function(n,e,t){"use strict";function a(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(e,"__esModule",{value:!0});var o=t(65),s=a(o),r=t(239),i=a(r);e.default={name:"goodsList",data:function(){var n=this;return{columnsPupol:[{type:"selection",align:"center",width:58},{title:"序号",type:"index",width:68,align:"center"},{title:"商品编码",align:"left",width:120,key:"itemId"},{title:"商品名称",align:"left",key:"itemName"}],dataPupol:[],columnsSeeAdd:[{title:"序号",type:"index",width:68,align:"center"},{title:"商品编码",align:"left",width:120,key:"itemId"},{title:"商品名称",align:"left",key:"itemName"},{title:"操作",align:"center",width:68,key:"handle",render:function(e,t){return e("div",[e("Button",{props:{type:"error",size:"small"},on:{click:function(){n.removeGoodsList(t.row,t.index)}}},"删除")])}}],dataSeeAdd:[],pageParameter:{totalCount:0,currentPage:1,pageSize:10},goodsListSelect:[],loading:!1,inforType:"",formValidate:{storeCode:null,storeName:null,goodsCode:null,goodsName:null},query:""}},mounted:function(){this.ajaxGoodsList(1)},methods:{handleRowChange:function(n,e){this.goodsListSelect=n},removeGoodsList:function(n,e){this.dataSeeAdd.splice(e,1)},cancel:function(n){var e=this.$route.query.a;if("0"!==n){if(0===this.dataSeeAdd.length)return this.$Message.warning("至少选择一个产品"),!1;"1"===e?window.sessionStorage.setItem("brandSelectedRule",(0,s.default)(this.dataSeeAdd)):"2"===e?window.sessionStorage.setItem("brandSelectedUseRule",(0,s.default)(this.dataSeeAdd)):window.sessionStorage.setItem("removeBrand",(0,s.default)(this.dataSeeAdd))}this.$refs.selection.selectAll(!1),this.$router.back(-1),this.dataSeeAdd=[]},addTable:function(){if(0!==this.dataSeeAdd.length){var n=this.dataSeeAdd,e=this.goodsListSelect;if("3"===this.$route.query.a){for(var t=0;t<n.length;t++)for(var a=0;a<e.length;a++)if(n[t].storeCode===e[a].storeCode)return this.$Message.warning("添加失败，有已勾选重复的门店"),!1}else for(var o=0;o<n.length;o++)for(var s=0;s<e.length;s++)if(n[o].itemId===e[s].itemId)return this.$Message.warning("添加失败，有已勾选重复的商品"),!1}this.dataSeeAdd=this.goodsListSelect.concat(this.dataSeeAdd),this.$refs.selection.selectAll(!1)},ajaxGoodsList:function(n){var e=this;this.loading=!0;var t="",a=this.$route.query.a;this.query=a,this.pageParameter.currentPage=n;var o={};"3"===a?(t=this.$util.apiConfig.promotionManage.warProgramme.o2oVoucher.listSeparation,o={page:this.pageParameter.currentPage,storeCodeLike:this.formValidate.storeCode,storeNameLike:this.formValidate.storeName},this.arrayRequire(this.columnsPupol,"门店名称",1,"storeName"),this.arrayRequire(this.columnsPupol,"门店编码",2,"storeCode",120),this.arrayRequire(this.columnsSeeAdd,"门店名称",2,"storeName"),this.arrayRequire(this.columnsSeeAdd,"门店编码",3,"storeCode",120)):(t=this.$util.apiConfig.promotionManage.warProgramme.o2oVoucher.goodsListJson,o={page:this.pageParameter.currentPage,itemName:this.formValidate.goodsName,code79:this.formValidate.goodsCode},this.arrayRequire(this.columnsPupol,"商品名称",1,"itemName"),this.arrayRequire(this.columnsPupol,"79码",2,"code79",120),this.arrayRequire(this.columnsSeeAdd,"79码",3,"code79",120),this.arrayRequire(this.columnsSeeAdd,"商品名称",2,"itemName")),this.$util.ajax.post(t,i.default.stringify(o),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(n){200===n.data.code&&(e.loading=!1,e.pageParameter.totalCount=n.data.result.pager.totalCount,e.dataPupol=n.data.result.pager.records)})},arrayRequire:function(n,e,t,a,o){n.splice(n.length-t,1,{title:""+e,width:o,align:"left",key:a}),this.inforType=""+e.substr(0,2)}}}},1950:function(n,e,t){var a=t(1951);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(43)("7b7f1228",a,!1,{})},1951:function(n,e,t){e=n.exports=t(42)(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},1952:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("Card",{staticClass:"margin-top-8",attrs:{bordered:!1}},[t("p",{attrs:{slot:"title"},slot:"title"},[n._v("请选择"+n._s(n.inforType)+"信息")]),n._v(" "),t("div",[t("Form",{attrs:{action:"",model:n.formValidate,"label-position":"right","label-width":90}},[t("Row",["3"===n.query?t("div",[t("Col",{attrs:{span:8}},[t("FormItem",{staticClass:"store_right",attrs:{label:"门店编号:",prop:"storeCode"}},[t("Input",{attrs:{placeholder:"请输入门店编号"},model:{value:n.formValidate.storeCode,callback:function(e){n.$set(n.formValidate,"storeCode",e)},expression:"formValidate.storeCode"}})],1)],1),n._v(" "),t("Col",{attrs:{span:8}},[t("FormItem",{staticClass:"store_right",attrs:{label:"门店名称:",prop:"storeName"}},[t("Input",{attrs:{placeholder:"请输入门店名称"},model:{value:n.formValidate.storeName,callback:function(e){n.$set(n.formValidate,"storeName",e)},expression:"formValidate.storeName"}})],1)],1)],1):n._e(),n._v(" "),"3"!==n.query?t("div",[t("Col",{attrs:{span:8}},[t("FormItem",{staticClass:"store_right",attrs:{label:"79码:",prop:"goodsCode"}},[t("Input",{attrs:{placeholder:"请输入门店编号"},model:{value:n.formValidate.goodsCode,callback:function(e){n.$set(n.formValidate,"goodsCode",e)},expression:"formValidate.goodsCode"}})],1)],1),n._v(" "),t("Col",{attrs:{span:8}},[t("FormItem",{staticClass:"store_right",attrs:{label:"商品名称:",prop:"goodsName"}},[t("Input",{attrs:{placeholder:"请输入门店名称"},model:{value:n.formValidate.goodsName,callback:function(e){n.$set(n.formValidate,"goodsName",e)},expression:"formValidate.goodsName"}})],1)],1)],1):n._e(),n._v(" "),t("Col",{staticClass:"text_align_right",attrs:{span:8}},[t("Button",{staticClass:"search_btn",attrs:{type:"primary"},on:{click:function(e){n.ajaxGoodsList(1)}}},[n._v("搜索 ")])],1)],1)],1),n._v(" "),t("keep-alive",[t("Table",{ref:"selection",staticClass:"problem_table",attrs:{loading:n.loading,stripe:"",border:"",height:"400",columns:n.columnsPupol,data:n.dataPupol},on:{"on-select-all":n.handleRowChange,"on-select":n.handleRowChange,"on-select-cancel":n.handleRowChange}})],1),n._v(" "),t("div",[t("Row",[t("Col",{attrs:{span:12}},[t("Button",{staticClass:"margin-top-10",attrs:{type:"primary"},on:{click:n.addTable}},[n._v("添加")])],1),n._v(" "),t("Col",{attrs:{span:12}},[t("Page",{attrs:{total:n.pageParameter.totalCount,"show-total":"","show-elevator":"","class-name":"page_right"},on:{"on-change":n.ajaxGoodsList}})],1)],1)],1),n._v(" "),t("Table",{staticClass:"problem_table",attrs:{stripe:"",border:"",height:"200",columns:n.columnsSeeAdd,data:n.dataSeeAdd}}),n._v(" "),t("div",{staticClass:"add_btn text_align_center margin-top-10"},[t("Button",{on:{click:function(e){n.cancel("0")}}},[n._v("取 消")]),n._v(" "),t("Button",{attrs:{type:"primary"},on:{click:function(e){n.cancel("1")}}},[n._v("确 定")])],1)],1)])],1)},o=[];a._withStripped=!0;var s={render:a,staticRenderFns:o};e.default=s},683:function(n,e,t){"use strict";function a(n){d||t(1950)}Object.defineProperty(e,"__esModule",{value:!0});var o=t(1565),s=t.n(o);for(var r in o)"default"!==r&&function(n){t.d(e,n,function(){return o[n]})}(r);var i=t(1952),l=t.n(i),d=!1,c=t(13),u=a,m=c(s.a,l.a,!1,u,"data-v-0da85a7e",null);m.options.__file="src/views/promotion-manage/o2oVoucher/o2oReportAdd/enjoyConditions/goodsList.vue",e.default=m.exports}});