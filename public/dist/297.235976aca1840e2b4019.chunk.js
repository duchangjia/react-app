webpackJsonp([297],{1087:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(241),n=r(i),o=a(242),s=r(o),l=a(146),u=r(l),c=a(239);t.default={props:{visible:{type:Boolean,default:!1},storeCode:{type:String,default:""}},data:function(){var e=this;return{dialogVisible:!1,query:{empName:"",currentPage:1,row:10},empColumns:[{title:"选择",render:function(t,a){return t("input",{attrs:{type:"radio",checked:a.row.checked},on:{change:function(){e.handleEmpSelectChange(a.row)}}})}},{title:"工号",key:"empCode"},{title:"姓名",key:"empName"},{title:"门店数量",key:"storeCount"}],empList:[],total:0}},methods:{handleOk:function(){for(var e=void 0,t=0;t<this.empList.length;t++)this.empList[t].checked&&(e=(0,u.default)({},this.empList[t]));if(!e)return void this.$Message.error("未选择业务员");this.dialogVisible=!1,this.$emit("on-select",e),this.$emit("update:visible",!1)},handleCancel:function(){this.dialogVisible=!1,this.$emit("update:visible",!1)},reloadStoreSelect:function(){this.query={empName:"",currentPage:1,row:10},this.queryEmpList()},handleSearch:function(){this.query.currentPage=1,this.queryEmpList()},queryEmpList:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(n.default.mark(function e(){var t,a,r,i;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,u.default)({},this.query,{storeCode:this.storeCode}),delete t.row,a=this,e.prev=3,e.next=6,this.$ajax.post(a.$util.apiConfig.traderManage.flowManage.costManage.queryEmp,c.stringify(t));case 6:r=e.sent,i=r.data,200==r.status?null!=i.dto&&null!=i.page.records&&(this.empList=i.page.records.map(function(e,t){return(0,u.default)({},e,{storeCount:i.dto[t].storeCount,checked:!1})}),this.total=i.page.totalCount||0):this.$Message.error("业务员列表获取失败"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),this.$Message.error("业务员列表获取失败");case 14:case"end":return e.stop()}},e,this,[[3,11]])}));return e}(),handleEmpSelectChange:function(e){var t=this.empList.map(function(t){var a=(0,u.default)({},t);return a.empCode!=e.empCode?a.checked=!1:a.checked=!0,a});this.empList=t}},watch:{visible:function(e,t){1==e?(this.dialogVisible=!0,this.reloadStoreSelect()):this.dialogVisible=!1}}}},1405:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Modal",{attrs:{"mask-closable":!1,title:"选择业务员"},on:{"on-ok":e.handleOk,"on-cancel":e.handleCancel},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("Row",[a("span",[e._v("业务员")]),e._v(" "),a("Input",{staticStyle:{width:"150px"},attrs:{clearable:""},model:{value:e.query.empName,callback:function(t){e.$set(e.query,"empName",t)},expression:"query.empName"}}),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSearch()}}},[e._v("查询")])],1),e._v(" "),a("Row",{staticStyle:{"margin-top":"20px"}},[a("Table",{attrs:{height:"280",columns:e.empColumns,data:e.empList}})],1),e._v(" "),a("Row",[a("Page",{staticStyle:{float:"right","margin-top":"20px"},attrs:{current:e.query.currentPage,total:e.total},on:{"update:current":function(t){e.$set(e.query,"currentPage",t)},"on-change":e.queryEmpList}})],1),e._v(" "),a("div",{staticStyle:{overflow:"hidden"},attrs:{slot:"footer"},slot:"footer"},[a("span",{staticStyle:{float:"right"}},[a("Button",{attrs:{size:"large"},on:{click:function(t){e.handleCancel()}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary",size:"large"},on:{click:function(t){e.handleOk()}}},[e._v("确定")])],1)])],1)},i=[];r._withStripped=!0;var n={render:r,staticRenderFns:i};t.default=n},609:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(1087),i=a.n(r);for(var n in r)"default"!==n&&function(e){a.d(t,e,function(){return r[e]})}(n);var o=a(1405),s=a.n(o),l=a(13),u=l(i.a,s.a,!1,null,null,null);u.options.__file="src/views/my-components/modal-selector/operator-select-modal.vue",t.default=u.exports}});