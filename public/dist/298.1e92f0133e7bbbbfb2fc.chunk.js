webpackJsonp([298],{1445:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(239),s=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default={model:{prop:"visible",event:"visibleChange"},props:{visible:{type:Boolean,default:!1},warehouseOutId:{type:Number,default:0}},data:function(){return{apiGroup:this.$util.apiConfig.purchaseDelivery.allocationManage.allocationBill,loading:!1,showMe:this.visible,pager:{},query:{queryItemName:"",queryItem69:"",queryItem79:""},selGoodColumns:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"序号",type:"index",minWidth:60,fixed:"left"},{title:"商品名称",key:"spuName",minWidth:200},{title:"商品类型",key:"itemTypeName",minWidth:120},{title:"条形码",key:"code69",minWidth:120},{title:"销售编码",key:"code79",minWidth:120},{title:"转化系数",key:"changeUnitRate",minWidth:120},{title:"原价",key:"marketPrice",minWidth:120},{title:"库存",key:"inventory",minWidth:120}],selGoodEntity:[]}},created:function(){console.log("goodsSelect created")},methods:{submitAddForm:function(){var e=this.$refs.selection.getSelection();this.$emit("selectFinish",e)},submitCloseAddForm:function(){var e=this.$refs.selection.getSelection();this.$emit("selectFinish",e),this.$emit("visibleChange",!1)},searchGoods:function(){this.jumpPageHandle(1)},visibleChangeHandle:function(e){e?(this.jumpPageHandle(1),this.query.queryItemName="",this.query.queryItem69="",this.query.queryItem79=""):this.$emit("visibleChange",!1)},jumpPageHandle:function(e){var t=this;this.pager.page=e,this.loading=!0;var i={page:this.pager.page,warehouseId:this.warehouseOutId,queryItemName:this.query.queryItemName,queryItem69:this.query.queryItem69,queryItem79:this.query.queryItem79};this.$ajax.post(this.apiGroup.checkGoodUrl,s.default.stringify(i)).then(function(e){console.log("商品列表求返回数据：",e),200==e.data.code?(t.loading=!1,t.pager=e.data.result.pager,t.selGoodEntity=e.data.result.pager.records,t.selGoodEntity.forEach(function(e){1==e.spuType?e.itemTypeName="常规装":2==e.spuType?e.itemTypeName="促销装":3==e.spuType?e.itemTypeName="赠品/非单卖品":4==e.spuType?e.itemTypeName="广宣品":e.itemTypeName="-",e.changeUnitRate||(e.changeUnitRate=0),e.marketPrice||(e.marketPrice=0)})):t.$Modal.error({title:"HTTP请求错误",content:e.data.message})}).catch(function(e){console.log(e),t.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})}},watch:{visible:function(){this.showMe=this.visible}}}},1496:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{width:"1100",title:"选择商品"},on:{"on-visible-change":e.visibleChangeHandle},model:{value:e.showMe,callback:function(t){e.showMe=t},expression:"showMe"}},[i("div",[i("Row",[i("Col",{attrs:{span:"7"}},[i("span",[e._v("商品名称:")]),e._v(" "),i("Input",{staticStyle:{width:"180px"},model:{value:e.query.queryItemName,callback:function(t){e.$set(e.query,"queryItemName","string"==typeof t?t.trim():t)},expression:"query.queryItemName"}})],1),e._v(" "),i("Col",{attrs:{span:"7"}},[i("span",[e._v("条形码：")]),e._v(" "),i("Input",{staticStyle:{width:"180px"},model:{value:e.query.queryItem69,callback:function(t){e.$set(e.query,"queryItem69","string"==typeof t?t.trim():t)},expression:"query.queryItem69"}})],1),e._v(" "),i("Col",{attrs:{span:"7"}},[i("span",[e._v("销售编码:")]),e._v(" "),i("Input",{staticStyle:{width:"180px"},model:{value:e.query.queryItem79,callback:function(t){e.$set(e.query,"queryItem79","string"==typeof t?t.trim():t)},expression:"query.queryItem79"}})],1),e._v(" "),i("Col",{attrs:{span:"3"}},[i("i-button",{staticStyle:{width:"92px"},attrs:{type:"primary"},on:{click:e.searchGoods}},[e._v("搜索")])],1)],1),e._v(" "),i("br"),e._v(" "),i("Table",{ref:"selection",attrs:{stripe:"",size:"small",columns:e.selGoodColumns,data:e.selGoodEntity}}),e._v(" "),i("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",justify:"end"}},[i("page",{attrs:{current:e.pager.page,total:e.pager.totalCount,"page-size":e.pager.rows,"show-elevator":""},on:{"on-change":e.jumpPageHandle}})],1)],1),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("i-button",{staticStyle:{width:"92px"},attrs:{type:"primary"},on:{click:e.submitAddForm}},[e._v("添加")]),e._v(" "),i("i-button",{staticStyle:{width:"92px"},on:{click:e.submitCloseAddForm}},[e._v("添加并关闭")])],1),e._v(" "),e.loading?i("Spin",{attrs:{size:"large",fix:""}}):e._e()],1)},s=[];a._withStripped=!0;var o={render:a,staticRenderFns:s};t.default=o},632:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(1445),s=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);var n=i(1496),r=i.n(n),l=i(13),u=l(s.a,r.a,!1,null,null,null);u.options.__file="src/views/my-components/modal-selector/goods-select-by-warehouse-modal.vue",t.default=u.exports}});