webpackJsonp([38,213],{1621:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(909),r=n(i),a=o(152),s=n(a),l=o(102),u=n(l),c=o(239),p=(n(c),o(601)),f=n(p);e.default={name:"rebatePromotion-detail",components:{orderTable:f.default},data:function(){var t;return t={isDisable:!1,promotionInfoDTO:{beginTime:"",endTime:"",channel:"",type:"",title:""},promotionRuleDTO:{meetNum:""},promotionScopeDetailDTOList:[],loading:!1,tableRef:"",columnsList:[{title:"序号",width:70,align:"center",type:"index"},{title:"品牌",key:"brandName",align:"center"},{title:"品类",key:"cName",align:"center"},{title:"销售编码",key:"spuCode",align:"center"},{title:"条形码",key:"code69",align:"center"},{title:"商品名称",key:"itemName",align:"center"},{title:"销售价(EA)",key:"marketPrice",align:"center"},{title:"优惠价(EA)",key:"discountPrice",align:"center"},{title:"数量(EA)",key:"num",align:"center"},{title:"备注",key:"remarks",align:"center"}],thisTableData:[],tableRef1:"",columnsList1:[{title:"序号",width:70,align:"center",type:"index"},{title:"门店编码",key:"scopeCode",align:"center"},{title:"门店名称",key:"scopeName",align:"center"}],columnsListDetail:[{title:"序号",width:70,align:"center",type:"index"},{title:"门店编码",key:"scopeCode",align:"center"},{title:"门店名称",key:"scopeName",align:"center"},{title:"门店类型",key:"storeNature",align:"center"},{title:"自定义组",key:"groupName",align:"center"}],thisTableData1:[],btnShow:!0},(0,u.default)(t,"isDisable",!1),(0,u.default)(t,"storeProp",[]),(0,u.default)(t,"group",[]),t},methods:{queryData:function(){var t=this;t.isDisable=!0,this.$util.ajax({method:"get",url:t.$util.apiConfig.promotionManage.warProgramme.groupGoods.getDetailUrl+"?id="+t.$route.query.id,data:""}).then(function(e){setTimeout(function(){t.isDisable=!1},500),200==e.data.code?(t.promotionInfoDTO=e.data.result.detail,t.promotionInfoDTO.beginTime=t.timestampToTime(t.promotionInfoDTO.beginTime),t.promotionInfoDTO.endTime=t.timestampToTime(t.promotionInfoDTO.endTime),t.promotionInfoDTO.marketPrice=Number(t.promotionInfoDTO.marketPrice).toFixed(2),t.thisTableData=e.data.result.detail.groupItems,t.thisTableData1=e.data.result.detail.groupScopes,t.promotionScopeDetailDTOList=e.data.result.detail.groupScopes,3==t.promotionInfoDTO.scopeType&&(t.promotionScopeDetailDTOList.forEach(function(e){t.storeProp.push(e.scopeName),t.group.push(e.storeGroupName)}),t.group=(0,s.default)(new r.default(t.group)),t.storeProp=(0,s.default)(new r.default(t.storeProp)))):t.$Modal.error({title:"提示",content:e.data.message})}).catch(function(e){t.isDisable=!1,console.log("失败信息：",e)})},goBack:function(t){t?this.$router.push({path:"groupGoods-edit"}):this.$router.push({path:"group-goods"})},timestampToTime:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-"+(e.getDate()<10?"0"+e.getDate():e.getDate())+" "+(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+":"+(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds())},savePromotion:function(){var t=this;t.isDisable=!0,t.promotionInfoDTO.beginTime=new Date(t.promotionInfoDTO.beginTime).getTime(),t.promotionInfoDTO.endTime=new Date(t.promotionInfoDTO.endTime).getTime();var e=this.promotionInfoDTO,o=t.$util.apiConfig.promotionManage.warProgramme.groupGoods.addList;this.promotionInfoDTO.id&&(o=t.$util.apiConfig.promotionManage.warProgramme.groupGoods.editUrl),this.$util.ajax({method:"post",url:o,data:e}).then(function(e){t.isDisable=!1,"200"==e.data.code?t.$Modal.success({title:"提示",content:"发布成功",onOk:function(){t.$router.push({path:"group-goods"})}}):t.$Modal.error({title:"提示",content:e.data.message})}).catch(function(e){t.isDisable=!1,console.log(e)})}},mounted:function(){var t=this,e=window.sessionStorage.groupPromotionEditParams;e&&(e=JSON.parse(e),this.promotionInfoDTO=e,this.thisTableData=e.groupItems,this.promotionInfoDTO.marketPrice=Number(this.promotionInfoDTO.marketPrice).toFixed(2),this.thisTableData1=e.groupScopes,this.promotionScopeDetailDTOList=e.groupScopes,this.btnShow=!1,3==t.promotionInfoDTO.scopeType&&(t.promotionScopeDetailDTOList.forEach(function(e){t.storeProp.push(e.scopeName),t.group.push(e.storeGroupName)}),t.group=(0,s.default)(new r.default(t.group)),t.storeProp=(0,s.default)(new r.default(t.storeProp)))),this.$route.query.id?this.queryData():this.columnsList1=this.columnsListDetail}}},2120:function(t,e,o){var n=o(2121);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o(43)("d6e78928",n,!1,{})},2121:function(t,e,o){e=t.exports=o(42)(!1),e.push([t.i,"\n.ListName[data-v-e6f37b7c]{\n    text-align: right;\n    line-height: 46px;\n    color: #747474;\n    font-size: 12px;\n    margin-right: 16px;\n}\n.content[data-v-e6f37b7c]{\n    line-height: 46px;\n    color: #747474;\n}\n.but[data-v-e6f37b7c]{\n    text-align: center;\n    padding-bottom: 30px;\n    padding-top: 20px;\n}\n",""])},2122:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{background:"#fff",padding:"20px"}},[o("p",{staticStyle:{color:"#747474","font-weight":"bold","font-size":"larger"},attrs:{slot:"title"},slot:"title"},[t._v("\n        促销预览\n    ")]),t._v(" "),o("row",{directives:[{name:"show",rawName:"v-show",value:!!t.promotionInfoDTO.groupCode,expression:"promotionInfoDTO.groupCode? true:false"}]},[o("Col",{staticClass:"ListName",attrs:{span:"2"}},[t._v("组合销售编码:")]),t._v(" "),o("Col",{staticClass:"content",attrs:{span:"6"}},[t._v(" "+t._s(t.promotionInfoDTO.groupCode))])],1),t._v(" "),o("row",[o("Col",{staticClass:"ListName",attrs:{span:"2"}},[t._v("活动名称:")]),t._v(" "),o("Col",{staticClass:"content",attrs:{span:"6"}},[t._v(" "+t._s(t.promotionInfoDTO.groupName)+" ")])],1),t._v(" "),o("row",[o("Col",{staticClass:"ListName",attrs:{span:"2"}},[t._v("活动时间:")]),t._v(" "),o("Col",{staticClass:"content",attrs:{span:"18"}},[t._v(" "+t._s(t.promotionInfoDTO.beginTime)+" 至 "+t._s(t.promotionInfoDTO.endTime))])],1),t._v(" "),o("row",[o("Col",{staticClass:"ListName",attrs:{span:"2"}},[t._v("执行平台:")]),t._v(" "),o("Col",{staticClass:"content",attrs:{span:"6"}},[t._v(t._s(t.promotionInfoDTO.channel)+" ")])],1),t._v(" "),o("row",[o("Col",{staticClass:"ListName",attrs:{span:"2"}},[t._v("促销类型:")]),t._v(" "),o("Col",{staticClass:"content",attrs:{span:"6"}},[t._v("组合 ")])],1),t._v(" "),o("row",[o("Col",{staticClass:"ListName",attrs:{span:"2"}},[t._v("商品详细:")]),t._v(" "),o("Col",{staticClass:"content",attrs:{span:"6"}},[t._v("以下商品组合售卖：优惠价 "),o("span",{staticStyle:{color:"#333","font-weight":"bold"}},[t._v(t._s(t.promotionInfoDTO.marketPrice))])])],1),t._v(" "),o("row",{staticStyle:{"border-top":"1px solid #e5e5e5","border-bottom":"1px dashed #e5e5e5","padding-bottom":"30px"}},[o("row",{staticStyle:{padding:"20px"}},[o("order-table",{attrs:{refs:t.tableRef,columnsList:t.columnsList,thisTableData:t.thisTableData,loading:t.loading}})],1),t._v(" "),o("row",[o("Col",{staticClass:"ListName",attrs:{span:"2"}},[t._v("执行范围:")]),t._v(" "),1==t.promotionInfoDTO.scopeType?o("Col",{staticClass:"content",attrs:{span:"10"}},[t._v("全部门店")]):t._e(),t._v(" "),2==t.promotionInfoDTO.scopeType?o("Col",{staticClass:"content",attrs:{span:"10"}},[t._v("指定门店")]):t._e(),t._v(" "),3==t.promotionInfoDTO.scopeType?o("Col",{staticClass:"content",attrs:{span:"10"}},[o("div",[o("span",[t._v("门店性质:")]),t._v(" "),t._l(t.storeProp,function(e){return o("span",{staticStyle:{padding:"0 12px"}},[t._v(" \n                            "+t._s(e)+" ")])})],2),t._v(" "),o("div",[o("span",[t._v("标签分类:")]),t._v(" "),t._l(t.group,function(e){return o("span",{staticStyle:{padding:"0 12px"}},[t._v(" \n                            "+t._s(e)+" ")])})],2)]):t._e()],1),t._v(" "),2==t.promotionInfoDTO.scopeType?o("row",{staticStyle:{padding:"20px"}},[o("order-table",{attrs:{refs:t.tableRef1,columnsList:t.columnsList1,thisTableData:t.thisTableData1,loading:t.loading}})],1):t._e()],1),t._v(" "),o("row",{staticClass:"but"},[o("Button",{directives:[{name:"show",rawName:"v-show",value:t.btnShow,expression:"btnShow"}],on:{click:function(e){t.goBack()}}},[t._v("返 回")]),t._v(" "),o("Button",{directives:[{name:"show",rawName:"v-show",value:!t.btnShow,expression:"!btnShow"}],attrs:{type:"primary",disabled:t.isDisable},on:{click:function(e){t.savePromotion()}}},[t._v("确 认")]),t._v(" "),o("Button",{directives:[{name:"show",rawName:"v-show",value:!t.btnShow,expression:"!btnShow"}],staticStyle:{"margin-left":"10px"},on:{click:function(e){t.goBack(1)}}},[t._v("取 消")])],1),t._v(" "),t.isDisable?o("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},i=[];n._withStripped=!0;var r={render:n,staticRenderFns:i};e.default=r},601:function(t,e,o){"use strict";function n(t){u||o(900)}Object.defineProperty(e,"__esModule",{value:!0});var i=o(891),r=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);var s=o(902),l=o.n(s),u=!1,c=o(13),p=n,f=c(r.a,l.a,!1,p,null,null);f.options.__file="src/views/tables/components/orderTable.vue",e.default=f.exports},739:function(t,e,o){"use strict";function n(t){u||o(2120)}Object.defineProperty(e,"__esModule",{value:!0});var i=o(1621),r=o.n(i);for(var a in i)"default"!==a&&function(t){o.d(e,t,function(){return i[t]})}(a);var s=o(2122),l=o.n(s),u=!1,c=o(13),p=n,f=c(r.a,l.a,!1,p,"data-v-e6f37b7c",null);f.options.__file="src/views/promotion-manage/war-programme/group-goods/groupGoods-detail.vue",e.default=f.exports},891:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"orderTable",props:{columnsList:Array,thisTableData:Array,getHeight:Number,loading:{type:Boolean,default:!0}},data:function(){return{}},created:function(){this.init()},methods:{init:function(){var t=this;this.columnsList.forEach(function(e){"address1"==e.key&&(e.render=function(e,o){return e("Row",{props:{type:"flex",align:"middle",justify:"center"}},[e("Col",{props:{span:"22"}},o.row.name),e("Col",{props:{span:"2"}},[e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.$emit("showLayer","true")}}})])])})})},a:function(t){this.$emit("listenCheckbox",t)}},watch:{}}},897:function(t,e,o){var n=o(44);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},900:function(t,e,o){var n=o(901);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o(43)("296919d0",n,!1,{})},901:function(t,e,o){e=t.exports=o(42)(!1),e.push([t.i,"\n.show-edit-btn {\n  display: none;\n  margin-left: -10px;\n}\n.ivu-table-cell:hover .show-edit-btn {\n  display: inline-block;\n}\n",""])},902:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Table",{attrs:{height:t.getHeight,columns:t.columnsList,data:t.thisTableData,stripe:"",border:"",loading:t.loading},on:{"on-selection-change":t.a}})],1)},i=[];n._withStripped=!0;var r={render:n,staticRenderFns:i};e.default=r},909:function(t,e,o){t.exports={default:o(910),__esModule:!0}},910:function(t,e,o){o(151),o(75),o(100),o(911),o(917),o(920),o(922),t.exports=o(11).Set},911:function(t,e,o){"use strict";var n=o(912),i=o(897);t.exports=o(913)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(i(this,"Set"),t=0===t?0:t,t)}},n)},912:function(t,e,o){"use strict";var n=o(32).f,i=o(148),r=o(245),a=o(64),s=o(244),l=o(240),u=o(147),c=o(246),p=o(248),f=o(37),d=o(243).fastKey,m=o(897),v=f?"_s":"size",g=function(t,e){var o,n=d(e);if("F"!==n)return t._i[n];for(o=t._f;o;o=o.n)if(o.k==e)return o};t.exports={getConstructor:function(t,e,o,u){var c=t(function(t,n){s(t,c,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=n&&l(n,o,t[u],t)});return r(c.prototype,{clear:function(){for(var t=m(this,e),o=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete o[n.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var o=m(this,e),n=g(o,t);if(n){var i=n.n,r=n.p;delete o._i[n.i],n.r=!0,r&&(r.n=i),i&&(i.p=r),o._f==n&&(o._f=i),o._l==n&&(o._l=r),o[v]--}return!!n},forEach:function(t){m(this,e);for(var o,n=a(t,arguments.length>1?arguments[1]:void 0,3);o=o?o.n:this._f;)for(n(o.v,o.k,this);o&&o.r;)o=o.p},has:function(t){return!!g(m(this,e),t)}}),f&&n(c.prototype,"size",{get:function(){return m(this,e)[v]}}),c},def:function(t,e,o){var n,i,r=g(t,e);return r?r.v=o:(t._l=r={i:i=d(e,!0),k:e,v:o,p:n=t._l,n:void 0,r:!1},t._f||(t._f=r),n&&(n.n=r),t[v]++,"F"!==i&&(t._i[i]=r)),t},getEntry:g,setStrong:function(t,e,o){u(t,e,function(t,o){this._t=m(t,e),this._k=o,this._l=void 0},function(){for(var t=this,e=t._k,o=t._l;o&&o.r;)o=o.p;return t._t&&(t._l=o=o?o.n:t._t._f)?"keys"==e?c(0,o.k):"values"==e?c(0,o.v):c(0,[o.k,o.v]):(t._t=void 0,c(1))},o?"entries":"values",!o,!0),p(e)}}},913:function(t,e,o){"use strict";var n=o(12),i=o(36),r=o(243),a=o(66),s=o(45),l=o(245),u=o(240),c=o(244),p=o(44),f=o(77),d=o(32).f,m=o(914)(0),v=o(37);t.exports=function(t,e,o,g,h,_){var T=n[t],b=T,y=h?"set":"add",D=b&&b.prototype,w={};return v&&"function"==typeof b&&(_||D.forEach&&!a(function(){(new b).entries().next()}))?(b=e(function(e,o){c(e,b,t,"_c"),e._c=new T,void 0!=o&&u(o,h,e[y],e)}),m("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in D&&(!_||"clear"!=t)&&s(b.prototype,t,function(o,n){if(c(this,b,t),!e&&_&&!p(o))return"get"==t&&void 0;var i=this._c[t](0===o?0:o,n);return e?this:i})}),_||d(b.prototype,"size",{get:function(){return this._c.size}})):(b=g.getConstructor(e,t,h,y),l(b.prototype,o),r.NEED=!0),f(b,t),w[t]=b,i(i.G+i.W+i.F,w),_||g.setStrong(b,t,h),b}},914:function(t,e,o){var n=o(64),i=o(149),r=o(98),a=o(99),s=o(915);t.exports=function(t,e){var o=1==t,l=2==t,u=3==t,c=4==t,p=6==t,f=5==t||p,d=e||s;return function(e,s,m){for(var v,g,h=r(e),_=i(h),T=n(s,m,3),b=a(_.length),y=0,D=o?d(e,b):l?d(e,0):void 0;b>y;y++)if((f||y in _)&&(v=_[y],g=T(v,y,h),t))if(o)D[y]=g;else if(g)switch(t){case 3:return!0;case 5:return v;case 6:return y;case 2:D.push(v)}else if(c)return!1;return p?-1:u||c?c:D}}},915:function(t,e,o){var n=o(916);t.exports=function(t,e){return new(n(t))(e)}},916:function(t,e,o){var n=o(44),i=o(247),r=o(14)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),n(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},917:function(t,e,o){var n=o(36);n(n.P+n.R,"Set",{toJSON:o(918)("Set")})},918:function(t,e,o){var n=o(150),i=o(919);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},919:function(t,e,o){var n=o(240);t.exports=function(t,e){var o=[];return n(t,!1,o.push,o,e),o}},920:function(t,e,o){o(921)("Set")},921:function(t,e,o){"use strict";var n=o(36);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},922:function(t,e,o){o(923)("Set")},923:function(t,e,o){"use strict";var n=o(36),i=o(76),r=o(64),a=o(240);t.exports=function(t){n(n.S,t,{from:function(t){var e,o,n,s,l=arguments[1];return i(this),e=void 0!==l,e&&i(l),void 0==t?new this:(o=[],e?(n=0,s=r(l,arguments[2],2),a(t,!1,function(t){o.push(s(t,n++))})):a(t,!1,o.push,o),new this(o))}})}}});