webpackJsonp([61,176,204,213],{1110:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(239),a=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default={props:{visible:{default:!1,type:Boolean},orderId:{default:"2018092000007423",type:[String,Number]},orderDetail:{default:function(){return{}},type:Object}},data:function(){return{modalVisible:!1,orderMain:{},orderItems:[],warehouseList:[],outWarehouse:"",submiting:!1,toggleRender:!1}},mounted:function(){this.modalVisible=this.visible},methods:{outWarehouseChangeHandle:function(e){var t=this;if(""!=e){var r={};r.warehouseCode=e,r.materialCode79List=[],this.orderItems.forEach(function(e){r.materialCode79List.push(e.item79)}),this.$util.ajax.post("/omsCenter/logicStock/toWarehouseCode",r).then(function(e){if(console.log("仓库商品存量:",e),e.data.result){var r=e.data.result;t.orderItems.forEach(function(e){e.notEnoughStore=!0,e.sendCarNum=0,e.sendEaNum=0,r.forEach(function(t){e.item79==t.materialCode79&&(Number(e.needSendTotal)<=Number(t.totalNum)?(e.notEnoughStore=!1,e.sendCarNum=e.needSendCar,e.sendEaNum=e.needSendEa,t.totalNum-=e.needSendTotal):(e.sendCarNum=parseInt(Number(t.totalNum)/Number(e.packageNum)),e.sendCarNum<=0&&(e.sendCarNum=0),e.sendEaNum=Number(t.totalNum)%Number(e.packageNum),e.sendEaNum<=0&&(e.sendEaNum=0),t.totalNum=0))}),0==e.needSendTotal&&(e.notEnoughStore=!1)})}else t.orderItems.forEach(function(e){e.notEnoughStore=!0,e.sendCarNum=0,e.sendEaNum=0,0==e.needSendTotal&&(e.notEnoughStore=!1)});t.toggleRender=!t.toggleRender})}},cancel:function(){this.$emit("update:visible",!1)},submit:function(){var e=this,t=1;if(this.$store.state.app.statusInfo.promotionMode?t=this.$store.state.app.statusInfo.promotionMode:localStorage.promotionMode&&(t=localStorage.promotionMode),1==t){if(""==this.outWarehouse||void 0==this.outWarehouse||null==this.outWarehouse)return void this.$Modal.error({title:"请选择出库仓库",content:"出库仓库不存在"});var r={};r.orderId=this.orderId,r.warehouseCode=this.outWarehouse,r.orderState=this.orderMain.orderStatus,r.list=[];var n=!1,a=0;if(this.orderItems.forEach(function(e){var t=Number(e.sendCarNum)*Number(e.packageNum)+Number(e.sendEaNum);return t>Number(e.needSendTotal)?void(n=!0):(""===e.sendCarNum&&(e.sendCarNum=0),""===e.sendEaNum&&(e.sendEaNum=0),e.sendCarNum<=0&&e.sendEaNum<=0?void a++:void r.list.push({entryNo:e.id,code79:e.item79,carNum:e.needSendCar,eaNum:e.needSendEa,sendCarNum:e.sendCarNum,sendEaNum:e.sendEaNum,transformRule:e.packageNum,num:t}))}),n)return void this.$Modal.error({title:"出库数量填写错误",content:"填写的出库数量不能大于应发数"});if(a==this.orderItems.length)return void this.$Modal.error({title:"出库数量填写错误",content:"所有商品的出库数量不能全为0"});console.log("出库发送参数：",r),this.submiting=!0,this.$util.ajax.post("/trade/order/tcc/outToOrder",r).then(function(t){e.submiting=!1,console.log("出库返回结果",t),200==t.data.code?e.$Modal.success({title:"操作成功",content:t.data.message,onOk:function(){e.$emit("successCallback"),e.cancel()}}):e.$Modal.error({title:"操作失败",content:t.data.message})}).catch(function(t){console.error(t),e.$Modal.error({title:"http请求失败",content:"出库请求失败"})})}else 2==t&&(this.submiting=!0,this.$util.ajax.post("/trade/order/tcc/outToOrderV2",{orderId:this.orderId}).then(function(t){e.submiting=!1,console.log("出库返回结果",t),200==t.data.code?e.$Modal.success({title:"操作成功",content:t.data.message,onOk:function(){e.$emit("successCallback"),e.cancel()}}):e.$Modal.error({title:"操作失败",content:t.data.message})}).catch(function(t){e.$Modal.error({title:"http请求失败",content:"出库请求失败"})}))},formatNum:function(e){e.target.value=e.target.value.replace(/[^\d]/g,"")}},watch:{visible:function(e){var t=this;1==e?(this.outWarehouse="",this.warehouseList=this.$store.state.app.statusInfo.ware,this.$util.ajax.post("/trade/order/getDetail/json",a.default.stringify({orderId:this.orderId})).then(function(r){if(console.log("订单详情数据：",r),200==r.status){t.modalVisible=e,t.orderMain=r.data.result.tradeOrder.orderMain,t.orderItems=r.data.result.tradeOrder.orderItems;for(var n=0;n<t.orderItems.length;n++)t.orderItems[n].itemName+=" * "+t.orderItems[n].packageNum,t.orderItems[n].auditEaNum=t.orderItems[n].auditEaNum?Number(t.orderItems[n].auditEaNum):0,t.orderItems[n].outEaNum=t.orderItems[n].outEaNum?Number(t.orderItems[n].outEaNum):0,t.orderItems[n].auditEaNum>t.orderItems[n].outEaNum?(t.orderItems[n].needSendTotal=t.orderItems[n].auditEaNum-t.orderItems[n].outEaNum,t.orderItems[n].needSendCar=parseInt(t.orderItems[n].needSendTotal/t.orderItems[n].packageNum),t.orderItems[n].needSendEa=t.orderItems[n].needSendTotal%t.orderItems[n].packageNum,t.orderItems[n].sendCarNum=0,t.orderItems[n].sendEaNum=0,t.orderItems[n].notEnoughStore=!0):(t.orderItems[n].needSendTotal=0,t.orderItems[n].needSendCar=0,t.orderItems[n].needSendEa=0,t.orderItems[n].sendCarNum=0,t.orderItems[n].sendEaNum=0,t.orderItems[n].notEnoughStore=!1)}else t.$Modal.error({title:"HTTP请求错误",content:r.statusText})}).catch(function(e){console.log(e),t.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})):this.modalVisible=e}}}},1111:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(239),a=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(898);t.default={props:{visible:{default:!1,type:Boolean},orderId:{default:"2018092000007423",type:[String,Number]},orderDetail:{default:function(){return{}},type:Object}},data:function(){return{modalVisible:!1,remark:"",signTime:"",isCreateReceipt:!1,orderItems:[],orderMain:{},submiting:!1,voucherInfo:""}},mounted:function(){this.modalVisible=this.visible},methods:{cancel:function(){this.$emit("update:visible",!1)},submit:function(){var e=this;if(""==this.signTime)return void this.$Modal.error({title:"签收信息有误",content:"签收时间不能为空"});var t={};t.orderId=this.orderId,t.storeCode=this.orderMain.storeCode,t.receiptBy=this.orderMain.receiverName,t.receiptTime=this.signTime,t.receiptNote=this.remark,t.orderReceiptProductDTOList=[],t.isCreateReceipt=this.isCreateReceipt?1:0;var r=!1,n=0;if(this.orderItems.forEach(function(e){var a=Number(e.signCar)*Number(e.packageNum)+Number(e.signEa);if(a>Number(e.outEaNum))return void(r=!0);""===e.signCar&&(e.signCar=0),""===e.signEa&&(e.signEa=0),0==e.signCar&&0==e.signEa&&n++,t.orderReceiptProductDTOList.push({originalEntryNo:e.id,code79:e.item79,transformRule:e.packageNum,carNum:e.chuKuCar,eaNum:e.chuKuEA,deliveryByEa:e.outEaNum,receiptCarNum:e.signCar,receiptEaNum:e.signEa,totalNum:a,itemType:e.itemType})}),r)return void this.$Modal.error({title:"签收数量填写错误",content:"填写的签收数量不能大于发货数"});if(n==this.orderItems.length)return void this.$Modal.error({title:"签收数量填写错误",content:"所有商品的签收数量不能全为0"});var a=1;this.$store.state.app.statusInfo.promotionMode?a=this.$store.state.app.statusInfo.promotionMode:localStorage.promotionMode&&(a=localStorage.promotionMode);var o="/trade/order/updateOrderReceiptDTOSignIn";2==a&&(o="/trade/order/updateOrderReceiptDTOSignInV2"),console.log("签收发送数据：",t),this.submiting=!0,this.$util.ajax.post(o,t).then(function(t){e.submiting=!1,t.data.success?e.$Modal.success({title:"操作成功",content:t.data.message,onOk:function(){e.$emit("successCallback"),e.cancel()}}):e.$Modal.error({title:"操作失败",content:t.data.message})}).catch(function(t){e.submiting=!1,e.$Modal.error({title:"http请求失败",content:"签收请求失败"})})},signTimeChangeHandle:function(e){this.signTime=e},formatNum:function(e){event.target.value=event.target.value.replace(/[^\d]/g,"")}},watch:{visible:function(e){var t=this;1==e?(this.voucherInfo="",this.$util.ajax.post("/trade/order/getDetail/json",a.default.stringify({orderId:this.orderId})).then(function(r){if(console.log("订单详情数据：",r),200==r.status){t.modalVisible=e;var n=(new Date).getTime();t.signTime=(0,o.timestampToDay)(n,"yyyy-MM-dd hh:mm:ss"),t.orderMain=r.data.result.tradeOrder.orderMain,t.orderItems=r.data.result.tradeOrder.orderItems;for(var a=0;a<t.orderItems.length;a++)t.orderItems[a].itemName+=" * "+t.orderItems[a].packageNum,t.orderItems[a].outEaNum=t.orderItems[a].outEaNum?Number(t.orderItems[a].outEaNum):0,0!=t.orderItems[a].outEaNum?(t.orderItems[a].chuKuCar=Math.floor(t.orderItems[a].outEaNum/t.orderItems[a].packageNum),t.orderItems[a].chuKuEA=t.orderItems[a].outEaNum%t.orderItems[a].packageNum,t.orderItems[a].signCar=t.orderItems[a].chuKuCar,t.orderItems[a].signEa=t.orderItems[a].chuKuEA):(t.orderItems[a].chuKuEA=0,t.orderItems[a].chuKuCar=0,t.orderItems[a].signEaNum=0,t.orderItems[a].signCar=0,t.orderItems[a].signEa=0);var i=1;if(t.$store.state.app.statusInfo.promotionMode?i=t.$store.state.app.statusInfo.promotionMode:localStorage.promotionMode&&(i=localStorage.promotionMode),"O2O"==t.orderMain.tradeSourcePlatform&&2==i){var s={};s.orderMain={orderCode:t.orderMain.sourceOrderNo,orderPlatform:t.orderMain.tradeSourcePlatform,salesmanCode:t.orderMain.createPerson,storeCode:t.orderMain.storeCode,totalAmount:t.orderMain.itemToalAmount},s.orderItemList=[],t.orderItems.forEach(function(e){s.orderItemList.push({code79:e.code79,itemCnt:e.auditEaNum,itemUnit:0})}),t.$util.ajax.post("/trade/order/previewRealTimeIssueVoucher",s).then(function(e){if(200==e.data.code){var r=e.data.result.result.rows;if(r instanceof Array&&r.length>0){var n="";r.forEach(function(e){n+="【"+e.voucherTypeName+"】,【"+e.voucherPrice+"元】|"}),n=n.replace(/\|*$/g,""),t.voucherInfo="签收后，将发放如下代金券："+n+"（最终发券以实际发放为准）"}}})}}else t.$Modal.error({title:"HTTP请求错误",content:r.statusText})}).catch(function(e){console.log(e),t.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})):this.modalVisible=e}}}},1424:function(e,t,r){var n=r(1425);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(43)("3ebb759f",n,!1,{})},1425:function(e,t,r){t=e.exports=r(42)(!1),t.push([e.i,"\n.red[data-v-0b21ec50] {\n  color: red;\n}\n.custom-table[data-v-0b21ec50] {\n  width: 100%;\n  text-align: center;\n  line-height: 48px;\n  border: 1px solid #ddd;\n}\n.custom-table th[data-v-0b21ec50] {\n  color: #666;\n  background-color: #eee;\n  font-weight: normal;\n  font-size: 14px;\n  line-height: 30px;\n}\n.custom-table tr th[data-v-0b21ec50],\n.custom-table tr td[data-v-0b21ec50] {\n  border-right: 1px solid #ddd;\n  border-bottom: 1px solid #ddd;\n  box-sizing: border-box;\n  padding: 5px;\n}\n.custom-table tr td[data-v-0b21ec50] {\n  line-height: 30px;\n  font-size: 12px;\n}\n.custom-table tbody tr[data-v-0b21ec50]:nth-of-type(2n) {\n  background: #f5f5f5;\n}\n.custom-table tbody tr:last-of-type td[data-v-0b21ec50] {\n  border-bottom: none;\n}\n.base[data-v-0b21ec50] {\n  border: 1px solid #aaa;\n  margin-bottom: 20px;\n}\n.base-row[data-v-0b21ec50] {\n  border-bottom: 1px solid #aaa;\n}\n.base-row[data-v-0b21ec50]:last-of-type {\n  border-bottom: 0;\n}\n.base-row > div[data-v-0b21ec50] {\n  line-height: 36px;\n}\n.base-row > div.label[data-v-0b21ec50] {\n  background: #eee;\n  text-align: right;\n  padding-right: 20px;\n}\n.base-row > div.content[data-v-0b21ec50] {\n  border-left: 1px solid #aaa;\n  padding: 0 20px;\n}\n.tipsFont[data-v-0b21ec50] {\n  font-family: 'Microsoft YaHei Bold', 'Microsoft YaHei';\n  font-weight: 700;\n  font-style: normal;\n  font-size: 18px;\n  color: #666666;\n  line-height: 200px;\n  text-align: center;\n  height: 200px;\n}\n",""])},1426:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{attrs:{title:"订单出库",width:"550"},on:{"on-cancel":e.cancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[2!=e.$store.state.app.statusInfo.promotionMode?r("div",[r("div",{staticClass:"base"},[r("Row",{staticClass:"base-row"},[r("Col",{staticClass:"label",attrs:{span:"8"}},[e._v("出库仓库")]),e._v(" "),r("Col",{staticClass:"content",attrs:{span:"16"}},[r("Select",{on:{"on-change":e.outWarehouseChangeHandle},model:{value:e.outWarehouse,callback:function(t){e.outWarehouse=t},expression:"outWarehouse"}},e._l(e.warehouseList,function(t){return r("Option",{key:t.id,attrs:{value:t.warehouseCode}},[e._v(e._s(t.warehouseName))])}))],1)],1),e._v(" "),r("Row",{staticClass:"base-row"},[r("Col",{staticClass:"label",attrs:{span:"8"}},[e._v("门店名称")]),e._v(" "),r("Col",{staticClass:"content",attrs:{span:"16"}},[e._v(e._s(e.orderMain.storeName))])],1),e._v(" "),r("Row",{staticClass:"base-row"},[r("Col",{staticClass:"label",attrs:{span:"8"}},[e._v("所在区域")]),e._v(" "),r("Col",{staticClass:"content",attrs:{span:"16"}},[e._v(e._s(e.orderMain.provinceName)+e._s(e.orderMain.cityName)+e._s(e.orderMain.areaName))])],1),e._v(" "),r("Row",{staticClass:"base-row"},[r("Col",{staticClass:"label",attrs:{span:"8"}},[e._v("详细地址")]),e._v(" "),r("Col",{staticClass:"content",attrs:{span:"16"}},[r("p",{staticStyle:{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis",width:"320px"}},[e._v(e._s(e.orderMain.detailAddress))])])],1),e._v(" "),r("Row",{staticClass:"base-row"},[r("Col",{staticClass:"label",attrs:{span:"8"}},[e._v("联系电话")]),e._v(" "),r("Col",{staticClass:"content",attrs:{span:"16"}},[e._v(e._s(e.orderMain.receiverMobile))])],1)],1),e._v(" "),r("div",{staticClass:"table"},[r("table",{staticClass:"custom-table",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[r("colgroup",[r("col",{attrs:{width:"200"}})]),e._v(" "),r("thead",[r("tr",[r("th",{staticStyle:{width:"300px"}},[e._v("商品名称")]),e._v(" "),r("th",[r("span",[e._v("应发数")]),e._v(" "),r("span",[e._v("CAR/EA")])]),e._v(" "),r("th",[r("span",[e._v("实发数")]),e._v(" "),r("span",[e._v("CAR/EA")])])])]),e._v(" "),r("tbody",e._l(e.orderItems,function(t){return t.needSendTotal>0?r("tr",{key:t.id,class:e.toggleRender},[r("td",[e._v(e._s(t.itemName))]),e._v(" "),r("td",{class:{red:t.notEnoughStore}},[e._v(e._s(t.needSendCar||0)+"/"+e._s(t.needSendEa||0))]),e._v(" "),r("td",{staticStyle:{width:"150px"}},[r("Row",{attrs:{gutter:5}},[r("Col",{attrs:{span:"12"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.sendCarNum,expression:"item.sendCarNum"}],staticClass:"ivu-input",attrs:{disabled:t.auditEaNum<=t.outEaNum,placeholder:"CAR"},domProps:{value:t.sendCarNum},on:{input:[function(r){r.target.composing||e.$set(t,"sendCarNum",r.target.value)},e.formatNum]}})]),e._v(" "),r("Col",{attrs:{span:"12"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.sendEaNum,expression:"item.sendEaNum"}],staticClass:"ivu-input",attrs:{disabled:t.auditEaNum<=t.outEaNum,placeholder:"EA"},domProps:{value:t.sendEaNum},on:{input:[function(r){r.target.composing||e.$set(t,"sendEaNum",r.target.value)},e.formatNum]}})])],1)],1)]):e._e()}))])])]):e._e(),e._v(" "),2==e.$store.state.app.statusInfo.promotionMode?r("div",{staticClass:"tipsFont"},[r("span",[e._v("此订单即将出库，确认吗？")])]):e._e(),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{on:{click:e.cancel}},[e._v("取消")]),e._v(" "),r("Button",{attrs:{loading:e.submiting,type:"primary"},on:{click:e.submit}},[e._v("确认")])],1)])},a=[];n._withStripped=!0;var o={render:n,staticRenderFns:a};t.default=o},1427:function(e,t,r){var n=r(1428);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(43)("eb351b5c",n,!1,{})},1428:function(e,t,r){t=e.exports=r(42)(!1),t.push([e.i,"\n.row .grid[data-v-47bc7625]{\r\n    height: 50px;\r\n    border-top: 1px #e5e5e5 solid;\r\n    border-left: 1px #e5e5e5 solid;\r\n    line-height: 50px;\r\n    padding:0 10px;\n}\n.row .grid[data-v-47bc7625]:last-child{\r\n    border-right: 1px #e5e5e5 solid;\n}\n.row .grid[data-v-47bc7625]:nth-child(odd){\r\n    background-color: #eee;\r\n    text-align: right;\n}\n.last-row .grid[data-v-47bc7625]{\r\n    border-bottom: 1px #e5e5e5 solid;\n}\n.goods-table[data-v-47bc7625],\r\n.goods-table th[data-v-47bc7625], \r\n.goods-table td[data-v-47bc7625] {\r\n    border: 1px #e5e5e5 solid;\r\n    padding: 5px;\n}\n.goods-table td + td[data-v-47bc7625]{\r\n    text-align: center;\n}\n.goods-table th[data-v-47bc7625] {\r\n    background-color: #eee;\n}\n.itemContenter[data-v-47bc7625]{\r\n    overflow: hidden;\r\n    white-space: nowrap;\r\n    text-overflow: ellipsis;\r\n    width: 155px;\n}\n.goods-quantity-input *[data-v-47bc7625]{\r\n    display: inline-block;\r\n    width: 50px;\n}\r\n\r\n\r\n\r\n",""])},1429:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("modal",{attrs:{width:"600",title:"订单签收"},on:{"on-cancel":e.cancel},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[r("div",[r("Row",{staticClass:"row"},[r("Col",{staticClass:"grid",attrs:{span:"4"}},[r("span",[e._v("订单单号")])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"8"}},[r("span",[e._v(e._s(e.orderMain.orderNo))])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"4"}},[r("span",[e._v("门店名称")])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"8"}},[r("p",[e._v(e._s(e.orderMain.storeName))])])],1),e._v(" "),r("Row",{staticClass:"row"},[r("Col",{staticClass:"grid",attrs:{span:"4"}},[r("span",[e._v("所在区域")])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"8"}},[r("p",{staticClass:"itemContenter"},[e._v(e._s(e.orderMain.provinceName)+e._s(e.orderMain.cityName)+e._s(e.orderMain.areaName))])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"4"}},[r("span",[e._v("详细地址")])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"8"}},[r("p",{staticClass:"itemContenter"},[e._v(e._s(e.orderMain.detailAddress))])])],1),e._v(" "),r("Row",{staticClass:"row"},[r("Col",{staticClass:"grid",attrs:{span:"4"}},[r("span",[e._v("联系电话")])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"8"}},[r("span",[e._v(e._s(e.orderMain.receiverMobile))])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"4"}},[r("span",[e._v("签收人")])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"8"}},[r("Input",{attrs:{type:"text",placeholder:"请输入签收人",maxlength:100},model:{value:e.orderMain.receiverName,callback:function(t){e.$set(e.orderMain,"receiverName","string"==typeof t?t.trim():t)},expression:"orderMain.receiverName"}})],1)],1),e._v(" "),r("Row",{staticClass:"row"},[r("Col",{staticClass:"grid",attrs:{span:"4"}},[r("span",[e._v("签收时间")])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"8"}},[r("date-picker",{attrs:{value:e.signTime,format:"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"请选择时间"},on:{"on-change":e.signTimeChangeHandle}})],1),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"4"}},[r("span",[e._v("是现金单")])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"8"}},[r("Checkbox",{model:{value:e.isCreateReceipt,callback:function(t){e.isCreateReceipt=t},expression:"isCreateReceipt"}})],1)],1),e._v(" "),r("Row",{staticClass:"row last-row"},[r("Col",{staticClass:"grid",attrs:{span:"4"}},[r("span",[e._v("签收备注")])]),e._v(" "),r("Col",{staticClass:"grid",attrs:{span:"20"}},[r("Input",{attrs:{type:"text",placeholder:"请输入签收备注",maxlength:200},model:{value:e.remark,callback:function(t){e.remark="string"==typeof t?t.trim():t},expression:"remark"}})],1)],1),e._v(" "),r("br"),e._v(" "),r("Row",[e._v("\n            商品明细\n        ")]),e._v(" "),r("br"),e._v(" "),r("table",{staticClass:"goods-table",staticStyle:{width:"100%","border-collapse":"collapse"}},[r("thead",[r("tr",[r("th",{staticStyle:{width:"360px"}},[e._v("\n                        商品名称\n                    ")]),e._v(" "),r("th",[r("div",[e._v("发货数")]),e._v(" "),r("div",[e._v("CAR/EA")])]),e._v(" "),r("th",[r("div",[e._v("签收数")]),e._v(" "),r("div",[e._v("CAR/EA")])])])]),e._v(" "),r("tbody",e._l(e.orderItems,function(t){return 0!=t.outEaNum?r("tr",{key:t.id},[r("td",[e._v(e._s(t.itemName))]),e._v(" "),r("td",[e._v(e._s(t.chuKuCar||0)+"/"+e._s(t.chuKuEA||0))]),e._v(" "),r("td",{staticClass:"goods-quantity-input"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.signCar,expression:"item.signCar"}],staticClass:"ivu-input",attrs:{type:"text",placeholder:"CAR"},domProps:{value:t.signCar},on:{input:[function(r){r.target.composing||e.$set(t,"signCar",r.target.value)},e.formatNum]}}),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.signEa,expression:"item.signEa"}],staticClass:"ivu-input",attrs:{type:"text",placeholder:"EA"},domProps:{value:t.signEa},on:{input:[function(r){r.target.composing||e.$set(t,"signEa",r.target.value)},e.formatNum]}})])]):e._e()}))]),e._v(" "),r("br"),e._v(" "),e.voucherInfo?r("p",[e._v(e._s(e.voucherInfo))]):e._e()],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("i-button",{staticStyle:{width:"92px"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),r("i-button",{staticStyle:{width:"92px"},attrs:{loading:e.submiting,type:"primary"},on:{click:e.submit}},[e._v("确认")])],1)])},a=[];n._withStripped=!0;var o={render:n,staticRenderFns:a};t.default=o},1765:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(65),o=n(a),i=r(239),s=n(i),d=r(898),l=r(601),u=n(l),c=r(615),p=n(c),m=r(616),h=n(m);t.default={name:"orderList",components:{orderTable:u.default,orderOutbound:p.default,orderSign:h.default},data:function(){var e=this,t=this;return{modalSource:"",topSreach:!1,outboundModalVisible:!1,orderSignModalVisible:!1,lockOrderId:"",orderTemplate:!1,orderTemplateCollect:!1,query:{createPersonName:"",orderBeginTime:"",orderEndTime:"",orderId:"",orderStatus:"",remark:"",sourceChannel:"",sourceOrderNo:"",storeName:"",page:1,totalCount:0,keyword:"",rows:10},moreThanStartDate:{disabledDate:function(e){return e&&e.valueOf()<t.query.orderBeginTime}},value14:"",modalCancel:!1,delLoading:!0,cancelOrderText:"",stateListArray:{0:"",1:"待审核",2:"待发货",5:"待收货",6:"已取消",7:"已完成",8:"已关闭"},sourceListArray:[{code:1,name:"手工做单预订单"}],stateList:[{value:"",label:"全部"},{value:"1",label:"待审核"},{value:"2",label:"待发货"},{value:"5",label:"待收货"},{value:"6",label:"已取消"},{value:"7",label:"已完成"},{value:"8",label:"已关闭"}],stateModel:"",model1:"",sourceList:[{value:"",label:"全部"},{value:"1",label:"手工做单"},{value:"2",label:"SFA"},{value:"3",label:"O2O"},{value:"4",label:"车销订单"},{value:"5",label:"代配送订单"}],model2:"",sourceModel:"",tableRef:"tableOrder",modal1:!1,loading:!0,columnsListSlide:[],columnsList:[{type:"selection",width:60,align:"center",fixed:"left"},{title:"订单编号",align:"center",key:"orderNo",width:155,render:function(t,r){return t("a",{props:{size:"small"},style:{margin:"5px"},on:{click:function(){e.openDetail(r.row.orderNo)}}},r.row.orderNo)}},{title:"创建时间",align:"center",key:"orderTime",width:160},{title:"订单类型",align:"center",key:"sourceChannel"},{title:"订单金额",align:"center",key:"shouldPayAmount",render:function(e,t){return e("div",t.row.shouldPayAmount?Number(t.row.shouldPayAmount).toFixed(2):"0.00")}},{title:"门店名称",align:"center",key:"storeName"},{title:"订单来源",align:"center",key:"tradeSourcePlatform"},{title:"业务员",align:"center",key:"createPersonName",width:100},{title:"操作",key:"action",width:170,align:"center",fixed:"right",render:function(t,r){var n=[t("Button",{props:{size:"small"},style:{margin:"4px"},on:{click:function(){e.openDetail(r.row.orderNo)}}},"查看")],a={};if(1==r.row.orderStatus){a={props:{width:"120"}};var i="";r.row.tradeSourcePlatform&&null!==r.row.tradeSourcePlatform&&(i=r.row.tradeSourcePlatform.toLowerCase()),"o2o"!==i&&n.push(t("Button",{props:{size:"small"},style:{margin:"4px"},on:{click:function(){window.open(window.location.href.replace(e.$route.fullPath,"/order/all-order/order-list/order-detail-new?orderId="+r.row.orderId),"_blank")}}},"修改")),n.push(t("Button",{props:{size:"small"},style:{margin:"4px"},on:{click:function(){e.openAudit(r.row.orderNo,r.row.sourceChannel)}}},"审核"))}else 2==r.row.orderStatus?n.push(t("Button",{props:{size:"small"},style:{margin:"4px"},on:{click:function(){e.outboundModalVisible=!0,e.lockOrderId=r.row.orderId}}},"出库")):5!=r.row.orderStatus&&9!=r.row.orderStatus||(n.push(t("Button",{props:{size:"small"},style:{margin:"4px"},on:{click:function(){e.orderSignModalVisible=!0,e.lockOrderId=r.row.orderId}}},"签收")),9!=r.row.orderStatus&&n.push(t("Button",{props:{size:"small"},style:{margin:"4px"},on:{click:function(){e.outboundModalVisible=!0,e.lockOrderId=r.row.orderId}}},"出库")));var s="未打印";return r.row.alPrintNum&&null!==r.row.alPrintNum&&(s="已打印("+r.row.alPrintNum+")"),n.push(t("Button",{props:{size:"small"},style:{margin:"4px"},on:{click:function(t){if(!1===e.orderTemplate)return e.$Message.warning("请先设置打印模板");if(!1===e.orderTemplateCollect)return e.$Message.warning("请先设置打印模板");sessionStorage.printOrder=(0,o.default)({printType:1,orderIds:[r.row.orderNo]});var n=window.location.href.replace(e.$route.fullPath,"/print-preview");window.open(n,"_blank")}}},s)),t("div",a,n)}}],columnsList1:[{title:"序号",width:62,type:"index",align:"center",fixed:"left"},{title:"订单号",key:"order_id",align:"center",width:200},{title:"创建时间",key:"createTime",align:"center",width:160,render:function(t,r){return t("div",r.row.createTime?e.formatDate(r.row.createTime):"")}},{title:"条形码",key:"item69",align:"center",width:100},{title:"商品名称",key:"itemName",align:"center"},{title:"CAR数量",key:"carNum",align:"center",width:100},{title:"EA数量",key:"eaNum",align:"center",width:100},{title:"金额",key:"payPriceTotal",align:"center",width:100,render:function(e,t){return e("div",t.row.payPriceTotal?Number(t.row.payPriceTotal).toFixed(2):"0.00")}},{title:"操作",key:"action",width:100,align:"center",fixed:"right",render:function(t,r){return t("div",{props:{width:"100px"}},[t("Button",{props:{size:"small"},style:{margin:"5px"},on:{click:function(){e.openDetail(r.row.order_id)}}},"查看")])}}],thisTableData:[],state:"total",checkboxData:[],orderStatus:[{id:"1",name:"待审核",num:"0"},{id:"2",name:"待发货",num:"0"},{id:"5",name:"待收货",num:"0"},{id:"7",name:"已签收",num:"0"},{id:"8",name:"已关闭",num:"0"},{id:"total",name:"全部",num:"0"}]}},methods:{checkPreviewTemplate:function(){var e=this,t={page:1,rows:10,order:"status desc, create_date desc"};e.$util.ajax({method:"post",url:e.$util.apiConfig.traderManage.productManage.printTemplateListUrl,data:t}).then(function(t){200===t.data.code?(e.totalCount=t.data.result.totalCount,t.data.result.records.forEach(function(t){1===t.printType&&1===t.status&&(e.orderTemplate=!0),2===t.printType&&1===t.status&&(e.orderTemplateCollect=!0)})):console.log("失败信息：",t)}).catch(function(e){console.log("失败信息：",e)})},checkPreview:function(){var e=this;return 0===e.checkboxData.length?void e.$Message.warning("请先选择打印数据"):!1===e.orderTemplate?void e.$Message.warning("请先设置打印模板"):!1===e.orderTemplateCollect?void e.$Message.warning("请先设置打印模板"):void 0},collectPreview:function(){var e=this,t=null,r=[];if(e.checkboxData.length>0){if(!1===e.orderTemplate)return;if(!1===e.orderTemplateCollect)return;e.checkboxData.forEach(function(e){r.push(e.orderNo)}),t={printType:2,orderIds:r.join()},t.printType=2,t.orderIds=r,sessionStorage.setItem("printOrder",(0,o.default)(t));var n=window.location.href,a=n.split("#");document.getElementById("collect-print-id").setAttribute("href",a[0]+"#/print-preview"),document.getElementById("collect-print-id").setAttribute("target","_blank")}else document.getElementById("collect-print-id").removeAttribute("href"),document.getElementById("collect-print-id").removeAttribute("target")},preview:function(){var e=this,t=null,r=[];if(e.checkboxData.length>0){if(!1===e.orderTemplate)return;if(!1===e.orderTemplateCollect)return;e.checkboxData.forEach(function(e){r.push(e.orderNo)}),t={printType:1,orderIds:r.join()},t.printType=1,t.orderIds=r,sessionStorage.setItem("printOrder",(0,o.default)(t));var n=window.location.href,a=n.split("#");document.getElementById("batch-print-id").setAttribute("href",a[0]+"#/print-preview"),document.getElementById("batch-print-id").setAttribute("target","_blank")}else document.getElementById("batch-print-id").removeAttribute("href"),document.getElementById("batch-print-id").removeAttribute("target")},changeTab:function(e){this.state=e,9==e?(this.loading=!1,this.columnsListSlide=this.columnsList1,this.loadListDetail(1)):(this.loadList(1),this.columnsListSlide=this.columnsList)},newBuild:function(){this.$router.push({name:"order-detail-edit"})},openDetail:function(e){window.open(window.location.href.replace(this.$route.fullPath,"/order/all-order/order-list/order-detail-new?orderId="+e),"_blank")},copyNew:function(){var e=this;if(e.checkboxData.length>1)return void e.$Message.info("订单不能多个同时复制新增");if(0==e.checkboxData.length)return void e.$Message.info("请选择订单");var t=e.checkboxData.map(function(e){return e.orderNo}),r={orderId:t.join()};this.$router.push({name:"order-detail-copy",query:r})},openCancel:function(e){var t=this;return this.checkboxData.length>1?void this.$Message.info("不能多个同时取消订单"):0==this.checkboxData.length?void this.$Message.info("请选择订单"):1!=t.checkboxData[0].orderStatus?this.$Modal.warning({content:"非待审核订单不能取消"}):(t.modalCancel=!0,void(t.cancelOrderText=""))},okOrder:function(){var e=this;if(e.cancelOrderText||(e.delLoading=!1,e.$Message.info("备注不能为空"),setTimeout(function(){e.delLoading=!0},1e3)),1!=e.checkboxData[0].orderStatus)return this.$Modal.warning({content:"非待审核订单不能取消"});if(!e.checkboxData[0].orderNo||null==e.checkboxData[0].orderNo)return this.$Modal.error({content:"未知订单id"});var t={orderId:e.checkboxData[0].orderNo,cancelMemo:e.cancelOrderText};this.$util.ajax({method:"post",url:e.$util.apiConfig.traderManage.orderManage.cancelUrl,data:t}).then(function(t){if(t.data.code&&200==t.data.code)e.$Modal.success({content:"订单取消成功",onOk:function(t){e.cancelOrderText="",e.modalCancel=!1,e.loadList()}});else{var r="订单取消失败";t.data.message&&(r=t.data.message),e.$Modal.error({content:r})}}).catch(function(t){e.$Modal.error({content:"订单取消失败"}),console.log("失败信息：",t)}),this.delLoading=!1},openPrint:function(e){this.$router.push({name:"order-print"})},openAudit:function(e,t){if(!t)return this.$Message.error("渠道错误");window.open(window.location.href.replace(this.$route.fullPath,"/order/all-order/order-list/order-detail-new?orderId="+e),"_blank")},openCopy:function(e){var t={id:e};this.$router.push({name:"order-detail-copy",query:t})},ok:function(){this.$Message.info("已保存")},cancel:function(){this.$Message.info("已取消")},exportList:function(){var e=this;this.$Modal.confirm({title:"导出",content:"<p>是否确认导出订单（最大5000记录）</p>",onOk:function(){document.getElementById("export-form-input").method="post",document.getElementById("export-form-input").action=e.$util.baseUrl+"/trade/order/exportOrder",document.getElementById("export-form-input").submit()}})},renderTable:function(e){var t=this,r=this;r.thisTableData=[],r.query.totalCount=e.result.pager.totalCount;var n=e.result.pager.records;this.orderStatus.forEach(function(e){e.num=0});for(var a in e.result.status)for(var o in this.orderStatus)a==this.orderStatus[o].id&&(this.orderStatus[o].num=e.result.status[a]);for(var i in n)n[i].orderMain&&function(){var e=0;n[i].orderItems.forEach(function(t){t.auditEaNum=t.auditEaNum?Number(t.auditEaNum):0,t.outEaNum=t.outEaNum?Number(t.outEaNum):0,t.auditEaNum<=t.outEaNum&&e++}),e>=n[i].orderItems.length?n[i].orderMain.outboundFinished=!0:n[i].orderMain.outboundFinished=!1,n[i].orderMain.orderTime=(0,d.timestampToDay)(n[i].orderMain.orderTime,"yyyy-MM-dd hh:mm:ss");for(var a in r.sourceListArray)n[i].orderMain.sourceChannel==r.sourceListArray[a].code&&(n[i].orderMain.sourceChannel=r.sourceListArray[a].name);t.thisTableData.push(n[i].orderMain)}();setTimeout(function(){r.loading=!1},0)},loadList:function(e,t){var r=this,n=this;1==t&&(this.state="total"),n.query.page="number"==typeof e?e:1,n.loading=!0;var a="",o="";n.query.orderBeginTime&&(a=n.formatDate(n.query.orderBeginTime,"yyyy-MM-DD hh:mm:ss")),n.query.orderEndTime&&(o=n.formatDate(n.query.orderEndTime,"yyyy-MM-DD hh:mm:ss"));var i="total"==this.state||""==this.state?"":this.state,d={createPersonName:n.query.createPersonName,orderBeginTime:a,orderEndTime:o,orderId:n.query.orderId,orderStatus:i,remark:n.query.remark,sourceChannel:n.query.sourceChannel,sourceOrderNo:n.query.sourceOrderNo,storeName:n.query.storeName,page:n.query.page,keyWord:n.query.keyword,rows:n.query.rows};console.log(d),this.$util.ajax({method:"post",url:n.$util.apiConfig.traderManage.orderManage.listUrl,data:s.default.stringify(d)}).then(function(e){r.$router.replace({name:r.$route.name,query:{status:r.state}}),n.renderTable(e.data)}).catch(function(e){console.log("失败信息：",e)})},getCheckbox:function(e){this.checkboxData=e},formatDate:function(e,t){if(""===e)return"";var r=new Date;if(r.setTime(e),!t)var t="yyyy-MM-DD hh:mm:ss";var n={"M+":r.getMonth()+1<10?"0"+(r.getMonth()+1):r.getMonth()+1,"D+":r.getDate()<10?"0"+r.getDate():r.getDate(),"h+":r.getHours()<10?"0"+r.getHours():r.getHours(),"m+":r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes(),"s+":r.getSeconds()<10?"0"+r.getSeconds():r.getSeconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t},loadListDetail:function(e){var t=this,r=this;r.query.page="number"==typeof e?e:1,r.loading=!0;var n="",a="";r.query.orderBeginTime&&(n=r.formatDate(r.query.orderBeginTime,"yyyy-MM-DD hh:mm:ss")),r.query.orderEndTime&&(a=r.formatDate(r.query.orderEndTime,"yyyy-MM-DD hh:mm:ss"));var o={createStart:n,createEnd:a,keyWord:r.query.keyword,page:r.query.page};this.$util.ajax({method:"post",url:r.$util.apiConfig.traderManage.orderManage.listUrlDetail,data:s.default.stringify(o)}).then(function(e){r.loading=!1,200==e.data.code&&(t.$router.replace({name:t.$route.name,query:{status:t.state}}),t.thisTableData=e.data.result.pager.records,r.query.totalCount=e.data.result.pager.totalCount)}).catch(function(e){console.log("失败信息：",e)})},pageChange:function(e){9==this.state?this.loadListDetail(e):this.loadList(e)},queryChange:function(){9==this.state?this.loadListDetail(1):this.loadList(1,1),(window.event.key&&"Enter"===window.event.key||"click"===window.event.type&&this.query.keyword)&&(this.state="total")},pageSizeChage:function(e){this.query.rows=e,this.loadList(1,1)},querySource:function(){var e=this;e.$util.ajax({method:"post",url:e.$util.apiConfig.traderManage.orderManage.dictionary,data:s.default.stringify({type:"tradesource"})}).then(function(t){var r=t.data;if(200===r.code){e.sourceListArray=[];for(var n in r.result.dictionary)e.sourceListArray.push({code:r.result.dictionary[n].code,name:r.result.dictionary[n].name.replace(/,/g,"")})}else console.log("失败信息：",t)}).catch(function(e){console.log("失败信息：",e)})},changeSreach:function(e){this.topSreach=e,this.query.keyword="",this.query.createPersonName="",this.query.orderId="",this.query.remark="",this.query.sourceChannel="",this.query.sourceOrderNo="",this.query.storeName=""},reloadList:function(){9==this.state?this.loadListDetail(this.query.page):this.loadList(this.query.page)}},mounted:function(){this.columnsListSlide=this.columnsList,this.$route.query.status?this.state=this.$route.query.status:this.state=1,this.loadList(),this.checkPreviewTemplate(),this.querySource()},watch:{}}},2639:function(e,t,r){var n=r(2640);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(43)("28b92df2",n,!1,{})},2640:function(e,t,r){t=e.exports=r(42)(!1),t.push([e.i,"\n.width-100 {\n  width: 100%;\n}\n.lb-left {\n  float: left;\n}\n.lb-right {\n  float: right;\n}\n.lb-center {\n  text-align: center;\n}\n.lb-promotion-main {\n  height: auto;\n  background-color: #fff;\n}\n.lb-promotion-main .lb-promotion-search {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row {\n  margin-bottom: 14px;\n}\n.lb-promotion-main .lb-promotion-search .lb-promotion-row .ListName {\n  text-align: right;\n  line-height: 32px;\n  color: #747474;\n  font-size: 12px;\n  margin-right: 8px;\n}\n.promotion-page {\n  margin: 1rem 0 0 0;\n}\n.container {\n  background: #fff;\n  color: #747474;\n  border: 1px solid #E8E8E8;\n  padding: 1% 1% 3%;\n}\n.margin-top-8 {\n  margin-top: 8px;\n}\n.margin-top-10 {\n  margin-top: 10px;\n}\n.margin-top-20 {\n  margin-top: 20px;\n}\n.margin-left-10 {\n  margin-left: 10px;\n}\n.margin-bottom-10 {\n  margin-bottom: 10px;\n}\n.margin-bottom-12 {\n  margin-bottom: 12px;\n}\n.margin-bottom-14 {\n  margin-bottom: 14px;\n}\n.margin-bottom-100 {\n  margin-bottom: 100px;\n}\n.margin-right-10 {\n  margin-right: 10px;\n}\n.padding-left-6 {\n  padding-left: 6px;\n}\n.padding-left-8 {\n  padding-left: 5px;\n}\n.padding-left-10 {\n  padding-left: 10px;\n}\n.padding-left-20 {\n  padding-left: 20px;\n}\n.height-100 {\n  height: 100%;\n}\n.height-120px {\n  height: 100px;\n}\n.height-200px {\n  height: 200px;\n}\n.height-492px {\n  height: 492px;\n}\n.height-460px {\n  height: 460px;\n}\n.line-gray {\n  height: 0;\n  border-bottom: 2px solid #dcdcdc;\n}\n.notwrap {\n  word-break: keep-all;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.padding-left-5 {\n  padding-left: 10px;\n}\n[v-cloak] {\n  display: none;\n}\n.mb--12 {\n  margin-bottom: 12px;\n}\n.mb--14 {\n  margin-bottom: 14px;\n}\n.border-b--dashed {\n  border-bottom: 1px dashed #e5e5e5;\n}\n.pd--20 {\n  padding: 20px;\n}\n.ml--50 {\n  margin-left: 50px;\n}\n.fr {\n  float: right;\n}\n.fl {\n  float: left;\n}\n.bg--white {\n  background: #fff;\n}\n.clearfix:after {\n  content: '';\n  display: block;\n  height: 0;\n  clear: both;\n}\n.text-center {\n  text-align: center;\n}\n.white {\n  background-color: white;\n}\n.select_box {\n  padding: 20px;\n  border-bottom: 1px dashed #E8E8E8;\n}\n.ling_height {\n  padding-top: 15px;\n}\n.text_align_right {\n  text-align: right;\n}\n.text_align_center {\n  text-align: center;\n}\n.operation_box {\n  padding: 10px 20px;\n  text-align: right;\n}\n.page_right {\n  text-align: right;\n  padding: 10px 20px;\n}\n.input_width {\n  width: 120px;\n}\n.search_btn {\n  width: 100px;\n}\n.margin_bottom_0 {\n  margin-bottom: 0;\n}\n.ivu-breadcrumb a {\n  color: #999;\n}\n.ivu-breadcrumb {\n  font-size: 12px;\n}\n.ivu-breadcrumb > span:last-child {\n  color: #426196;\n}\n.box_shadow {\n  box-shadow: 0 1px 6px rgba(0, 0, 0, 0.2);\n  border-color: #eee;\n}\n.border_bottom_dashed {\n  border-bottom: 1px dashed #E8E8E8;\n}\n.problem_table .ivu-checkbox-wrapper {\n  margin-right: 0px;\n}\n.order-list-body {\n  height: auto;\n  background: #fff;\n  position: relative;\n}\n.order-list-body .order-list-option {\n  margin-bottom: 20px;\n}\n.order-list-body .order-list-option .text-center {\n  text-align: center;\n}\n.order-list-body .order-list-option .middle-line {\n  width: 10px;\n  padding-top: 18px;\n  padding-left: 3px;\n  float: left;\n}\n.order-list-body .order-list-option .input-date {\n  width: 178px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  float: left;\n}\n.order-list-body .order-list-option .button-right {\n  text-align: right;\n  padding-right: 10px;\n}\n.order-list-body .order-list-option .button-left {\n  text-align: left;\n  padding: 10px;\n}\n.order-list-body .order-list-option .input-text {\n  width: 180px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n}\n.order-list-body .order-list-option .input-select {\n  width: 178px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n}\n.order-list-body .page-bar {\n  padding: 10px 0;\n  overflow: hidden;\n}\n.order-list-body .fr {\n  float: right;\n}\n.order-list-body .width200 {\n  width: 200px;\n}\ndiv.ivu-tabs-bar {\n  margin-bottom: 3px;\n}\n.tabs {\n  border-bottom: 1px solid #fff;\n  padding-left: 4px;\n}\n.tabs .button-left {\n  margin-bottom: -4px;\n  margin-right: 4px;\n}\n.tabs .button-left button {\n  width: 100%;\n}\n.tabs .on button {\n  background: #fff;\n  color: #57a3f3;\n  border: 1px solid #57a3f3;\n}\n",""])},2641:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"order-list-body"},[r("div",{staticClass:"order-list-option"},[r("form",{attrs:{id:"export-form-input"}},[r("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"text-center"},[e._v("\n                    开始时间：\n                ")])]),e._v(" "),r("Col",{attrs:{span:"4"}},[r("div",{staticClass:"input-text"},[r("DatePicker",{attrs:{type:"date",name:"orderBeginTime",placeholder:"开始时间"},model:{value:e.query.orderBeginTime,callback:function(t){e.$set(e.query,"orderBeginTime",t)},expression:"query.orderBeginTime"}})],1)]),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"text-center"},[e._v("\n                    结束时间：\n                ")])]),e._v(" "),r("Col",{attrs:{span:"4"}},[r("div",{staticClass:"input-text"},[r("DatePicker",{attrs:{options:e.moreThanStartDate,type:"date",name:"orderEndTime",placeholder:"结束时间"},model:{value:e.query.orderEndTime,callback:function(t){e.$set(e.query,"orderEndTime",t)},expression:"query.orderEndTime"}})],1)]),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"text-center"},[e._v("\n                    关键字：\n                ")])]),e._v(" "),r("Col",{attrs:{span:"4"}},[r("div",{staticClass:"input-text"},[r("Input",{ref:"",attrs:{placeholder:"全文搜索",clearable:"",disabled:e.topSreach},on:{"on-enter":e.queryChange},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword","string"==typeof t?t.trim():t)},expression:"query.keyword"}})],1)]),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"input-text"},[r("a",{directives:[{name:"show",rawName:"v-show",value:!e.topSreach,expression:"!topSreach"}],attrs:{href:"javascript:void(0)"},on:{click:function(t){e.changeSreach(!0)}}},[e._v("高级搜索")]),e._v(" "),r("a",{directives:[{name:"show",rawName:"v-show",value:e.topSreach,expression:"topSreach"}],attrs:{href:"javascript:void(0)"},on:{click:function(t){e.changeSreach(!1)}}},[e._v("关闭高级搜索")])])]),e._v(" "),r("Col",{attrs:{span:"4"}},[r("div",{staticClass:"button-right"},[r("Button",{on:{click:function(t){e.queryChange()}}},[e._v("查询")])],1)])],1),e._v(" "),r("Row",{directives:[{name:"show",rawName:"v-show",value:e.topSreach,expression:"topSreach"}],attrs:{type:"flex",justify:"center",align:"middle"}},[r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"text-center"},[e._v("\n                    订单来源：\n                ")])]),e._v(" "),r("Col",{attrs:{span:"4"}},[r("div",{staticClass:"input-text"},[r("Select",{staticStyle:{width:"100px"},model:{value:e.query.sourceChannel,callback:function(t){e.$set(e.query,"sourceChannel",t)},expression:"query.sourceChannel"}},e._l(e.sourceList,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)]),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"text-center"},[e._v("\n                    业务员：\n                ")])]),e._v(" "),r("Col",{attrs:{span:"4"}},[r("div",{staticClass:"input-text"},[r("Input",{model:{value:e.query.createPersonName,callback:function(t){e.$set(e.query,"createPersonName",t)},expression:"query.createPersonName"}})],1)]),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"text-center"},[e._v("\n                    订单号：\n                ")])]),e._v(" "),r("Col",{attrs:{span:"4"}},[r("div",{staticClass:"input-text"},[r("Input",{model:{value:e.query.orderId,callback:function(t){e.$set(e.query,"orderId",t)},expression:"query.orderId"}})],1)]),e._v(" "),r("Col",{attrs:{span:"6"}})],1),e._v(" "),r("Row",{directives:[{name:"show",rawName:"v-show",value:e.topSreach,expression:"topSreach"}],attrs:{type:"flex",justify:"center",align:"middle"}},[r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"text-center"},[e._v("\n                    来源订单号：\n                ")])]),e._v(" "),r("Col",{attrs:{span:"4"}},[r("div",{staticClass:"input-text"},[r("Input",{model:{value:e.query.sourceOrderNo,callback:function(t){e.$set(e.query,"sourceOrderNo",t)},expression:"query.sourceOrderNo"}})],1)]),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"text-center"},[e._v("\n                    备注：\n                ")])]),e._v(" "),r("Col",{attrs:{span:"4"}},[r("div",{staticClass:"input-text"},[r("Input",{model:{value:e.query.remark,callback:function(t){e.$set(e.query,"remark",t)},expression:"query.remark"}})],1)]),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"text-center"},[e._v("\n                    门店名称：\n                ")])]),e._v(" "),r("Col",{attrs:{span:"4"}},[r("div",{staticClass:"input-text"},[r("Input",{model:{value:e.query.storeName,callback:function(t){e.$set(e.query,"storeName",t)},expression:"query.storeName"}})],1)]),e._v(" "),r("Col",{attrs:{span:"6"}})],1),e._v(" "),r("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"button-left"},[r("Button",{staticStyle:{width:"100%"},on:{click:e.newBuild}},[e._v("新增")])],1)]),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"button-left"},[r("Button",{on:{click:e.copyNew}},[e._v("复制新增")])],1)]),e._v(" "),r("Col",{attrs:{span:"2"}}),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"button-left"},[r("Button",{on:{click:e.openCancel}},[e._v("订单取消")])],1)]),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"button-left"},[r("a",{staticClass:"ivu-btn",attrs:{id:"batch-print-id"},on:{mouseover:e.preview,click:e.checkPreview}},[r("span",[e._v("批量打印")])])])]),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"button-left"},[r("a",{staticClass:"ivu-btn",attrs:{id:"collect-print-id"},on:{mouseover:e.collectPreview,click:e.checkPreview}},[r("span",[e._v("汇总打印")])])])]),e._v(" "),r("Col",{attrs:{span:"12"}})],1)],1)]),e._v(" "),r("Row",{staticClass:"tabs"},[e._l(e.orderStatus,function(t,n){return r("Col",{key:n,attrs:{span:"2"}},[r("div",{staticClass:"button-left",class:e.state==t.id?"on":""},[r("Button",{on:{click:function(r){e.changeTab(t.id)}}},[e._v(e._s(t.name)+" ("+e._s(t.num)+")")])],1)])}),e._v(" "),r("Col",{attrs:{span:"2"}},[r("div",{staticClass:"button-left",class:9==e.state?"on":""},[r("Button",{on:{click:function(t){e.changeTab(9)}}},[e._v("明细")])],1)])],2),e._v(" "),r("Table",{attrs:{refs:e.tableRef,columns:e.columnsListSlide,data:e.thisTableData,loading:e.loading},on:{"on-selection-change":e.getCheckbox}}),e._v(" "),r("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",justify:"end"}},[r("Page",{attrs:{total:e.query.totalCount,current:e.query.page,"show-total":"","show-elevator":"","show-sizer":"","page-size":e.query.rows,transfer:!0,"page-size-opts":[10,20,50,100,200]},on:{"on-change":e.pageChange,"on-page-size-change":e.pageSizeChage}})],1),e._v(" "),r("Modal",{attrs:{title:"标题头"},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[r("Row",[r("Col",{attrs:{span:"8"}},[e._v("名称：")]),e._v(" "),r("Col",{attrs:{span:"12"}},[r("Input",{staticClass:"width200",attrs:{clearable:""},model:{value:e.value14,callback:function(t){e.value14=t},expression:"value14"}})],1)],1)],1),e._v(" "),r("Modal",{attrs:{title:"取消订单",okText:"是",cancelText:"否"},on:{"on-ok":e.okOrder},model:{value:e.modalCancel,callback:function(t){e.modalCancel=t},expression:"modalCancel"}},[r("Row",[r("Col",{attrs:{span:"24"}},[e._v("\n            是否取消订单？\n            ")])],1)],1),e._v(" "),r("Modal",{attrs:{title:"取消订单","mask-closable":!1,loading:e.delLoading},on:{"on-ok":e.okOrder},model:{value:e.modalCancel,callback:function(t){e.modalCancel=t},expression:"modalCancel"}},[r("div",[r("span",[e._v("备注"),r("span",{staticClass:"require",staticStyle:{color:"#FF0000"}},[e._v("*")]),e._v(":")]),e._v(" "),r("Input",{attrs:{type:"textarea",rows:5,placeholder:"备注不能超过500字",maxlength:500},model:{value:e.cancelOrderText,callback:function(t){e.cancelOrderText=t},expression:"cancelOrderText"}})],1)]),e._v(" "),r("orderOutbound",{attrs:{visible:e.outboundModalVisible,orderId:e.lockOrderId?e.lockOrderId.toString():""},on:{"update:visible":function(t){e.outboundModalVisible=t},successCallback:e.reloadList}}),e._v(" "),r("orderSign",{attrs:{visible:e.orderSignModalVisible,orderId:e.lockOrderId?e.lockOrderId.toString():""},on:{"update:visible":function(t){e.orderSignModalVisible=t},successCallback:e.reloadList}})],1)},a=[];n._withStripped=!0;var o={render:n,staticRenderFns:a};t.default=o},601:function(e,t,r){"use strict";function n(e){l||r(900)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(891),o=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);var s=r(902),d=r.n(s),l=!1,u=r(13),c=n,p=u(o.a,d.a,!1,c,null,null);p.options.__file="src/views/tables/components/orderTable.vue",t.default=p.exports},615:function(e,t,r){"use strict";function n(e){l||r(1424)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1110),o=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);var s=r(1426),d=r.n(s),l=!1,u=r(13),c=n,p=u(o.a,d.a,!1,c,"data-v-0b21ec50",null);p.options.__file="src/views/trader-manage/order-manage/orderOutbound.vue",t.default=p.exports},616:function(e,t,r){"use strict";function n(e){l||r(1427)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1111),o=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);var s=r(1429),d=r.n(s),l=!1,u=r(13),c=n,p=u(o.a,d.a,!1,c,"data-v-47bc7625",null);p.options.__file="src/views/trader-manage/order-manage/orderSign.vue",t.default=p.exports},874:function(e,t,r){"use strict";function n(e){l||r(2639)}Object.defineProperty(t,"__esModule",{value:!0});var a=r(1765),o=r.n(a);for(var i in a)"default"!==i&&function(e){r.d(t,e,function(){return a[e]})}(i);var s=r(2641),d=r.n(s),l=!1,u=r(13),c=n,p=u(o.a,d.a,!1,c,null,null);p.options.__file="src/views/trader-manage/order-manage/order-list.vue",t.default=p.exports},891:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"orderTable",props:{columnsList:Array,thisTableData:Array,getHeight:Number,loading:{type:Boolean,default:!0}},data:function(){return{}},created:function(){this.init()},methods:{init:function(){var e=this;this.columnsList.forEach(function(t){"address1"==t.key&&(t.render=function(t,r){return t("Row",{props:{type:"flex",align:"middle",justify:"center"}},[t("Col",{props:{span:"22"}},r.row.name),t("Col",{props:{span:"2"}},[t("Button",{props:{type:"text",icon:"edit"},on:{click:function(t){e.$emit("showLayer","true")}}})])])})})},a:function(e){this.$emit("listenCheckbox",e)}},watch:{}}},898:function(e,t,r){"use strict";function n(e,t){if(!t)var t="yyyy-MM-DD hh:mm:ss";var r={"M+":e.getMonth()+1,"D+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in r)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[n]:("00"+r[n]).substr((""+r[n]).length)));return t}function a(e,t){if(!t)var t="yyyy-MM-dd";(e=Number(e))<1e10&&(e*=1e3);var r=new Date(e),n={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in n)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[a]:("00"+n[a]).substr((""+n[a]).length)));return t}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=n,t.timestampToDay=a},900:function(e,t,r){var n=r(901);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);r(43)("296919d0",n,!1,{})},901:function(e,t,r){t=e.exports=r(42)(!1),t.push([e.i,"\n.show-edit-btn {\n  display: none;\n  margin-left: -10px;\n}\n.ivu-table-cell:hover .show-edit-btn {\n  display: inline-block;\n}\n",""])},902:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Table",{attrs:{height:e.getHeight,columns:e.columnsList,data:e.thisTableData,stripe:"",border:"",loading:e.loading},on:{"on-selection-change":e.a}})],1)},a=[];n._withStripped=!0;var o={render:n,staticRenderFns:a};t.default=o}});