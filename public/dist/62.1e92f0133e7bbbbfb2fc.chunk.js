webpackJsonp([62],{1663:function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(102),o=i(r),a=n(909),s=i(a),u=n(239);i(u);e.default={data:function(){var t=this,e=this;return(0,o.default)({apiGroup:e.$util.apiConfig.traderManage.infoManage.standardizationTarget,countDays:0,query:{month:"",attendanceDays:0},pager:{},loading:!1,empList:[],empSelectedList:[],month:"",options3:{disabledDate:function(t){var e=new Date,n=e.getMonth()+1,i=new Date(t.valueOf()),r=i.getMonth()+1;return t&&r<n}},columns1:[{type:"selection",minWidth:60,align:"center"},{title:"工号",key:"empId",minWidth:150},{title:"业务员",key:"empName",minWidth:150},{title:"预打造",key:"geoponicsCount",minWidth:150,render:function(e,n){return e("div",[e("input",{domProps:{value:n.row.geoponicsCount},on:{input:function(e){var i=e.target.value;i=i.replace(/[^\d]/g,""),e.target.value=i;var r=n.row;r.geoponicsCount=i,t.entity[n.index]=r}},class:{"ivu-input":!0},style:{width:"100px"},attrs:{maxlength:6}})])}},{title:"精耕打造",key:"prebuildCount",minWidth:150,render:function(e,n){return e("div",[e("input",{domProps:{value:n.row.prebuildCount},on:{input:function(e){var i=e.target.value;i=i.replace(/[^\d]/g,""),e.target.value=i;var r=n.row;r.prebuildCount=i,t.entity[n.index]=r}},class:{"ivu-input":!0},style:{width:"100px"},attrs:{maxlength:6}})])}},{title:"扫盲",key:"eliminateIlliteracy",minWidth:150,render:function(e,n){return e("div",[e("input",{domProps:{value:n.row.eliminateIlliteracy},on:{input:function(e){var i=e.target.value;i=i.replace(/[^\d]/g,""),e.target.value=i;var r=n.row;r.eliminateIlliteracy=i,t.entity[n.index]=r}},class:{"ivu-input":!0},style:{width:"100px"},attrs:{maxlength:6}})])}},{title:"O2O推广",key:"storeCount",minWidth:150,render:function(e,n){return e("div",[e("input",{domProps:{value:n.row.storeCount},on:{input:function(e){var i=e.target.value;i=i.replace(/[^\d]/g,""),e.target.value=i;var r=n.row;r.storeCount=i,t.entity[n.index]=r}},class:{"ivu-input":!0},style:{width:"100px"},attrs:{maxlength:6}})])}},{title:"操作",key:"crtl",minWidth:150,render:function(e,n){return e("div",[e("Button",{props:{type:"error",size:"small"},on:{click:function(){console.log(n),t.removeRow(n.index,n.row.empId)}}},"删除")])}}],entity:[],entityEmpIds:new s.default,showEmpSelect:!1,empColumns:[{type:"selection",minWidth:60,align:"center"},{title:"工号",key:"empId",minWidth:150},{title:"姓名",key:"empName",minWidth:150}]},"empList",[])},computed:{},created:function(){},methods:{monthChangeHandle:function(t){var e=new Date;console.log(t),this.query.month=t;var n=(this.query.month.split("-")[0],this.query.month.split("-")[1]);e.setMonth(n),e.setDate(0),this.countDays=Number(e.getDate())},selectEmp:function(){var t=this;this.$util.ajax.post(this.apiGroup.querySalesman).then(function(e){console.log("get业务员",e),200==e.data.code?(void 0!=e.data.result&&null!=e.data.result&&(t.empList=e.data.result),t.showEmpSelect=!0):t.$Modal.error({title:"业务员数据请求失败",content:"业务员数据请求失败"})}).catch(function(e){t.$Modal.error({title:"HTTP请求错误",content:"业务员数据请求失败"})})},ensureEmpSelect:function(){var t=this,e=this.$refs.selectionEmp.getSelection();e.forEach(function(e){var n=t.entityEmpIds.size;t.entityEmpIds.add(e.empId),t.entityEmpIds.size==n?t.$Notice.warning({desc:e.empName+"已添加，无需重复添加",duration:2}):t.entity.push({empId:e.empId,empCode:e.empCode,empName:e.empName,geoponicsCount:"",prebuildCount:"",eliminateIlliteracy:"",storeCount:""})}),this.showEmpSelect=!1,console.log("选择业务员结果:",e)},goback:function(){this.$router.replace({name:"standardization-make-target"})},createEmpSubmit:function(){var t=this;if(""==this.query.month)return void this.$Modal.error({title:"月份不能为空",content:"请选择月份"});if(""==this.query.attendanceDays)return void this.$Modal.error({title:"出勤天数不能为空",content:"请输入出勤天数"});if(0==this.entity.length)return void this.$Modal.error({title:"业务员不能为空",content:"请选择业务员"});var e=!1;if(this.entity.forEach(function(t){""!=t.geoponicsCount&&""!=t.prebuildCount&&""!=t.eliminateIlliteracy&&""!=t.storeCount||(e=!0)}),e)return void this.$Modal.error({title:"业务员打造次数不能为空",content:"请输入业务员打造次数"});console.log("this.entity:",this.entity);var n={};n.storeStandardTargetDTO=[],this.entity.forEach(function(e){n.storeStandardTargetDTO.push({empCode:e.empCode,empId:e.empId,empName:e.empName,geoponicsCount:Number(e.geoponicsCount),prebuildCount:Number(e.prebuildCount),eliminateIlliteracy:Number(e.eliminateIlliteracy),storeCount:Number(e.storeCount),month:t.query.month,attendanceDays:t.query.attendanceDays})}),this.loading=!0,this.$util.ajax.post(this.apiGroup.save,n.storeStandardTargetDTO).then(function(e){t.loading=!1,console.log("标准化打造新建目标：",e),1==e.data.success?t.$Modal.success({title:"保存操作成功",content:"已成功新建目标",onOk:function(){t.goback()}}):t.$Modal.error({title:"新建请求失败",content:e.data.message})}).catch(function(e){console.log(e),t.loading=!1,t.$Modal.error({title:"HTTP请求错误",content:"HTTP请求错误"})})},multDelelte:function(){var t=this,e=this.$refs.selection.getSelection();if(e.length<1)return void this.$Modal.error({title:"选择数据为空",content:"请选择一条以上的数据"});console.log("daa:",e),e.forEach(function(e){t.entityEmpIds.delete(e.empId);for(var n=0;n<t.entity.length;n++)t.entity[n].empId==e.empId&&t.entity.splice(n,1)})},removeRow:function(t,e){this.entityEmpIds.delete(e),this.entity.splice(t,1)}}}},2254:function(t,e,n){var i=n(2255);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n(43)("0be02bec",i,!1,{})},2255:function(t,e,n){e=t.exports=n(42)(!1),e.push([t.i,"\n.cmain[data-v-07624a64] {\n  background-color: white;\n  position: relative;\n  /* min-width: 1020px; */\n}\n.checkForm .ivu-col[data-v-07624a64] {\n  margin: 10px 0px;\n}\n.qianshouCol .ivu-col[data-v-07624a64] {\n  margin: 5px 0px;\n}\n.line[data-v-07624a64] {\n  border-bottom: 1px solid #dddee1;\n}\nbutton + button[data-v-07624a64] {\n  margin-left: 10px;\n}\n",""])},2256:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cmain"},[n("div",{staticStyle:{padding:"20px 50px"}},[n("br"),t._v(" "),n("Row",[n("Col",{attrs:{sm:12,md:8,lg:6}},[n("span",[t._v("月份:")]),t._v(" "),n("DatePicker",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{options:t.options3,type:"month",placeholder:"请选择月份"},on:{"on-change":t.monthChangeHandle}})],1),t._v(" "),n("Col",{attrs:{sm:12,md:8,lg:6}},[n("span",[t._v("出勤天数：")]),t._v(" "),n("InputNumber",{staticStyle:{width:"143px","margin-left":"15px"},attrs:{disabled:""==t.query.month,min:1,max:t.countDays,type:"text"},model:{value:t.query.attendanceDays,callback:function(e){t.$set(t.query,"attendanceDays","string"==typeof e?e.trim():e)},expression:"query.attendanceDays"}})],1)],1),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("div",{staticStyle:{"border-bottom":"1px rgba(204, 204, 204, 1) solid"}}),t._v(" "),n("br"),t._v(" "),n("Row",[n("i-button",{staticStyle:{width:"115px"},attrs:{type:"primary",icon:"plus"},on:{click:t.selectEmp}},[t._v("选择业务员")]),t._v(" "),n("i-button",{staticStyle:{width:"115px","margin-left":"15px"},attrs:{type:"error",icon:"minus"},on:{click:t.multDelelte}},[t._v("批量删除")])],1),t._v(" "),n("br"),t._v(" "),n("Table",{ref:"selection",attrs:{stripe:"",columns:t.columns1,data:t.entity}}),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("Row",{attrs:{type:"flex",justify:"center"}},[n("i-button",{staticStyle:{width:"115px","margin-left":"15px"},attrs:{type:"primary"},on:{click:t.createEmpSubmit}},[t._v("保存")]),t._v(" "),n("i-button",{staticStyle:{width:"115px","margin-left":"15px"},on:{click:t.goback}},[t._v("取消")])],1),t._v(" "),n("br"),t._v(" "),n("br")],1),t._v(" "),n("modal",{attrs:{width:"800",title:"选择业务员"},model:{value:t.showEmpSelect,callback:function(e){t.showEmpSelect=e},expression:"showEmpSelect"}},[n("div",[n("Table",{ref:"selectionEmp",attrs:{height:"400",stripe:"",columns:t.empColumns,data:t.empList}})],1),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("i-button",{staticStyle:{width:"92px"},attrs:{type:"primary"},on:{click:t.ensureEmpSelect}},[t._v("确认")]),t._v(" "),n("i-button",{staticStyle:{width:"92px"},on:{click:function(e){t.showEmpSelect=!1}}},[t._v("返回")])],1)]),t._v(" "),t.loading?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},r=[];i._withStripped=!0;var o={render:i,staticRenderFns:r};e.default=o},780:function(t,e,n){"use strict";function i(t){c||n(2254)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(1663),o=n.n(r);for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var s=n(2256),u=n.n(s),c=!1,l=n(13),d=i,p=l(o.a,u.a,!1,d,"data-v-07624a64",null);p.options.__file="src/views/promotion-manage/war-programme/terminal-brand-managment/standardization-make-target/standardization-make-target-create.vue",e.default=p.exports},897:function(t,e,n){var i=n(44);t.exports=function(t,e){if(!i(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},909:function(t,e,n){t.exports={default:n(910),__esModule:!0}},910:function(t,e,n){n(151),n(75),n(100),n(911),n(917),n(920),n(922),t.exports=n(11).Set},911:function(t,e,n){"use strict";var i=n(912),r=n(897);t.exports=n(913)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return i.def(r(this,"Set"),t=0===t?0:t,t)}},i)},912:function(t,e,n){"use strict";var i=n(32).f,r=n(148),o=n(245),a=n(64),s=n(244),u=n(240),c=n(147),l=n(246),d=n(248),p=n(37),f=n(243).fastKey,v=n(897),m=p?"_s":"size",h=function(t,e){var n,i=f(e);if("F"!==i)return t._i[i];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var l=t(function(t,i){s(t,l,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=i&&u(i,n,t[c],t)});return o(l.prototype,{clear:function(){for(var t=v(this,e),n=t._i,i=t._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete n[i.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var n=v(this,e),i=h(n,t);if(i){var r=i.n,o=i.p;delete n._i[i.i],i.r=!0,o&&(o.n=r),r&&(r.p=o),n._f==i&&(n._f=r),n._l==i&&(n._l=o),n[m]--}return!!i},forEach:function(t){v(this,e);for(var n,i=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(i(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!h(v(this,e),t)}}),p&&i(l.prototype,"size",{get:function(){return v(this,e)[m]}}),l},def:function(t,e,n){var i,r,o=h(t,e);return o?o.v=n:(t._l=o={i:r=f(e,!0),k:e,v:n,p:i=t._l,n:void 0,r:!1},t._f||(t._f=o),i&&(i.n=o),t[m]++,"F"!==r&&(t._i[r]=o)),t},getEntry:h,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=v(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?l(0,n.k):"values"==e?l(0,n.v):l(0,[n.k,n.v]):(t._t=void 0,l(1))},n?"entries":"values",!n,!0),d(e)}}},913:function(t,e,n){"use strict";var i=n(12),r=n(36),o=n(243),a=n(66),s=n(45),u=n(245),c=n(240),l=n(244),d=n(44),p=n(77),f=n(32).f,v=n(914)(0),m=n(37);t.exports=function(t,e,n,h,y,g){var _=i[t],x=_,b=y?"set":"add",w=x&&x.prototype,S={};return m&&"function"==typeof x&&(g||w.forEach&&!a(function(){(new x).entries().next()}))?(x=e(function(e,n){l(e,x,t,"_c"),e._c=new _,void 0!=n&&c(n,y,e[b],e)}),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in w&&(!g||"clear"!=t)&&s(x.prototype,t,function(n,i){if(l(this,x,t),!e&&g&&!d(n))return"get"==t&&void 0;var r=this._c[t](0===n?0:n,i);return e?this:r})}),g||f(x.prototype,"size",{get:function(){return this._c.size}})):(x=h.getConstructor(e,t,y,b),u(x.prototype,n),o.NEED=!0),p(x,t),S[t]=x,r(r.G+r.W+r.F,S),g||h.setStrong(x,t,y),x}},914:function(t,e,n){var i=n(64),r=n(149),o=n(98),a=n(99),s=n(915);t.exports=function(t,e){var n=1==t,u=2==t,c=3==t,l=4==t,d=6==t,p=5==t||d,f=e||s;return function(e,s,v){for(var m,h,y=o(e),g=r(y),_=i(s,v,3),x=a(g.length),b=0,w=n?f(e,x):u?f(e,0):void 0;x>b;b++)if((p||b in g)&&(m=g[b],h=_(m,b,y),t))if(n)w[b]=h;else if(h)switch(t){case 3:return!0;case 5:return m;case 6:return b;case 2:w.push(m)}else if(l)return!1;return d?-1:c||l?l:w}}},915:function(t,e,n){var i=n(916);t.exports=function(t,e){return new(i(t))(e)}},916:function(t,e,n){var i=n(44),r=n(247),o=n(14)("species");t.exports=function(t){var e;return r(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!r(e.prototype)||(e=void 0),i(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},917:function(t,e,n){var i=n(36);i(i.P+i.R,"Set",{toJSON:n(918)("Set")})},918:function(t,e,n){var i=n(150),r=n(919);t.exports=function(t){return function(){if(i(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},919:function(t,e,n){var i=n(240);t.exports=function(t,e){var n=[];return i(t,!1,n.push,n,e),n}},920:function(t,e,n){n(921)("Set")},921:function(t,e,n){"use strict";var i=n(36);t.exports=function(t){i(i.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},922:function(t,e,n){n(923)("Set")},923:function(t,e,n){"use strict";var i=n(36),r=n(76),o=n(64),a=n(240);t.exports=function(t){i(i.S,t,{from:function(t){var e,n,i,s,u=arguments[1];return r(this),e=void 0!==u,e&&r(u),void 0==t?new this:(n=[],e?(i=0,s=o(u,arguments[2],2),a(t,!1,function(t){n.push(s(t,i++))})):a(t,!1,n.push,n),new this(n))}})}}});