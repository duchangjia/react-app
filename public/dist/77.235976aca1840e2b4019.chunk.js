webpackJsonp([77,277,278],{1085:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"titles",props:{title:{type:String}}}},1402:function(t,e,a){var i=a(1403);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(43)("7295038e",i,!1,{})},1403:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\n.title-container[data-v-2c6a50ba] {\n  border-bottom: 1px solid #e9eaec;\n  padding: 14px 16px;\n  line-height: 1;\n  margin-bottom: 15px;\n}\n.title-container p[data-v-2c6a50ba] {\n  height: 13px;\n  line-height: 13px;\n  font-size: 13px;\n  color: #777;\n  display: inline-block;\n  width: 100%;\n  font-weight: 700;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n",""])},1404:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title-container"},[a("p",[t._v(t._s(t.title))])])},n=[];i._withStripped=!0;var s={render:i,staticRenderFns:n};e.default=s},1578:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(239),s=i(n),o=a(602),r=i(o),l=a(608),c=i(l);e.default={components:{steps:r.default,titles:c.default},data:function(){return{backBtnText:"上一步",salesmanList:[],isDetail:!1,shopType:{storeNature:[],customizeGroupId:[],salesManId:[]},calendar:[],storeGroupList:[],storeNature:["A","B","C","D","E"],shopRule:"",stepsObj:{current:2,data:["定向规则","秒杀配置","详情预览"]},cardBordered:!1,activityData:[],activityShopColumns:[{title:"序号",align:"center",width:70,type:"index"},{title:"门店编码",align:"center",render:function(t,e){return t("span",{},e.row.storeCode)}},{title:"门店名称",align:"center",render:function(t,e){return t("span",{},e.row.storeName)}},{title:"门店类型",align:"center",render:function(t,e){return t("span",{},e.row.storeNature)}},{title:"自定义组",align:"center",render:function(t,e){return t("span",{},e.row.groupName)}}],activityLoading:!1,activity:{name:"",content:"",sessionName:"",preheatTime:"",validPayDuration:"",beginDate:"",endDate:""},excludeData:[],excludeShopColumns:[{title:"序号",align:"center",width:70,type:"index"},{title:"门店编码",align:"center",render:function(t,e){return t("span",{},e.row.storeCode)}},{title:"门店名称",align:"center",render:function(t,e){return t("span",{},e.row.storeName)}},{title:"门店类型",align:"center",render:function(t,e){return t("span",{},e.row.storeType)}},{title:"自定义组",align:"center",render:function(t,e){return t("span",{},e.row.storeGroupName)}}],excludeLoading:!1,checkedGoodsData:[],isEA:!0,checkedGoodsLoading:!1,checkedGoodsColumns:[{title:"序号",align:"center",width:60,type:"index"},{title:"商品条形码",align:"center",width:150,render:function(t,e){return t("span",{},e.row.barCode)}},{title:"物料编码",align:"center",width:150,render:function(t,e){return t("span",{},e.row.code80)}},{title:"商品名称",align:"center",width:170,render:function(t,e){return t("span",{},e.row.itemName)}},{title:"原价EA",align:"center",width:120,render:function(t,e){var a=1,i=0;return e.row.changeUnitRate&&(a=e.row.changeUnitRate),e.row.carPrice>0&&(i=+(e.row.carPrice/a).toFixed(2)),t("span",{},i)}},{title:"原价CAR",align:"center",width:120,render:function(t,e){return t("span",{},e.row.carPrice)}},{title:"秒杀价",align:"center",width:120,render:function(t,e){return t("span",{},e.row.promPrice)}},{title:"店均限购",align:"center",width:90,render:function(t,e){return t("span",{},e.row.maxBuyCnt)}},{title:"起卖数",align:"center",width:80,render:function(t,e){return t("span",{},e.row.startSellNum)}},{title:"规划数量",align:"center",width:90,render:function(t,e){return t("span",{},e.row.promStock)}}]}},methods:{getSalesmanList:function(){var t=this;this.$util.ajax.post(this.$util.apiConfig.promotionManage.warProgramme.o2oVoucher.querySalesman).then(function(e){if(200!==e.data.code)return void t.$Message.error(e.data.message);t.salesmanList=e.data.result}).catch(function(t){console.log("错误信息：",t)})},getStoreGroupList:function(){var t=this;this.$util.ajax({method:"post",url:this.$util.apiConfig.promotionManage.warProgramme.storeGroup}).then(function(e){if(200!==e.data.code)return void t.$Message.error(e.data.message);t.storeGroupList=e.data.result.storeGroupList,t.getcalendar()}).catch(function(t){console.log("错误信息：",t)})},getcalendar:function(){var t=this;this.$util.ajax({method:"POST",url:this.$util.apiConfig.promotionManage.warProgramme.o2oSecondKill.getSessionList,data:{}}).then(function(e){if(200!==e.data.code)return void t.$Message.error({content:e.data.message,duration:3});t.calendar=e.data.result.rows,t.getSessionData()}).catch(function(t){console.log("错误信息：",t)})},getSessionData:function(){var t=this,e=JSON.parse(sessionStorage.getItem("marketingSecondKillObject"));this.activity.name=e.promotionSeckillInfo.title,this.activity.content=e.promotionSeckillInfo.promotionDescribe,this.activity.preheatTime=e.promotionSeckillInfo.preheatTime,this.activity.validPayDuration=e.promotionSeckillInfo.validPayDuration;for(var a=0;a<this.calendar.length;a++)if(this.calendar[a].sessionId===e.promotionSeckillInfo.sessionId){this.activity.sessionName=this.calendar[a].sessionName,this.activity.beginDate=this.calendar[a].beginDate,this.activity.endDate=this.calendar[a].endDate;break}e.isDetail&&(this.isDetail=e.isDetail,this.backBtnText="返回"),e.promotionSeckillSalesmanScopeDTOList&&e.promotionSeckillSalesmanScopeDTOList.map(function(e){t.shopType.salesManId.push(e.salesmanId+"")});var i=e.promotionSeckillScopeDetailList[0].scopeType;1===i?this.shopRule="1":2===i?(this.shopRule="3",e.promotionSeckillScopeDetailList.map(function(e){var a={page:1,rows:10,storeCodeLike:e.scopeCode,storeNameLike:"",storeNature:"",customizeGroupId:"",t_i_m_e:(new Date).getTime()};t.$util.ajax({method:"post",url:t.$util.apiConfig.promotionManage.warProgramme.getStoreList,data:s.default.stringify(a)}).then(function(e){if(200!==e.data.code)return void t.$Message.info(e.data.message);e.data.result.records[0]._checked=!1,e.data.result.records[0]._disabled=t.disabled,t.activityData.push(e.data.result.records[0])}).catch(function(t){console.log("错误信息：",t)})})):3===i&&(this.shopRule="2",e.promotionSeckillScopeDetailList.map(function(e){e.storeGroupId?t.shopType.customizeGroupId.push(+e.storeGroupId):e.scopeCode&&t.shopType.storeNature.push(e.scopeCode)})),this.isEA=0===e.promotionSeckillGoodsList[0].unit,this.checkedGoodsData=e.promotionSeckillGoodsList,e.promotionSeckillStoreScopeExclusionList&&(this.excludeData=e.promotionSeckillStoreScopeExclusionList)},editActivity:function(t){var e=this;this.isDetail=!0,this.$util.ajax({method:"POST",url:this.$util.apiConfig.promotionManage.warProgramme.o2oSecondKill.updatePromotion,data:JSON.parse(sessionStorage.getItem("marketingSecondKillObject"))}).then(function(t){if(200!==t.data.code)return e.$Message.error(t.data.message),void(e.isDetail=!1);e.$Message.success(t.data.message),sessionStorage.removeItem("marketingSecondKillObject"),setTimeout(function(){e.$router.push({name:"second-kill"})},2e3)}).catch(function(t){console.log("错误信息:",t)})},addActivity:function(){var t=this;this.isDetail=!0,this.$util.ajax({method:"POST",url:this.$util.apiConfig.promotionManage.warProgramme.o2oSecondKill.savePromotion,data:JSON.parse(sessionStorage.getItem("marketingSecondKillObject"))}).then(function(e){if(200!==e.data.code)return t.$Message.error(e.data.message),void(t.isDetail=!1);t.$Message.success(e.data.message),sessionStorage.removeItem("marketingSecondKillObject"),setTimeout(function(){t.$router.push({name:"second-kill"})},2e3)}).catch(function(t){console.log("错误信息:",t)})},affirm:function(){if(JSON.parse(sessionStorage.getItem("marketingSecondKillObject")).edit)return void this.editActivity();this.addActivity()}},created:function(){this.getStoreGroupList(),this.getSalesmanList()}}},1989:function(t,e,a){var i=a(1990);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(43)("6554efba",i,!1,{})},1990:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\n.container .float-left[data-v-b789a956] {\n  float: left;\n  padding-right: 10px;\n  width: 80px;\n  text-align: right;\n}\n.container .ruleShopType[data-v-b789a956] {\n  overflow: hidden;\n  overflow-wrap: break-word;\n}\n.container .shopType[data-v-b789a956] {\n  margin: 20px 0 20px 53px;\n}\n.container .shopType .line2[data-v-b789a956] {\n  margin: 10px 0;\n}\n.container .activity[data-v-b789a956] {\n  font-size: 14px;\n  color: #232323;\n}\n.container .activity .clearfixs[data-v-b789a956] {\n  overflow: auto;\n}\n.container .activity .activityTitle[data-v-b789a956] {\n  font-weight: 700;\n}\n.container .activity .activityBottom[data-v-b789a956] {\n  margin-top: 10px;\n}\n.container .delBtn[data-v-b789a956] {\n  text-align: center;\n  margin: 0 .5% 5px;\n  position: relative;\n}\n.container .delBtn .title[data-v-b789a956] {\n  font-weight: 700;\n  font-size: 15px;\n  color: #495060;\n}\n.container .delBtn .unit[data-v-b789a956] {\n  position: absolute;\n  right: 0;\n}\n.container .delBtn .unit .text[data-v-b789a956] {\n  font-weight: 700;\n  margin-right: 5px;\n}\n.container .ivu-switch[data-v-b789a956] {\n  background-color: #ed3f14;\n}\n.container .ivu-switch[data-v-b789a956]:focus {\n  box-shadow: 0 0 0 2px rgba(240, 45, 45, 0.2);\n}\n.container .ivu-switch-checked[data-v-b789a956] {\n  background-color: #2d8cf0;\n}\n.container .ivu-switch-checked[data-v-b789a956]:focus {\n  box-shadow: 0 0 0 2px rgba(45, 140, 240, 0.2);\n}\n.container .page[data-v-b789a956] {\n  text-align: right;\n  margin-right: .5%;\n  margin-top: 5px;\n  position: relative;\n}\n.container .bottomBtn[data-v-b789a956] {\n  text-align: center;\n  margin-top: 30px;\n}\n.container .bottomBtn Button[data-v-b789a956]:first-of-type {\n  margin-right: 20px;\n}\n.container .table[data-v-b789a956] {\n  margin: 20px 0 30px;\n}\n.container .shopRule[data-v-b789a956] {\n  margin-left: 35px;\n  margin-bottom: 20px;\n}\n",""])},1991:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("steps",{attrs:{stepsObj:t.stepsObj}}),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"activity"},[a("Card",{attrs:{"dis-hover":"",bordered:t.cardBordered}},[a("div",{staticClass:"activityTitle",attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"float-left"},[t._v("活动名称：")]),a("div",{staticClass:"ruleShopType",staticStyle:{"line-height":"15px"}},[t._v(t._s(t.activity.name))])]),t._v(" "),a("div",{staticClass:"clearfixs"},[a("div",{staticClass:"float-left"},[t._v("活动描述：")]),a("div",{staticClass:"ruleShopType"},[t._v(t._s(t.activity.content))])]),t._v(" "),a("div",{staticClass:"activityBottom clearfixs"},[a("div",{staticClass:"float-left"},[t._v("预热时间：")]),a("div",{staticClass:"ruleShopType"},[t._v(t._s(t.activity.preheatTime))])]),t._v(" "),a("div",{staticClass:"activityBottom clearfixs"},[a("div",{staticClass:"float-left"},[t._v("订单时长：")]),a("div",{staticClass:"ruleShopType"},[t._v(t._s(t.activity.validPayDuration+" 秒"))])]),t._v(" "),a("div",{staticClass:"activityBottom clearfixs"},[a("div",{staticClass:"float-left"},[t._v("档期：")]),a("div",{staticClass:"ruleShopType"},[t._v(t._s(t.activity.sessionName))])]),t._v(" "),a("div",{staticClass:"activityBottom clearfixs"},[a("div",{staticClass:"float-left"},[t._v("档期开始：")]),a("div",{staticClass:"ruleShopType"},[t._v(t._s(t.activity.beginDate))])]),t._v(" "),a("div",{staticClass:"activityBottom clearfixs"},[a("div",{staticClass:"float-left"},[t._v("档期结束：")]),a("div",{staticClass:"ruleShopType"},[t._v(t._s(t.activity.endDate))])])])],1),t._v(" "),a("titles",{attrs:{title:"门店范围"}}),t._v(" "),a("RadioGroup",{staticClass:"shopRule",model:{value:t.shopRule,callback:function(e){t.shopRule=e},expression:"shopRule"}},[a("Radio",{attrs:{label:"1",disabled:""}},[t._v("全部门店")]),t._v(" "),a("Radio",{attrs:{label:"3",disabled:""}},[t._v("指定门店")]),t._v(" "),a("Radio",{attrs:{label:"2",disabled:""}},[t._v("指定门店类型")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.shopRule,expression:"shopRule === '2'"}],staticClass:"shopType"},[a("div",[a("span",{staticClass:"float-left"},[t._v("门店类型")]),t._v(" "),a("CheckboxGroup",{staticClass:"ruleShopType",model:{value:t.shopType.storeNature,callback:function(e){t.$set(t.shopType,"storeNature",e)},expression:"shopType.storeNature"}},t._l(t.storeNature,function(t,e){return a("Checkbox",{key:e,attrs:{label:t,disabled:""}})}))],1),t._v(" "),a("div",{staticClass:"line2"},[a("span",{staticClass:"float-left"},[t._v("自定义组")]),t._v(" "),a("CheckboxGroup",{staticClass:"ruleShopType",model:{value:t.shopType.customizeGroupId,callback:function(e){t.$set(t.shopType,"customizeGroupId",e)},expression:"shopType.customizeGroupId"}},t._l(t.storeGroupList,function(e,i){return a("Checkbox",{key:i,attrs:{label:e.id,disabled:""}},[t._v(t._s(e.groupName))])}))],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"3"===t.shopRule,expression:"shopRule === '3'"}],staticClass:"table"},[t._m(0),t._v(" "),a("Table",{staticClass:"activityShop problem_table",attrs:{stripe:"",loading:t.activityLoading,columns:t.activityShopColumns,data:t.activityData}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"2"===t.shopRule||"1"===t.shopRule,expression:"shopRule === '2' || shopRule === '1'"}]},[a("titles",{attrs:{title:"业务员"}}),t._v(" "),a("div",{staticClass:"shopType"},[a("CheckboxGroup",{staticClass:"ruleShopType",model:{value:t.shopType.salesManId,callback:function(e){t.$set(t.shopType,"salesManId",e)},expression:"shopType.salesManId"}},t._l(t.salesmanList,function(e,i){return a("Checkbox",{key:i,attrs:{label:e.empId,disabled:""}},[t._v(t._s(e.empName))])}))],1)],1),t._v(" "),a("div",{staticClass:"table"},[a("div",{staticClass:"delBtn"},[a("span",{staticClass:"title"},[t._v("秒杀配置")]),t._v(" "),a("span",{staticClass:"unit"},[a("span",{staticClass:"text"},[t._v("单位")]),t._v(" "),a("i-switch",{attrs:{size:"large",disabled:""},model:{value:t.isEA,callback:function(e){t.isEA=e},expression:"isEA"}},[a("span",{attrs:{slot:"open"},slot:"open"},[t._v("EA")]),t._v(" "),a("span",{attrs:{slot:"close"},slot:"close"},[t._v("CAR")])])],1)]),t._v(" "),a("Table",{staticClass:"checkedGoodsTable problem_table",attrs:{stripe:"",loading:t.checkedGoodsLoading,columns:t.checkedGoodsColumns,data:t.checkedGoodsData}})],1),t._v(" "),a("div",{staticClass:"table"},[t._m(1),t._v(" "),a("Table",{staticClass:"excludeShop problem_table",attrs:{stripe:"",loading:t.excludeLoading,columns:t.excludeShopColumns,data:t.excludeData}})],1),t._v(" "),a("div",{staticClass:"bottomBtn"},[a("Button",{attrs:{type:"primary",disabled:t.isDetail},on:{click:t.affirm}},[t._v("确认")]),t._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(e){t.$router.go(-1)}}},[t._v(t._s(t.backBtnText))])],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"delBtn"},[a("span",{staticClass:"title"},[t._v("活动门店")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"delBtn"},[a("span",{staticClass:"title"},[t._v("排除门店")])])}];i._withStripped=!0;var s={render:i,staticRenderFns:n};e.default=s},602:function(t,e,a){"use strict";function i(t){c||a(946)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(930),s=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);var r=a(948),l=a.n(r),c=!1,d=a(13),u=i,p=d(s.a,l.a,!1,u,null,null);p.options.__file="src/views/marketing-centre-components/steps.vue",e.default=p.exports},608:function(t,e,a){"use strict";function i(t){c||a(1402)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1085),s=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);var r=a(1404),l=a.n(r),c=!1,d=a(13),u=i,p=d(s.a,l.a,!1,u,"data-v-2c6a50ba",null);p.options.__file="src/views/marketing-centre-components/titles.vue",e.default=p.exports},696:function(t,e,a){"use strict";function i(t){c||a(1989)}Object.defineProperty(e,"__esModule",{value:!0});var n=a(1578),s=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);var r=a(1991),l=a.n(r),c=!1,d=a(13),u=i,p=d(s.a,l.a,!1,u,"data-v-b789a956",null);p.options.__file="src/views/promotion-manage/second-kill/second-kill-detail.vue",e.default=p.exports},930:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"steps",props:{stepsObj:{type:Object}}}},946:function(t,e,a){var i=a(947);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(43)("62877a53",i,!1,{})},947:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\n.stepBox {\n  padding: 20px;\n  border-bottom: 1px dashed #E8E8E8;\n  margin-bottom: 10px;\n}\n.bgcolor {\n  background-color: white;\n}\n.ivu-steps-item.ivu-steps-status-wait .ivu-steps-title {\n  color: #AAA;\n}\n",""])},948:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"stepBox bgcolor"},[a("Steps",{attrs:{current:t.stepsObj.current,size:"small"}},t._l(t.stepsObj.data,function(t,e){return a("Step",{key:t,attrs:{title:t}})}))],1)},n=[];i._withStripped=!0;var s={render:i,staticRenderFns:n};e.default=s}});