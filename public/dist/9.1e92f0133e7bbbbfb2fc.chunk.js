webpackJsonp([9],{1763:function(t,e,a){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(241),n=s(r),i=a(146),o=s(i),l=a(242),c=s(l),d=a(239),u=(s(d),a(898));e.default={data:function(){return{apiGroup:this.$util.apiConfig.traderManage.orderManage,params:{sourceOrderNo:"",sourceChannel:"",deliverTime:"",remark:"",updateTime:"",storeName:"",storeCode:"",operatePerson:"",operateCode:"",receiverMobile:"",receiverName:"",detailAddress:"",provinceName:"",cityName:"",areaName:"",fullAddress:"",carNo:"",carCode:"",driverName:"",driverCode:"",driverContact:"",carLoad:"",carCapacity:"",orderNo:"",couponAmount:"",shouldPayAmount:"",itemToalAmount:""},totalActualAmountSum:"",goodsData:[],tickList:[],orderTimeline:[],orderMain:{}}},mounted:function(){this.getOrderDeail(this.$route.query.orderId)},computed:{eaCarNum:function(){var t=this,e=0,a=0;return this.goodsData.forEach(function(s){var r=0,n=0,i="";2==t.orderMain.orderStatus?i=t.formatEaNum(s.auditEaNum,s.packageNum,!0):5==t.orderMain.orderStatus||9==t.orderMain.orderStatus?i=t.formatEaNum(s.outEaNum,s.packageNum,!0):7==t.orderMain.orderStatus?i=t.formatEaNum(s.signEaNum,s.packageNum,!0):(r=Number(s.CRTItemNum)||0,n=Number(s.EAItemNum)||0),i&&(r=Number(i.split("/")[0]),n=Number(i.split("/")[1])),isNaN(r)&&(r=0),isNaN(n)&&(n=0),e+=r,a+=n}),e+"/"+a},receiverTotalAddress:function(){return[this.params.provinceName||"",this.params.cityName||"",this.params.areaName||"",this.params.detailAddress||""].join(" ")}},methods:{formatOrderTimeline:function(){for(var t=[],e=0;e<this.orderTimeline.length;e++){var a=this.orderTimeline[e],s=new Date(a.timeset),r=(0,u.formatDate)(s,"yyyy-MM-DD hh:mm:ss"),n=r.split(" ")[0],i=r.split(" ")[1],o="周";switch(s.getDay()){case 0:o+="日";break;case 1:o+="一";break;case 2:o+="二";break;case 3:o+="三";break;case 4:o+="四";break;case 5:o+="五";break;case 6:o+="六"}var l={timeset:a.timeset,dateStr:n,timeStr:i,dayStr:o,text:a.text};t.push(l)}return t.sort(function(t,e){return e.timeset-t.timeset})},orderOrigin:function(t){switch(Number(t)){case 1:return"DMS";case 2:return"SFA";case 3:return"O2O";case 4:return"SFA";case 6:return"PDA";default:return""}},orderStatusText:function(t){switch(Number(t)){case 1:return"待审核";case 2:return"待发货";case 5:return"待收货(部分出库)";case 6:return"已取消";case 7:return"已签收";case 9:return"待收货(全部出库)";case 8:return"已关闭";default:return""}},sourceChannel:function(t){switch(Number(t)){case 1:return"手工做单预订单";case 2:return"SFA预订单";case 3:return"O2O预订单";case 4:return"SFA车销订单";case 5:return"代配送订单";case 6:return"PDA车销订单";default:return""}},inventory:function(t){var e=0,a=0,s=t.packageNum,r=Number(t.inventory);return isNaN(r)||(e=parseInt(r/s)||0,a=r%s||0),s&&null!=s?e+"/"+a:"0/0"},formatEaNum:function(t,e,a){var s=0,r=0;return isNaN(t)||(s=parseInt(t/e)||0,r=t%e||0),e&&null!=e?s+"/"+r=="0/0"?a?"0/0":"":s+"/"+r:a?"0/0":""},overLimit:function(t){return t.CRTItemNum*t.packageNum+t.EAItemNum>t.inventory?"red":""},getOrderDeail:function(){function t(t){return e.apply(this,arguments)}var e=(0,c.default)(n.default.mark(function t(e){var a,s,r,i,l,c,d,v,m=this;return n.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.saveBtnDisabled=!0,t.prev=1,t.next=4,this.$ajax(this.apiGroup.getDetailUrl+"?orderId="+e);case 4:if(a=t.sent,s=a.data,200==s.code&&s.result&&null!==s.result&&(this.saveBtnDisabled=!1,r=s.result.tradeOrder,s.result.deliveryCarBill&&s.result.deliveryCarBill instanceof Object&&(i=s.result.deliveryCarBill,this.carNoAto=this.null2EmptyString(i.carPlateNo),this.params.carCode=this.null2EmptyString(i.carCode),this.params.driverName=this.null2EmptyString(i.driverName),this.params.driverCode=this.null2EmptyString(i.driverCode),this.params.driverContact=this.null2EmptyString(i.driverContact),setTimeout(function(t){m.params.carNo=m.carNoAto,m.params.carLoad=m.null2EmptyString(i.totalWeight),m.params.carCapacity=m.null2EmptyString(i.totalVolume)})),s.result.coupons&&s.result.coupons instanceof Array&&(l=s.result.coupons,this.tickList=l.map(function(t){return{name:t.couponname,code:t.couponcode}})),s.result.tradeOrderLogList&&s.result.tradeOrderLogList instanceof Array&&(c=s.result.tradeOrderLogList,this.orderTimeline=c.map(function(t){var e="";switch(t.cityName&&(e+="【"+t.cityName+"】"),Number(t.type)){case 1:e+="订单创建/修改";break;case 2:e+="订单审核（拣货）";break;case 3:e+="订单出库（发货）";break;case 4:e+="订单签收";break;case 5:e+="订单取消";break;case 6:e+="已完成";break;case 7:e+="已关闭";break;case 8:e+="订单撤单";break;default:e+="未知订单状态"}return{timeset:t.createDate,text:e}})),r&&null!==r&&(r.orderItems instanceof Array&&(this.goodsData=r.orderItems.map(function(t){var e=m.null2EmptyString(t.itemActualAmount,0),a=m.null2EmptyString(t.itemAmount,0);return 11==t.promotionType&&!isNaN(t.packageNum)&&t.packageNum>0&&(e=t.itemActualAmount*t.packageNum),(0,o.default)({},t,{remark:t.remark,EAItemNum:m.null2EmptyString(t.eaitemNum,0),CRTItemNum:m.null2EmptyString(t.crtitemNum,0),itemActualAmount:e,itemAmount:a,promotionCode:t.promotionCode||"",promotionId:t.promotionId||"",promotionTitle:t.promotionTitle||"",itemType:t.itemType||"",itemTypeFlag:t.itemTypeFlag||0,inventory:0})})),r.orderMain instanceof Object))){d=r.orderMain,d.deliverTime&&null!==d.deliverTime&&(d.deliverTime=(0,u.formatDate)(new Date(d.deliverTime),"yyyy-MM-DD")),d.updateTime&&null!==d.updateTime&&(d.updateTime=(0,u.formatDate)(new Date(d.updateTime),"yyyy-MM-DD")),d.orderTime&&null!==d.orderTime&&(d.orderTime=(0,u.formatDate)(new Date(d.orderTime),"yyyy-MM-DD")),this.orderMain=(0,o.default)({},d),isNaN(Number(d.itemToalAmount))||(this.totalActualAmountSum=Number(d.itemToalAmount).toFixed(2));for(v in this.params)(d[v]||0===Number(d[v]))&&(this.params[v]=d[v]);this.params.carNo=d.carPlateNo,this.params.carLoad=d.totalWeight,this.params.carCapacity=d.totalVolume,this.params.operatePerson=d.createPersonName,this.params.operateCode=d.createPerson,this.empNameSelected=d.createPersonName,this.params.sourceOrderNo=d.sourceOrderNo,this.params.sourceChannel=this.null2EmptyString(this.params.sourceChannel).toString(),this.storeNameAto=d.storeName}t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.error(t.t0);case 12:case"end":return t.stop()}},t,this,[[1,9]])}));return t}(),null2EmptyString:function(t,e){var a="";return(e||0==e)&&(a=e),t||0===t?null==t?a:t:a},print:function(){document.getElementById("btn-group").style.display="none",window.print(),setTimeout(function(t){return document.getElementById("btn-group").style.display="block"},100)}}}},2631:function(t,e,a){var s=a(2632);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a(43)("6b03eb9a",s,!1,{})},2632:function(t,e,a){e=t.exports=a(42)(!1),e.push([t.i,"\nhtml,\nbody,\n.app-main {\n  height: auto;\n  overflow: auto;\n  background: #FFF;\n  color: #000;\n}\n.pannel {\n  width: 98%;\n  margin: 0 auto;\n  margin-bottom: 10px;\n}\n.pannel > .title {\n  font-size: 14px;\n  margin-bottom: 4px;\n}\n.pannel .row {\n  width: 100%;\n  line-height: 14px;\n  overflow: hidden;\n}\n.pannel .row .col {\n  float: left;\n}\n.pannel .row .col .label {\n  float: left;\n  width: 70px;\n  text-align: left;\n}\n.pannel .row .col .content {\n  display: block;\n  overflow: hidden;\n}\n.pannel .row .col.p33 {\n  width: 33%;\n}\n.pannel .row .col.p66 {\n  width: 66%;\n}\n.custom-table {\n  width: 100%;\n  text-align: center;\n  line-height: 12px;\n  border: 1px solid #000;\n}\n.custom-table th {\n  color: #000;\n  background-color: #eee;\n  font-weight: normal;\n  font-size: 12px;\n  line-height: 12px;\n}\n.custom-table tr th,\n.custom-table tr td {\n  border: 1px solid #000;\n  box-sizing: border-box;\n  padding: 0 5px;\n}\n.custom-table tr td {\n  line-height: 16px;\n  font-size: 12px;\n}\n.custom-table tbody tr:nth-of-type(2n) {\n  background: #f5f5f5;\n}\n.goods-table .base-info {\n  position: relative;\n}\n.goods-table .base-info > span {\n  width: 100%;\n  font-size: 12px;\n  margin: 0;\n  padding: 0;\n  display: inline-block;\n  text-align: left;\n}\n.goods-table .base-info > span.title {\n  padding-right: 20px;\n}\n.goods-table .base-info > span.title span {\n  line-height: 12px;\n}\n.goods-table .base-info > span.title .icon {\n  position: absolute;\n  right: 3px;\n  display: inline-block;\n  width: 20px;\n  height: 20px;\n  line-height: 20px;\n  color: #000;\n  border-radius: 50%;\n  text-align: center;\n}\n.goods-table .base-info > span .price {\n  float: right;\n}\n.goods-table .append-row td {\n  line-height: 45px;\n}\n#btn-group {\n  text-align: center;\n  margin-bottom: 20px;\n}\n.ivu-tag {\n  border-color: #000;\n  background: #fff;\n  height: 16px;\n  line-height: 16px;\n}\n.ivu-tag .ivu-tag-text {\n  color: #000;\n}\n",""])},2633:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"order-base-info pannel"},[a("div",{staticClass:"title"},[t._v("基本信息")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("买家信息")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.storeName))])]),t._v(" "),a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("业务员")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.operatePerson))])]),t._v(" "),a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("订单金额")]),t._v(" "),a("div",{staticClass:"content"},[t._v("￥"+t._s(t.totalActualAmountSum||"0.00"))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("来源")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.orderOrigin(t.params.sourceChannel)))])]),t._v(" "),a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("来源订单号")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.sourceOrderNo))])]),t._v(" "),a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("订单类型")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.sourceChannel(t.params.sourceChannel)))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("订单单号")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.orderNo))])]),t._v(" "),a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("订单状态")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.orderStatusText(t.orderMain.orderStatus)))])]),t._v(" "),a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("买家手机")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.receiverMobile))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("创建日期")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.orderMain.orderTime))])]),t._v(" "),a("div",{staticClass:"p66 col"},[a("div",{staticClass:"label"},[t._v("买家备注")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.remark))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("应付金额")]),t._v(" "),a("div",{staticClass:"content"},[t._v("￥"+t._s(t.params.shouldPayAmount?Number(t.params.shouldPayAmount).toFixed(2):"0.00"))])]),t._v(" "),a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("商品总金额")]),t._v(" "),a("div",{staticClass:"content"},[t._v("￥"+t._s(t.totalActualAmountSum||"0.00"))])]),t._v(" "),a("div",{staticClass:"p33 col"},[a("div",{staticClass:"label"},[t._v("优惠金额")]),t._v(" "),a("div",{staticClass:"content"},[t._v("￥"+t._s(t.params.couponAmount||"0.00"))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"p100 col"},[a("div",{staticClass:"label"},[t._v("优惠券")]),t._v(" "),a("div",{staticClass:"content"},t._l(t.tickList,function(e,s){return a("span",{key:s,staticStyle:{float:"left"}},[a("Tag",{staticStyle:{"border-color":"000"}},[t._v(t._s(e.name))]),t._v(" "),a("br"),t._v(" "),a("span",[t._v(t._s(e.code))])],1)}))])])]),t._v(" "),a("div",{staticClass:"goods-list pannel"},[a("div",{staticClass:"title"},[t._v("商品明细")]),t._v(" "),a("div",{staticClass:"table-content"},[a("table",{staticClass:"custom-table goods-table",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),a("tbody",[t._l(t.goodsData,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(s+1))]),t._v(" "),a("td",{staticClass:"base-info"},[a("span",{staticClass:"title"},[a("span",[t._v(t._s(e.itemName+" * "+e.packageNum))]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.promotionType,expression:"item.promotionType == 1"}],staticClass:"icon",attrs:{title:"赠品"}},[t._v("赠")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:3==e.promotionType,expression:"item.promotionType == 3"}],staticClass:"icon",attrs:{title:"特价"}},[t._v("特")]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:11==e.promotionType,expression:"item.promotionType == 11"}],staticClass:"icon",attrs:{title:"组合商品"}},[t._v("组")])]),t._v(" "),a("br"),t._v(" "),a("span",[a("span",[t._v(t._s(e.item69))]),t._v(" "),a("span",{staticClass:"price"},[t._v("￥"+t._s(e.itemAmount.toFixed(2)))])])]),t._v(" "),a("td",[t._v("￥"+t._s(e.itemActualAmount))]),t._v(" "),a("td",[a("span",{staticStyle:{position:"relative"}},[t.orderMain.orderStatus<=1?a("span",{class:t.overLimit(e)},[t._v("\n                                    "+t._s(e.CRTItemNum+"/"+e.EAItemNum)+"\n                                ")]):2==t.orderMain.orderStatus?a("span",[t._v("\n                                    "+t._s(t.formatEaNum(e.auditEaNum,e.packageNum,!0))+"\n                                ")]):5==t.orderMain.orderStatus?a("span",[t._v("\n                                    "+t._s(t.formatEaNum(e.outEaNum,e.packageNum,!0))+"\n                                ")]):9==t.orderMain.orderStatus?a("span",[t._v("\n                                    "+t._s(t.formatEaNum(e.outEaNum,e.packageNum,!0))+"\n                                ")]):7==t.orderMain.orderStatus?a("span",[t._v("\n                                    "+t._s(t.formatEaNum(e.signEaNum,e.packageNum,!0))+"\n                                ")]):a("span",[t._v("\n                                    "+t._s(e.CRTItemNum+"/"+e.EAItemNum)+"\n                                ")])])]),t._v(" "),a("td",[t._v(t._s(e.itemTotalActualAmount))])])}),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left","text-indent":"12px"},attrs:{colspan:"3"}},[t._v("合计")]),t._v(" "),a("td",[t._v(t._s(t.eaCarNum))]),t._v(" "),a("td",[t._v(t._s(t.params.itemToalAmount))])])],2)])])]),t._v(" "),a("div",{staticClass:"pannel"},[a("div",{staticClass:"title"},[t._v("收货人信息")]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col p33"},[a("div",{staticClass:"label"},[t._v("收货人名称")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.receiverName))])]),t._v(" "),a("div",{staticClass:"col p33"},[a("div",{staticClass:"label"},[t._v("收货人电话")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.receiverMobile))])]),t._v(" "),a("div",{staticClass:"col p33"},[a("div",{staticClass:"label"},[t._v("收货人地址")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.receiverTotalAddress))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col p33"},[a("div",{staticClass:"label"},[t._v("司机")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.driverName))])]),t._v(" "),a("div",{staticClass:"col p33"},[a("div",{staticClass:"label"},[t._v("载重")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.carLoad))])]),t._v(" "),a("div",{staticClass:"col p33"},[a("div",{staticClass:"label"},[t._v("容积")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.carCapacity))])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col p33"},[a("div",{staticClass:"label"},[t._v("送货日期")]),t._v(" "),a("div",{staticClass:"content"},[t._v(t._s(t.params.deliverTime))])])])]),t._v(" "),a("div",{attrs:{id:"btn-group"}},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.print()}}},[t._v("打印")])],1)])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("colgroup",[a("col",{attrs:{width:"60"}}),t._v(" "),a("col",{attrs:{width:"400"}}),t._v(" "),a("col",{attrs:{width:"80"}}),t._v(" "),a("col",{attrs:{width:"80"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("序号")]),t._v(" "),a("th",[t._v("商品")]),t._v(" "),a("th",[t._v("实际价格")]),t._v(" "),a("th",[t._v("数量CAR/EA")]),t._v(" "),a("th",[t._v("小计")])])])}];s._withStripped=!0;var n={render:s,staticRenderFns:r};e.default=n},267:function(t,e,a){"use strict";function s(t){c||a(2631)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(1763),n=a.n(r);for(var i in r)"default"!==i&&function(t){a.d(e,t,function(){return r[t]})}(i);var o=a(2633),l=a.n(o),c=!1,d=a(13),u=s,v=d(n.a,l.a,!1,u,null,null);v.options.__file="src/views/trader-manage/order-manage/order-detail-print-preview.vue",e.default=v.exports},898:function(t,e,a){"use strict";function s(t,e){if(!e)var e="yyyy-MM-DD hh:mm:ss";var a={"M+":t.getMonth()+1,"D+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var s in a)new RegExp("("+s+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?a[s]:("00"+a[s]).substr((""+a[s]).length)));return e}function r(t,e){if(!e)var e="yyyy-MM-dd";(t=Number(t))<1e10&&(t*=1e3);var a=new Date(t),s={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds(),"q+":Math.floor((a.getMonth()+3)/3),S:a.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in s)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?s[r]:("00"+s[r]).substr((""+s[r]).length)));return e}Object.defineProperty(e,"__esModule",{value:!0}),e.formatDate=s,e.timestampToDay=r}});