webpackJsonp([90,274],{1703:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(241),i=n(r),l=a(146),o=n(l),s=a(242),u=n(s),c=a(603),d=n(c),f=a(239);t.default={components:{DefaultHr:d.default},data:function(){var e=this;return{query:{materialName79:"",materialCode79:"",materialCode69:"",currentPage:1,row:10},apiGroup:this.$util.apiConfig.stockManage.countBillManage.add,loading:!1,total:0,tableData:[],tableColumns:[{type:"selection",width:60,align:"center"},{title:"序号",width:75,align:"center",render:function(t,a){return t("span",(e.query.currentPage-1)*e.query.row+a.index+1)}},{title:"条形码",align:"center",key:"materialCode69"},{title:"商品名称",align:"center",width:200,key:"materialName79"},{title:"可用整件数",align:"center",key:"validBoxNum"},{title:"可用散个数",align:"center",key:"validSingleNum"},{title:"锁定整件数",align:"center",key:"reservedBoxNum"},{title:"锁定散个数",align:"center",key:"reservedSingleNum"},{title:"合计整件",align:"center",key:"totalBoxNum"},{title:"合计散个",align:"center",key:"totalSingleNum"},{title:"总计数量",align:"center",key:"totalNum",render:function(e,t){return e("span",parseInt(t.row.validNum)+parseInt(t.row.reservedNum))}},{title:"操作",align:"center",width:120,render:function(t,a){var n=[];return n.push(t("Button",{props:{type:"primary",size:"small"},on:{click:function(t){return e.showInBoundNum(a.row)}}},"在库数据反查")),t("div",n)}}],inboundNumVisible:!1,inboundNumCoulmns:[{title:"序号",width:75,align:"center",render:function(e,t){return e("span",t.index+1)}},{title:"仓库编码",align:"center",key:"warehouseCode"},{title:"仓库名称",align:"center",key:"warehouseName"},{title:"条形码",align:"center",key:"materialCode69"},{title:"商品名称",align:"center",width:300,key:"materialName79"},{title:"可用整件",align:"center",key:"validBoxNum"},{title:"可用散个",align:"center",key:"validSingleNum"},{title:"锁定整件",align:"center",key:"reservedBoxNum"},{title:"锁定散个",align:"center",key:"reservedSingleNum"},{title:"合计整件",align:"center",key:"totalBoxNum"},{title:"合计散个",align:"center",key:"totalSingleNum"}],inboundNumData:[],selectedGoodsObj:{},createModalVisible:!1,createModalTableColumns:[{type:"index",width:60,align:"center"},{title:"条形码",align:"center",key:"materialCode69"},{title:"商品名称",align:"center",width:200,key:"materialName79"},{title:"可用整件数",align:"center",key:"validBoxNum"},{title:"可用散个数",align:"center",key:"validSingleNum"},{title:"锁定整件数",align:"center",key:"reservedBoxNum"},{title:"锁定散个数",align:"center",key:"reservedSingleNum"},{title:"合计整件",align:"center",key:"totalBoxNum"},{title:"合计散个",align:"center",key:"totalSingleNum"},{title:"总计数量",align:"center",key:"totalNum",render:function(e,t){return e("span",parseInt(t.row.validNum)+parseInt(t.row.reservedNum))}}]}},mounted:function(){this.queryData()},computed:{createModalTableList:function(){var e=[];for(var t in this.selectedGoodsObj)e.push(this.selectedGoodsObj[t]);return e.sort(function(e,t){return t.id-e.id}),console.log(e),e}},methods:{queryData:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a,n,r,l,s,u=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,o.default)({},this.query),delete t.row,this.loading=!0,a="",e.prev=4,e.next=7,this.$ajax.post(this.apiGroup.list,f.stringify(t));case 7:n=e.sent,r=n.data,200==r.code?(l=r.result.resultList,s=r.result.pager.totalCount,this.total=s||0,l instanceof Array&&(this.tableData=l.map(function(e){var t=!!u.selectedGoodsObj[e.sku];return(0,o.default)({},e,{_checked:t})}))):a="商品列表请求失败",e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),console.error(e.t0),a="商品列表请求失败";case 16:this.loading=!1,a&&this.$Message.error(a);case 18:case"end":return e.stop()}},e,this,[[4,12]])}));return e}(),handleQueryBtnClick:function(){this.query.currentPage=1,this.queryData()},handleCreate:function(){for(var e in this.selectedGoodsObj)return this.createModalVisible=!0;this.$Modal.warning({content:"请至少选择一件商品！"})},showInBoundNum:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(t){var a,n,r,l,o=t.sku;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.inboundNumVisible=!0,a="",e.prev=2,e.next=5,this.$ajax.post(this.apiGroup.inBoundNum,f.stringify({sku:o}));case 5:n=e.sent,r=n.data,200==r.code?(l=r.result)instanceof Array&&(this.inboundNumData=l):a="在库反查数据获取失败",e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0),a="在库反查数据获取失败";case 14:a&&this.$Message.error(a);case 15:case"end":return e.stop()}},e,this,[[2,10]])}));return e}(),handleTableSelectChange:function(e){var t=this;0!==e.length?this.tableData.forEach(function(t){for(var a=0;a<e.length;a++){if(e[a].sku==t.sku){t._checked=!0;break}t._checked=!1}}):this.tableData.forEach(function(e){e._checked=!1}),this.tableData.forEach(function(e){e._checked?t.selectedGoodsObj[e.sku]=(0,o.default)({},e):delete t.selectedGoodsObj[e.sku]}),this.selectedGoodsObj=(0,o.default)({},this.selectedGoodsObj)},createNew:function(){function e(){return t.apply(this,arguments)}var t=(0,u.default)(i.default.mark(function e(){var t,a,n,r,l,o=this;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.createModalTableList,a="",e.prev=2,e.next=5,this.$ajax.post(this.apiGroup.create,{skuParamList:t});case 5:n=e.sent,r=n.data,l=r.message,r.success?this.$Modal.success({content:l,onOk:function(e){o.createModalVisible=!1,o.selectedGoodsObj={},o.queryData()}}):a=l,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0),a="盘点单创建请求发送失败";case 15:a&&this.$Modal.error({content:a});case 16:case"end":return e.stop()}},e,this,[[2,11]])}));return e}()}}},2387:function(e,t,a){var n=a(2388);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(43)("4f825f0c",n,!1,{})},2388:function(e,t,a){t=e.exports=a(42)(!1),t.push([e.i,"\n.query-btn[data-v-69cd9bc0] {\n  margin-left: 80px;\n  margin-right: 20px;\n}\n.custom-hr[data-v-69cd9bc0] {\n  margin-top: 15px;\n}\n.custom-page[data-v-69cd9bc0] {\n  margin-top: 15px;\n  float: right;\n}\n.custom-h3[data-v-69cd9bc0] {\n  margin: 15px 0;\n}\n.custom-h3[data-v-69cd9bc0]:first-of-type {\n  margin-top: 0;\n}\n",""])},2389:function(e,t,a){var n=a(2390);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(43)("d54d5e54",n,!1,{})},2390:function(e,t,a){t=e.exports=a(42)(!1),t.push([e.i,"\n.Table-inboundNum .ivu-table .ivu-table-body {\n  max-height: 330px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n",""])},2391:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",[a("Form",{attrs:{"label-width":120}},[a("Row",[a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"商品名称"}},[a("Input",{attrs:{clearable:""},model:{value:e.query.materialName79,callback:function(t){e.$set(e.query,"materialName79",t)},expression:"query.materialName79"}})],1)],1),e._v(" "),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"销售编码"}},[a("Input",{attrs:{clearable:""},model:{value:e.query.materialCode79,callback:function(t){e.$set(e.query,"materialCode79",t)},expression:"query.materialCode79"}})],1)],1),e._v(" "),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"条形码"}},[a("Input",{attrs:{clearable:""},model:{value:e.query.materialCode69,callback:function(t){e.$set(e.query,"materialCode69",t)},expression:"query.materialCode69"}})],1)],1)],1),e._v(" "),a("Row",[a("Button",{staticClass:"query-btn",attrs:{type:"primary"},on:{click:e.handleQueryBtnClick}},[e._v("查询")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("创建盘点单")])],1)],1),e._v(" "),a("DefaultHr",{staticClass:"custom-hr"}),e._v(" "),a("div",[a("Table",{attrs:{data:e.tableData,columns:e.tableColumns,loading:e.loading},on:{"on-selection-change":e.handleTableSelectChange}})],1),e._v(" "),a("Row",[a("Page",{staticClass:"custom-page",attrs:{"page-size":e.query.row,current:e.query.currentPage,total:e.total,"show-elevator":"","show-total":""},on:{"update:current":function(t){e.$set(e.query,"currentPage",t)},"on-change":e.queryData}})],1),e._v(" "),a("Modal",{attrs:{width:1200,title:"在库数据反查"},model:{value:e.inboundNumVisible,callback:function(t){e.inboundNumVisible=t},expression:"inboundNumVisible"}},[a("Table",{attrs:{columns:e.inboundNumCoulmns,data:e.inboundNumData}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){e.inboundNumVisible=!1}}},[e._v("关闭")])],1)],1),e._v(" "),a("Modal",{attrs:{width:1200,title:"确认盘点单"},model:{value:e.createModalVisible,callback:function(t){e.createModalVisible=t},expression:"createModalVisible"}},[a("Table",{staticClass:"Table-inboundNum",attrs:{columns:e.createModalTableColumns,data:e.createModalTableList}}),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.createNew}},[e._v("确定")]),e._v(" "),a("Button",{on:{click:function(t){e.createModalVisible=!1}}},[e._v("关闭")])],1)],1)],1)},r=[];n._withStripped=!0;var i={render:n,staticRenderFns:r};t.default=i},603:function(e,t,a){"use strict";function n(e){u||a(964)}Object.defineProperty(t,"__esModule",{value:!0});var r=a(939),i=a.n(r);for(var l in r)"default"!==l&&function(e){a.d(t,e,function(){return r[e]})}(l);var o=a(966),s=a.n(o),u=!1,c=a(13),d=n,f=c(i.a,s.a,!1,d,"data-v-eb39e066",null);f.options.__file="src/views/my-components/default-hr/default-hr.vue",t.default=f.exports},818:function(e,t,a){"use strict";function n(e){u||(a(2387),a(2389))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(1703),i=a.n(r);for(var l in r)"default"!==l&&function(e){a.d(t,e,function(){return r[e]})}(l);var o=a(2391),s=a.n(o),u=!1,c=a(13),d=n,f=c(i.a,s.a,!1,d,"data-v-69cd9bc0",null);f.options.__file="src/views/stock-manage/count-bill-manager/add.vue",t.default=f.exports},939:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},964:function(e,t,a){var n=a(965);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(43)("63be8b28",n,!1,{})},965:function(e,t,a){t=e.exports=a(42)(!1),t.push([e.i,"\n.default-hr[data-v-eb39e066] {\n  width: 100%;\n  height: 1px;\n  border: none;\n  border-top: 1px dashed #aaa;\n  margin-bottom: 20px;\n}\n",""])},966:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("hr",{staticClass:"default-hr"})},r=[];n._withStripped=!0;var i={render:n,staticRenderFns:r};t.default=i}});